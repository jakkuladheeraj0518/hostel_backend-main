<<<<<<< Updated upstream
2025-11-16 20:43:54,128 | INFO     | app | Creating database tables automatically...
2025-11-16 20:43:55,240 | INFO     | app | ✓ All database tables created successfully!
2025-11-16 20:44:13,460 | INFO     | app | Creating database tables automatically...
2025-11-16 20:44:13,567 | INFO     | app | ✓ All database tables created successfully!
2025-11-16 20:55:43,369 | INFO     | app | Creating database tables automatically...
2025-11-16 20:55:43,568 | INFO     | app | ✓ All database tables created successfully!
2025-11-16 21:00:21,774 | INFO     | app | Creating database tables automatically...
2025-11-16 21:00:22,003 | INFO     | app | ✓ All database tables created successfully!
2025-11-16 21:30:08,045 | INFO     | app | Creating database tables automatically...
2025-11-16 21:30:08,232 | INFO     | app | ✓ All database tables created successfully!
2025-11-16 21:46:06,469 | INFO     | app | Creating database tables automatically...
2025-11-16 21:46:06,690 | INFO     | app | ✓ All database tables created successfully!
2025-11-16 21:46:09,561 | INFO     | app | Creating database tables automatically...
2025-11-16 21:46:09,656 | INFO     | app | ✓ All database tables created successfully!
2025-11-16 21:49:32,366 | INFO     | app | Creating database tables automatically...
2025-11-16 21:49:32,510 | INFO     | app | ✓ All database tables created successfully!
2025-11-16 21:49:43,385 | INFO     | app | Creating database tables automatically...
2025-11-16 21:49:43,523 | INFO     | app | ✓ All database tables created successfully!
2025-11-16 21:53:27,665 | INFO     | app | Creating database tables automatically...
2025-11-16 21:53:27,802 | INFO     | app | ✓ All database tables created successfully!
2025-11-16 22:08:07,522 | INFO     | app | Creating database tables automatically...
2025-11-16 22:08:07,745 | INFO     | app | ✓ All database tables created successfully!
2025-11-16 22:27:06,690 | INFO     | app | Creating database tables automatically...
2025-11-16 22:27:06,856 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 09:01:56,874 | INFO     | app | Creating database tables automatically...
2025-11-17 09:01:57,161 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 09:29:58,387 | INFO     | app | Creating database tables automatically...
2025-11-17 09:29:58,819 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 09:46:34,852 | INFO     | app | Creating database tables automatically...
2025-11-17 09:46:35,091 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 09:47:51,979 | INFO     | app | Creating database tables automatically...
2025-11-17 09:47:52,135 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 12:31:29,984 | INFO     | app | Creating database tables automatically...
2025-11-17 12:31:30,352 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 12:31:55,249 | INFO     | app | Creating database tables automatically...
2025-11-17 12:31:55,430 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 12:40:44,338 | INFO     | app | Creating database tables automatically...
2025-11-17 12:40:44,651 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 12:44:15,573 | INFO     | app.api.v1.super_admin.admins | Creating admin with data: {'admin_name': 'nagendra', 'email': 'nagendrareddy1017@gmail.com', 'is_active': True}
2025-11-17 12:44:15,576 | ERROR    | app.api.v1.super_admin.admins | Error creating admin: Mapper 'Mapper[Hostel(hostels)]' has no property 'users'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-11-17 12:53:29,916 | INFO     | app | Creating database tables automatically...
2025-11-17 12:53:30,086 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 12:55:38,695 | INFO     | app | Creating database tables automatically...
2025-11-17 12:55:39,189 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 12:56:41,200 | INFO     | app | Creating database tables automatically...
2025-11-17 12:56:41,311 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 13:00:05,079 | ERROR    | app.services.dashboard_service | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedFunction: function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 13, in get_dashboard_and_activities
    result = db.execute(text("SELECT get_dashboard_and_activities();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedFunction) function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.

[SQL: SELECT get_dashboard_and_activities();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 13:00:12,695 | ERROR    | app.api.v1.super_admin.dashboard | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedFunction: function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\api\v1\super_admin\dashboard.py", line 14, in get_dashboard
    data = DashboardService.get_dashboard_and_activities(db)
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 13, in get_dashboard_and_activities
    result = db.execute(text("SELECT get_dashboard_and_activities();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedFunction) function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.

[SQL: SELECT get_dashboard_and_activities();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 13:00:18,576 | ERROR    | app.services.dashboard_service | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedFunction: function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 13, in get_dashboard_and_activities
    result = db.execute(text("SELECT get_dashboard_and_activities();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedFunction) function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.

[SQL: SELECT get_dashboard_and_activities();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 13:00:18,643 | ERROR    | app.api.v1.super_admin.dashboard | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedFunction: function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\api\v1\super_admin\dashboard.py", line 14, in get_dashboard
    data = DashboardService.get_dashboard_and_activities(db)
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 13, in get_dashboard_and_activities
    result = db.execute(text("SELECT get_dashboard_and_activities();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedFunction) function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.

[SQL: SELECT get_dashboard_and_activities();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 13:00:20,990 | ERROR    | app.services.dashboard_service | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedFunction: function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 13, in get_dashboard_and_activities
    result = db.execute(text("SELECT get_dashboard_and_activities();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedFunction) function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.

[SQL: SELECT get_dashboard_and_activities();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 13:00:21,002 | ERROR    | app.api.v1.super_admin.dashboard | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedFunction: function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\api\v1\super_admin\dashboard.py", line 14, in get_dashboard
    data = DashboardService.get_dashboard_and_activities(db)
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 13, in get_dashboard_and_activities
    result = db.execute(text("SELECT get_dashboard_and_activities();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedFunction) function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.

[SQL: SELECT get_dashboard_and_activities();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 13:00:37,295 | ERROR    | app.services.dashboard_service | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedFunction: function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 13, in get_dashboard_and_activities
    result = db.execute(text("SELECT get_dashboard_and_activities();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedFunction) function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.

[SQL: SELECT get_dashboard_and_activities();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 13:00:37,303 | ERROR    | app.api.v1.super_admin.dashboard | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedFunction: function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\api\v1\super_admin\dashboard.py", line 14, in get_dashboard
    data = DashboardService.get_dashboard_and_activities(db)
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 13, in get_dashboard_and_activities
    result = db.execute(text("SELECT get_dashboard_and_activities();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedFunction) function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.

[SQL: SELECT get_dashboard_and_activities();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 13:01:32,641 | INFO     | app.api.v1.super_admin.admins | Creating admin with data: {'admin_name': 'nagendra', 'email': 'nagendrareddy1017@gmail.com', 'is_active': True}
2025-11-17 13:01:32,644 | ERROR    | app.api.v1.super_admin.admins | Error creating admin: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Mapper 'Mapper[Hostel(hostels)]' has no property 'users'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-11-17 13:07:43,784 | ERROR    | app.services.dashboard_service | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedFunction: function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 13, in get_dashboard_and_activities
    result = db.execute(text("SELECT get_dashboard_and_activities();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedFunction) function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.

[SQL: SELECT get_dashboard_and_activities();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 13:07:43,849 | ERROR    | app.api.v1.super_admin.dashboard | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedFunction: function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\api\v1\super_admin\dashboard.py", line 14, in get_dashboard
    data = DashboardService.get_dashboard_and_activities(db)
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 13, in get_dashboard_and_activities
    result = db.execute(text("SELECT get_dashboard_and_activities();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedFunction) function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.

[SQL: SELECT get_dashboard_and_activities();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 13:19:26,238 | INFO     | app | Creating database tables automatically...
2025-11-17 13:19:26,519 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 14:11:38,773 | INFO     | app | Creating database tables automatically...
2025-11-17 14:11:39,108 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 14:12:02,384 | ERROR    | app.services.dashboard_service | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.DatatypeMismatch: structure of query does not match function result type
DETAIL:  Returned type character varying(255) does not match expected type text in column 2.
CONTEXT:  SQL statement "SELECT
            CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
            h.hostel_name,
            COALESCE(l.city, 'Unknown') AS city,
            COALESCE(SUM(r.revenue), 0) AS revenue,
            COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
        FROM hostels h
        LEFT JOIN locations l ON l.id = h.location_id
        LEFT JOIN revenues r ON r.hostel_id = h.id
            AND date_trunc('month', r.month) = date_trunc('month', current_date)
        LEFT JOIN occupancies o ON o.hostel_id = h.id
            AND date_trunc('month', o.month) = date_trunc('month', current_date)
        GROUP BY h.hostel_name, l.city
        ORDER BY revenue DESC
        LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 34, in get_dashboard_and_activities
    top_result = db.execute(text("SELECT * FROM get_top_performing_hostels();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) structure of query does not match function result type
DETAIL:  Returned type character varying(255) does not match expected type text in column 2.
CONTEXT:  SQL statement "SELECT
            CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
            h.hostel_name,
            COALESCE(l.city, 'Unknown') AS city,
            COALESCE(SUM(r.revenue), 0) AS revenue,
            COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
        FROM hostels h
        LEFT JOIN locations l ON l.id = h.location_id
        LEFT JOIN revenues r ON r.hostel_id = h.id
            AND date_trunc('month', r.month) = date_trunc('month', current_date)
        LEFT JOIN occupancies o ON o.hostel_id = h.id
            AND date_trunc('month', o.month) = date_trunc('month', current_date)
        GROUP BY h.hostel_name, l.city
        ORDER BY revenue DESC
        LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY

[SQL: SELECT * FROM get_top_performing_hostels();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 14:12:02,425 | ERROR    | app.api.v1.super_admin.dashboard | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.DatatypeMismatch: structure of query does not match function result type
DETAIL:  Returned type character varying(255) does not match expected type text in column 2.
CONTEXT:  SQL statement "SELECT
            CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
            h.hostel_name,
            COALESCE(l.city, 'Unknown') AS city,
            COALESCE(SUM(r.revenue), 0) AS revenue,
            COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
        FROM hostels h
        LEFT JOIN locations l ON l.id = h.location_id
        LEFT JOIN revenues r ON r.hostel_id = h.id
            AND date_trunc('month', r.month) = date_trunc('month', current_date)
        LEFT JOIN occupancies o ON o.hostel_id = h.id
            AND date_trunc('month', o.month) = date_trunc('month', current_date)
        GROUP BY h.hostel_name, l.city
        ORDER BY revenue DESC
        LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\api\v1\super_admin\dashboard.py", line 14, in get_dashboard
    data = DashboardService.get_dashboard_and_activities(db)
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 34, in get_dashboard_and_activities
    top_result = db.execute(text("SELECT * FROM get_top_performing_hostels();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) structure of query does not match function result type
DETAIL:  Returned type character varying(255) does not match expected type text in column 2.
CONTEXT:  SQL statement "SELECT
            CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
            h.hostel_name,
            COALESCE(l.city, 'Unknown') AS city,
            COALESCE(SUM(r.revenue), 0) AS revenue,
            COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
        FROM hostels h
        LEFT JOIN locations l ON l.id = h.location_id
        LEFT JOIN revenues r ON r.hostel_id = h.id
            AND date_trunc('month', r.month) = date_trunc('month', current_date)
        LEFT JOIN occupancies o ON o.hostel_id = h.id
            AND date_trunc('month', o.month) = date_trunc('month', current_date)
        GROUP BY h.hostel_name, l.city
        ORDER BY revenue DESC
        LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY

[SQL: SELECT * FROM get_top_performing_hostels();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 16:49:52,571 | INFO     | app | Creating database tables automatically...
2025-11-17 16:49:52,736 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 17:05:21,998 | ERROR    | app.services.dashboard_service | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.DatatypeMismatch: structure of query does not match function result type
DETAIL:  Returned type character varying(255) does not match expected type text in column 2.
CONTEXT:  SQL statement "SELECT
            CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
            h.hostel_name,
            COALESCE(l.city, 'Unknown') AS city,
            COALESCE(SUM(r.revenue), 0) AS revenue,
            COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
        FROM hostels h
        LEFT JOIN locations l ON l.id = h.location_id
        LEFT JOIN revenues r ON r.hostel_id = h.id
            AND date_trunc('month', r.month) = date_trunc('month', current_date)
        LEFT JOIN occupancies o ON o.hostel_id = h.id
            AND date_trunc('month', o.month) = date_trunc('month', current_date)
        GROUP BY h.hostel_name, l.city
        ORDER BY revenue DESC
        LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 34, in get_dashboard_and_activities
    top_result = db.execute(text("SELECT * FROM get_top_performing_hostels();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) structure of query does not match function result type
DETAIL:  Returned type character varying(255) does not match expected type text in column 2.
CONTEXT:  SQL statement "SELECT
            CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
            h.hostel_name,
            COALESCE(l.city, 'Unknown') AS city,
            COALESCE(SUM(r.revenue), 0) AS revenue,
            COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
        FROM hostels h
        LEFT JOIN locations l ON l.id = h.location_id
        LEFT JOIN revenues r ON r.hostel_id = h.id
            AND date_trunc('month', r.month) = date_trunc('month', current_date)
        LEFT JOIN occupancies o ON o.hostel_id = h.id
            AND date_trunc('month', o.month) = date_trunc('month', current_date)
        GROUP BY h.hostel_name, l.city
        ORDER BY revenue DESC
        LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY

[SQL: SELECT * FROM get_top_performing_hostels();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 17:05:22,039 | ERROR    | app.api.v1.super_admin.dashboard | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.DatatypeMismatch: structure of query does not match function result type
DETAIL:  Returned type character varying(255) does not match expected type text in column 2.
CONTEXT:  SQL statement "SELECT
            CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
            h.hostel_name,
            COALESCE(l.city, 'Unknown') AS city,
            COALESCE(SUM(r.revenue), 0) AS revenue,
            COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
        FROM hostels h
        LEFT JOIN locations l ON l.id = h.location_id
        LEFT JOIN revenues r ON r.hostel_id = h.id
            AND date_trunc('month', r.month) = date_trunc('month', current_date)
        LEFT JOIN occupancies o ON o.hostel_id = h.id
            AND date_trunc('month', o.month) = date_trunc('month', current_date)
        GROUP BY h.hostel_name, l.city
        ORDER BY revenue DESC
        LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\api\v1\super_admin\dashboard.py", line 14, in get_dashboard
    data = DashboardService.get_dashboard_and_activities(db)
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 34, in get_dashboard_and_activities
    top_result = db.execute(text("SELECT * FROM get_top_performing_hostels();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) structure of query does not match function result type
DETAIL:  Returned type character varying(255) does not match expected type text in column 2.
CONTEXT:  SQL statement "SELECT
            CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
            h.hostel_name,
            COALESCE(l.city, 'Unknown') AS city,
            COALESCE(SUM(r.revenue), 0) AS revenue,
            COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
        FROM hostels h
        LEFT JOIN locations l ON l.id = h.location_id
        LEFT JOIN revenues r ON r.hostel_id = h.id
            AND date_trunc('month', r.month) = date_trunc('month', current_date)
        LEFT JOIN occupancies o ON o.hostel_id = h.id
            AND date_trunc('month', o.month) = date_trunc('month', current_date)
        GROUP BY h.hostel_name, l.city
        ORDER BY revenue DESC
        LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY

[SQL: SELECT * FROM get_top_performing_hostels();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 17:06:05,237 | ERROR    | app.services.dashboard_service | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.DatatypeMismatch: structure of query does not match function result type
DETAIL:  Returned type character varying(255) does not match expected type text in column 2.
CONTEXT:  SQL statement "SELECT
            CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
            h.hostel_name,
            COALESCE(l.city, 'Unknown') AS city,
            COALESCE(SUM(r.revenue), 0) AS revenue,
            COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
        FROM hostels h
        LEFT JOIN locations l ON l.id = h.location_id
        LEFT JOIN revenues r ON r.hostel_id = h.id
            AND date_trunc('month', r.month) = date_trunc('month', current_date)
        LEFT JOIN occupancies o ON o.hostel_id = h.id
            AND date_trunc('month', o.month) = date_trunc('month', current_date)
        GROUP BY h.hostel_name, l.city
        ORDER BY revenue DESC
        LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 34, in get_dashboard_and_activities
    top_result = db.execute(text("SELECT * FROM get_top_performing_hostels();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) structure of query does not match function result type
DETAIL:  Returned type character varying(255) does not match expected type text in column 2.
CONTEXT:  SQL statement "SELECT
            CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
            h.hostel_name,
            COALESCE(l.city, 'Unknown') AS city,
            COALESCE(SUM(r.revenue), 0) AS revenue,
            COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
        FROM hostels h
        LEFT JOIN locations l ON l.id = h.location_id
        LEFT JOIN revenues r ON r.hostel_id = h.id
            AND date_trunc('month', r.month) = date_trunc('month', current_date)
        LEFT JOIN occupancies o ON o.hostel_id = h.id
            AND date_trunc('month', o.month) = date_trunc('month', current_date)
        GROUP BY h.hostel_name, l.city
        ORDER BY revenue DESC
        LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY

[SQL: SELECT * FROM get_top_performing_hostels();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 17:06:05,251 | ERROR    | app.api.v1.super_admin.dashboard | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.DatatypeMismatch: structure of query does not match function result type
DETAIL:  Returned type character varying(255) does not match expected type text in column 2.
CONTEXT:  SQL statement "SELECT
            CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
            h.hostel_name,
            COALESCE(l.city, 'Unknown') AS city,
            COALESCE(SUM(r.revenue), 0) AS revenue,
            COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
        FROM hostels h
        LEFT JOIN locations l ON l.id = h.location_id
        LEFT JOIN revenues r ON r.hostel_id = h.id
            AND date_trunc('month', r.month) = date_trunc('month', current_date)
        LEFT JOIN occupancies o ON o.hostel_id = h.id
            AND date_trunc('month', o.month) = date_trunc('month', current_date)
        GROUP BY h.hostel_name, l.city
        ORDER BY revenue DESC
        LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\api\v1\super_admin\dashboard.py", line 14, in get_dashboard
    data = DashboardService.get_dashboard_and_activities(db)
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 34, in get_dashboard_and_activities
    top_result = db.execute(text("SELECT * FROM get_top_performing_hostels();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) structure of query does not match function result type
DETAIL:  Returned type character varying(255) does not match expected type text in column 2.
CONTEXT:  SQL statement "SELECT
            CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
            h.hostel_name,
            COALESCE(l.city, 'Unknown') AS city,
            COALESCE(SUM(r.revenue), 0) AS revenue,
            COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
        FROM hostels h
        LEFT JOIN locations l ON l.id = h.location_id
        LEFT JOIN revenues r ON r.hostel_id = h.id
            AND date_trunc('month', r.month) = date_trunc('month', current_date)
        LEFT JOIN occupancies o ON o.hostel_id = h.id
            AND date_trunc('month', o.month) = date_trunc('month', current_date)
        GROUP BY h.hostel_name, l.city
        ORDER BY revenue DESC
        LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY

[SQL: SELECT * FROM get_top_performing_hostels();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 17:08:25,790 | INFO     | app | Creating database tables automatically...
2025-11-17 17:08:26,046 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 17:08:30,657 | INFO     | app | Creating database tables automatically...
2025-11-17 17:08:30,856 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 17:09:23,695 | INFO     | app | Creating database tables automatically...
2025-11-17 17:09:24,009 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 17:09:37,959 | INFO     | app | Creating database tables automatically...
2025-11-17 17:09:38,179 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 17:09:43,154 | INFO     | app | Creating database tables automatically...
2025-11-17 17:09:43,326 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 17:10:32,771 | ERROR    | app.services.dashboard_service | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.DatatypeMismatch: structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 34, in get_dashboard_and_activities
    top_result = db.execute(text("SELECT * FROM get_top_performing_hostels();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY

[SQL: SELECT * FROM get_top_performing_hostels();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 17:10:32,802 | ERROR    | app.api.v1.super_admin.dashboard | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.DatatypeMismatch: structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\api\v1\super_admin\dashboard.py", line 14, in get_dashboard
    data = DashboardService.get_dashboard_and_activities(db)
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 34, in get_dashboard_and_activities
    top_result = db.execute(text("SELECT * FROM get_top_performing_hostels();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY

[SQL: SELECT * FROM get_top_performing_hostels();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 17:10:36,565 | ERROR    | app.services.dashboard_service | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.DatatypeMismatch: structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 34, in get_dashboard_and_activities
    top_result = db.execute(text("SELECT * FROM get_top_performing_hostels();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY

[SQL: SELECT * FROM get_top_performing_hostels();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 17:10:36,574 | ERROR    | app.api.v1.super_admin.dashboard | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.DatatypeMismatch: structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\api\v1\super_admin\dashboard.py", line 14, in get_dashboard
    data = DashboardService.get_dashboard_and_activities(db)
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 34, in get_dashboard_and_activities
    top_result = db.execute(text("SELECT * FROM get_top_performing_hostels();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY

[SQL: SELECT * FROM get_top_performing_hostels();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 17:10:37,754 | ERROR    | app.services.dashboard_service | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.DatatypeMismatch: structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 34, in get_dashboard_and_activities
    top_result = db.execute(text("SELECT * FROM get_top_performing_hostels();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY

[SQL: SELECT * FROM get_top_performing_hostels();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 17:10:37,776 | ERROR    | app.api.v1.super_admin.dashboard | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.DatatypeMismatch: structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\api\v1\super_admin\dashboard.py", line 14, in get_dashboard
    data = DashboardService.get_dashboard_and_activities(db)
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 34, in get_dashboard_and_activities
    top_result = db.execute(text("SELECT * FROM get_top_performing_hostels();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY

[SQL: SELECT * FROM get_top_performing_hostels();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 17:10:38,471 | ERROR    | app.services.dashboard_service | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.DatatypeMismatch: structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 34, in get_dashboard_and_activities
    top_result = db.execute(text("SELECT * FROM get_top_performing_hostels();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY

[SQL: SELECT * FROM get_top_performing_hostels();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 17:10:38,481 | ERROR    | app.api.v1.super_admin.dashboard | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.DatatypeMismatch: structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\api\v1\super_admin\dashboard.py", line 14, in get_dashboard
    data = DashboardService.get_dashboard_and_activities(db)
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 34, in get_dashboard_and_activities
    top_result = db.execute(text("SELECT * FROM get_top_performing_hostels();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY

[SQL: SELECT * FROM get_top_performing_hostels();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 17:10:39,094 | ERROR    | app.services.dashboard_service | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.DatatypeMismatch: structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 34, in get_dashboard_and_activities
    top_result = db.execute(text("SELECT * FROM get_top_performing_hostels();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY

[SQL: SELECT * FROM get_top_performing_hostels();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 17:10:39,105 | ERROR    | app.api.v1.super_admin.dashboard | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.DatatypeMismatch: structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\api\v1\super_admin\dashboard.py", line 14, in get_dashboard
    data = DashboardService.get_dashboard_and_activities(db)
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 34, in get_dashboard_and_activities
    top_result = db.execute(text("SELECT * FROM get_top_performing_hostels();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY

[SQL: SELECT * FROM get_top_performing_hostels();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 17:10:39,678 | ERROR    | app.services.dashboard_service | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.DatatypeMismatch: structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 34, in get_dashboard_and_activities
    top_result = db.execute(text("SELECT * FROM get_top_performing_hostels();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY

[SQL: SELECT * FROM get_top_performing_hostels();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 17:10:39,708 | ERROR    | app.api.v1.super_admin.dashboard | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.DatatypeMismatch: structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\api\v1\super_admin\dashboard.py", line 14, in get_dashboard
    data = DashboardService.get_dashboard_and_activities(db)
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 34, in get_dashboard_and_activities
    top_result = db.execute(text("SELECT * FROM get_top_performing_hostels();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY

[SQL: SELECT * FROM get_top_performing_hostels();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 17:10:40,282 | ERROR    | app.services.dashboard_service | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.DatatypeMismatch: structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 34, in get_dashboard_and_activities
    top_result = db.execute(text("SELECT * FROM get_top_performing_hostels();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY

[SQL: SELECT * FROM get_top_performing_hostels();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 17:10:40,292 | ERROR    | app.api.v1.super_admin.dashboard | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.DatatypeMismatch: structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\api\v1\super_admin\dashboard.py", line 14, in get_dashboard
    data = DashboardService.get_dashboard_and_activities(db)
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 34, in get_dashboard_and_activities
    top_result = db.execute(text("SELECT * FROM get_top_performing_hostels();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY

[SQL: SELECT * FROM get_top_performing_hostels();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 17:11:26,332 | INFO     | app | Creating database tables automatically...
2025-11-17 17:11:26,594 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 17:11:54,509 | ERROR    | app.services.dashboard_service | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.DatatypeMismatch: structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 34, in get_dashboard_and_activities
    top_result = db.execute(text("SELECT * FROM get_top_performing_hostels();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY

[SQL: SELECT * FROM get_top_performing_hostels();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 17:11:54,537 | ERROR    | app.api.v1.super_admin.dashboard | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.DatatypeMismatch: structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\api\v1\super_admin\dashboard.py", line 14, in get_dashboard
    data = DashboardService.get_dashboard_and_activities(db)
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 34, in get_dashboard_and_activities
    top_result = db.execute(text("SELECT * FROM get_top_performing_hostels();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY

[SQL: SELECT * FROM get_top_performing_hostels();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 17:12:49,328 | INFO     | app | Creating database tables automatically...
2025-11-17 17:12:49,502 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 17:13:28,977 | ERROR    | app.services.dashboard_service | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.DatatypeMismatch: structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 34, in get_dashboard_and_activities
    top_result = db.execute(text("SELECT * FROM get_top_performing_hostels();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY

[SQL: SELECT * FROM get_top_performing_hostels();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 17:13:29,007 | ERROR    | app.api.v1.super_admin.dashboard | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.DatatypeMismatch: structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\api\v1\super_admin\dashboard.py", line 14, in get_dashboard
    data = DashboardService.get_dashboard_and_activities(db)
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 34, in get_dashboard_and_activities
    top_result = db.execute(text("SELECT * FROM get_top_performing_hostels();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY

[SQL: SELECT * FROM get_top_performing_hostels();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 17:14:35,523 | INFO     | app | Creating database tables automatically...
2025-11-17 17:14:36,160 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 17:15:50,838 | INFO     | app | Creating database tables automatically...
2025-11-17 17:15:51,078 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 17:16:16,773 | ERROR    | app.services.dashboard_service | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedFunction: function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 13, in get_dashboard_and_activities
    result = db.execute(text("SELECT get_dashboard_and_activities();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedFunction) function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.

[SQL: SELECT get_dashboard_and_activities();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 17:16:16,810 | ERROR    | app.api.v1.super_admin.dashboard | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedFunction: function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\api\v1\super_admin\dashboard.py", line 14, in get_dashboard
    data = DashboardService.get_dashboard_and_activities(db)
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 13, in get_dashboard_and_activities
    result = db.execute(text("SELECT get_dashboard_and_activities();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedFunction) function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.

[SQL: SELECT get_dashboard_and_activities();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 17:17:18,789 | INFO     | app | Creating database tables automatically...
2025-11-17 17:17:18,994 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 17:17:23,903 | INFO     | app | Creating database tables automatically...
2025-11-17 17:17:24,077 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 17:18:12,508 | ERROR    | app.services.dashboard_service | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedFunction: function get_top_performing_hostels() does not exist
LINE 1: SELECT * FROM get_top_performing_hostels();
                      ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 34, in get_dashboard_and_activities
    top_result = db.execute(text("SELECT * FROM get_top_performing_hostels();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedFunction) function get_top_performing_hostels() does not exist
LINE 1: SELECT * FROM get_top_performing_hostels();
                      ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.

[SQL: SELECT * FROM get_top_performing_hostels();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 17:18:12,538 | ERROR    | app.api.v1.super_admin.dashboard | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedFunction: function get_top_performing_hostels() does not exist
LINE 1: SELECT * FROM get_top_performing_hostels();
                      ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\api\v1\super_admin\dashboard.py", line 14, in get_dashboard
    data = DashboardService.get_dashboard_and_activities(db)
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 34, in get_dashboard_and_activities
    top_result = db.execute(text("SELECT * FROM get_top_performing_hostels();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedFunction) function get_top_performing_hostels() does not exist
LINE 1: SELECT * FROM get_top_performing_hostels();
                      ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.

[SQL: SELECT * FROM get_top_performing_hostels();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 17:18:22,201 | ERROR    | app.services.dashboard_service | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedFunction: function get_top_performing_hostels() does not exist
LINE 1: SELECT * FROM get_top_performing_hostels();
                      ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 34, in get_dashboard_and_activities
    top_result = db.execute(text("SELECT * FROM get_top_performing_hostels();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedFunction) function get_top_performing_hostels() does not exist
LINE 1: SELECT * FROM get_top_performing_hostels();
                      ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.

[SQL: SELECT * FROM get_top_performing_hostels();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 17:18:22,204 | ERROR    | app.api.v1.super_admin.dashboard | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedFunction: function get_top_performing_hostels() does not exist
LINE 1: SELECT * FROM get_top_performing_hostels();
                      ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\api\v1\super_admin\dashboard.py", line 14, in get_dashboard
    data = DashboardService.get_dashboard_and_activities(db)
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 34, in get_dashboard_and_activities
    top_result = db.execute(text("SELECT * FROM get_top_performing_hostels();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedFunction) function get_top_performing_hostels() does not exist
LINE 1: SELECT * FROM get_top_performing_hostels();
                      ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.

[SQL: SELECT * FROM get_top_performing_hostels();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 17:18:54,641 | ERROR    | app.services.dashboard_service | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.DatatypeMismatch: structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 34, in get_dashboard_and_activities
    top_result = db.execute(text("SELECT * FROM get_top_performing_hostels();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY

[SQL: SELECT * FROM get_top_performing_hostels();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 17:18:54,644 | ERROR    | app.api.v1.super_admin.dashboard | Error fetching dashboard
Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.DatatypeMismatch: structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\HMS_BACKEND\hostel_backend\app\api\v1\super_admin\dashboard.py", line 14, in get_dashboard
    data = DashboardService.get_dashboard_and_activities(db)
  File "D:\HMS_BACKEND\hostel_backend\app\services\dashboard_service.py", line 34, in get_dashboard_and_activities
    top_result = db.execute(text("SELECT * FROM get_top_performing_hostels();"))
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\HMS_BACKEND\hostel_backend\env\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DatatypeMismatch) structure of query does not match function result type
DETAIL:  Returned type character varying does not match expected type text in column 3.
CONTEXT:  SQL statement "SELECT
        CAST(ROW_NUMBER() OVER (ORDER BY COALESCE(SUM(r.revenue), 0) DESC) AS INT) AS rank,
        h.hostel_name::VARCHAR(255),
        COALESCE(l.city, 'Unknown') AS city,
        COALESCE(SUM(r.revenue), 0) AS revenue,
        COALESCE(ROUND(AVG(o.occupancy_rate), 2), 0) AS occupancy
    FROM hostels h
    LEFT JOIN locations l ON l.id = h.location_id
    LEFT JOIN revenues r ON r.hostel_id = h.id
        AND date_trunc('month', r.month) = date_trunc('month', current_date)
    LEFT JOIN occupancies o ON o.hostel_id = h.id
        AND date_trunc('month', o.month) = date_trunc('month', current_date)
    GROUP BY h.hostel_name, l.city
    ORDER BY revenue DESC
    LIMIT 5"
PL/pgSQL function get_top_performing_hostels() line 3 at RETURN QUERY

[SQL: SELECT * FROM get_top_performing_hostels();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 17:20:26,892 | INFO     | app | Creating database tables automatically...
2025-11-17 17:20:27,059 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 17:20:53,469 | INFO     | app | Creating database tables automatically...
2025-11-17 17:20:53,736 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 17:21:12,922 | INFO     | app | Creating database tables automatically...
2025-11-17 17:21:13,078 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 17:22:12,428 | INFO     | app.api.v1.super_admin.admins | Creating admin with data: {'admin_name': 'nagendra', 'email': 'nagendrareddy1017@gmail.com', 'is_active': True}
2025-11-17 17:22:12,443 | ERROR    | app.api.v1.super_admin.admins | Error creating admin: Mapper 'Mapper[Hostel(hostels)]' has no property 'users'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-11-17 17:23:16,589 | INFO     | app | Creating database tables automatically...
2025-11-17 17:23:16,724 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 17:23:30,077 | INFO     | app | Creating database tables automatically...
2025-11-17 17:23:30,171 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 17:23:30,189 | INFO     | app.api.v1.super_admin.admins | Creating admin with data: {'admin_name': 'nagendra', 'email': 'nagendrareddy1017@gmail.com', 'is_active': True}
2025-11-17 17:23:30,208 | ERROR    | app.api.v1.super_admin.admins | Error creating admin: Mapper 'Mapper[Hostel(hostels)]' has no property 'admin_hostel_mappings'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-11-17 17:23:47,234 | INFO     | app | Creating database tables automatically...
2025-11-17 17:23:47,328 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 17:23:50,193 | INFO     | app | Creating database tables automatically...
2025-11-17 17:23:50,272 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 17:23:52,282 | INFO     | app.api.v1.super_admin.admins | Creating admin with data: {'admin_name': 'nagendra', 'email': 'nagendrareddy1017@gmail.com', 'is_active': True}
2025-11-17 17:23:52,304 | ERROR    | app.api.v1.super_admin.admins | Error creating admin: Mapper 'Mapper[Hostel(hostels)]' has no property 'session_contexts'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-11-17 17:24:02,994 | INFO     | app.api.v1.super_admin.admins | Creating admin with data: {'admin_name': 'nagendra', 'email': 'nagendrareddy1017@gmail.com', 'is_active': True}
2025-11-17 17:24:02,996 | ERROR    | app.api.v1.super_admin.admins | Error creating admin: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[SessionContext(session_contexts)]'. Original exception was: Mapper 'Mapper[Hostel(hostels)]' has no property 'session_contexts'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-11-17 17:24:12,188 | INFO     | app | Creating database tables automatically...
2025-11-17 17:24:12,268 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 17:24:22,527 | INFO     | app | Creating database tables automatically...
2025-11-17 17:24:22,753 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 17:24:22,771 | INFO     | app.api.v1.super_admin.admins | Creating admin with data: {'admin_name': 'nagendra', 'email': 'nagendrareddy1017@gmail.com', 'is_active': True}
2025-11-17 17:24:22,872 | INFO     | app.api.v1.super_admin.admins | Admin created successfully: admin_name='nagendra' email='nagendrareddy1017@gmail.com' is_active=True id=3 joined_at=datetime.datetime(2025, 11, 17, 17, 24, 22, 856981, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800)))
2025-11-17 17:24:30,870 | INFO     | app.api.v1.super_admin.admins | Creating admin with data: {'admin_name': 'nagendra', 'email': 'nagendrareddy1017@gmail.com', 'is_active': True}
2025-11-17 17:24:30,907 | ERROR    | app.api.v1.super_admin.admins | Error creating admin: 400: Admin with this email already exists
2025-11-17 17:25:20,958 | INFO     | app.api.v1.super_admin.admins | Creating admin with data: {'admin_name': 'sasi', 'email': 'sasi123@gmail.com', 'is_active': True}
2025-11-17 17:25:20,965 | INFO     | app.api.v1.super_admin.admins | Admin created successfully: admin_name='sasi' email='sasi123@gmail.com' is_active=True id=4 joined_at=datetime.datetime(2025, 11, 17, 17, 25, 20, 959956, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800)))
2025-11-17 17:26:09,940 | INFO     | app.api.v1.super_admin.admins | Assigning hostel to admin 3 with data: {'permission_level': 'read', 'hostel_id': 1}
2025-11-17 17:26:09,940 | INFO     | app.services.admin_service | Assigning hostel with permission level: PermissionLevel.read (type: <enum 'PermissionLevel'>)
2025-11-17 17:26:09,944 | INFO     | app.repositories.admin_repository | Creating assignment with permission level: read
2025-11-17 17:26:10,023 | INFO     | app.api.v1.super_admin.admins | Hostel assignment created successfully: permission_level=<PermissionLevel.read: 'read'> id=1 admin_id=3 hostel_id=1 assigned_at=datetime.datetime(2025, 11, 17, 17, 26, 9, 942707, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800)))
2025-11-17 17:26:41,782 | INFO     | app.api.v1.super_admin.admins | Bulk assigning hostels with data: {'admin_id': 3, 'hostel_ids': [2, 3], 'permission_level': 'read'}
2025-11-17 17:26:41,784 | INFO     | app.services.admin_service | Bulk assigning with permission level: PermissionLevel.read (type: <enum 'PermissionLevel'>)
2025-11-17 17:26:41,789 | ERROR    | app.services.admin_service | Error in bulk_assign_hostels: (psycopg2.errors.InvalidColumnReference) there is no unique or exclusion constraint matching the ON CONFLICT specification

[SQL: 
                INSERT INTO admin_hostel_assignments (admin_id, hostel_id, permission_level)
                VALUES (%(admin_id)s, %(hostel_id)s, %(permission_level)s)
                ON CONFLICT (admin_id, hostel_id) 
                DO UPDATE SET permission_level = %(permission_level)s
                RETURNING *;
            ]
[parameters: {'admin_id': 3, 'hostel_id': 2, 'permission_level': 'read'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 17:26:41,789 | ERROR    | app.api.v1.super_admin.admins | Error in bulk_assign_hostels endpoint: 500: (psycopg2.errors.InvalidColumnReference) there is no unique or exclusion constraint matching the ON CONFLICT specification

[SQL: 
                INSERT INTO admin_hostel_assignments (admin_id, hostel_id, permission_level)
                VALUES (%(admin_id)s, %(hostel_id)s, %(permission_level)s)
                ON CONFLICT (admin_id, hostel_id) 
                DO UPDATE SET permission_level = %(permission_level)s
                RETURNING *;
            ]
[parameters: {'admin_id': 3, 'hostel_id': 2, 'permission_level': 'read'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 17:26:58,617 | INFO     | app.api.v1.super_admin.admins | Bulk assigning hostels with data: {'admin_id': 2, 'hostel_ids': [2, 3], 'permission_level': 'read'}
2025-11-17 17:26:58,620 | INFO     | app.services.admin_service | Bulk assigning with permission level: PermissionLevel.read (type: <enum 'PermissionLevel'>)
2025-11-17 17:26:58,658 | ERROR    | app.services.admin_service | Error in bulk_assign_hostels: (psycopg2.errors.InvalidColumnReference) there is no unique or exclusion constraint matching the ON CONFLICT specification

[SQL: 
                INSERT INTO admin_hostel_assignments (admin_id, hostel_id, permission_level)
                VALUES (%(admin_id)s, %(hostel_id)s, %(permission_level)s)
                ON CONFLICT (admin_id, hostel_id) 
                DO UPDATE SET permission_level = %(permission_level)s
                RETURNING *;
            ]
[parameters: {'admin_id': 2, 'hostel_id': 2, 'permission_level': 'read'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 17:26:58,659 | ERROR    | app.api.v1.super_admin.admins | Error in bulk_assign_hostels endpoint: 500: (psycopg2.errors.InvalidColumnReference) there is no unique or exclusion constraint matching the ON CONFLICT specification

[SQL: 
                INSERT INTO admin_hostel_assignments (admin_id, hostel_id, permission_level)
                VALUES (%(admin_id)s, %(hostel_id)s, %(permission_level)s)
                ON CONFLICT (admin_id, hostel_id) 
                DO UPDATE SET permission_level = %(permission_level)s
                RETURNING *;
            ]
[parameters: {'admin_id': 2, 'hostel_id': 2, 'permission_level': 'read'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 17:27:11,888 | INFO     | app.api.v1.super_admin.admins | Bulk assigning hostels with data: {'admin_id': 3, 'hostel_ids': [5, 1], 'permission_level': 'read'}
2025-11-17 17:27:11,897 | INFO     | app.services.admin_service | Bulk assigning with permission level: PermissionLevel.read (type: <enum 'PermissionLevel'>)
2025-11-17 17:27:11,917 | ERROR    | app.services.admin_service | Error in bulk_assign_hostels: (psycopg2.errors.InvalidColumnReference) there is no unique or exclusion constraint matching the ON CONFLICT specification

[SQL: 
                INSERT INTO admin_hostel_assignments (admin_id, hostel_id, permission_level)
                VALUES (%(admin_id)s, %(hostel_id)s, %(permission_level)s)
                ON CONFLICT (admin_id, hostel_id) 
                DO UPDATE SET permission_level = %(permission_level)s
                RETURNING *;
            ]
[parameters: {'admin_id': 3, 'hostel_id': 5, 'permission_level': 'read'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 17:27:11,919 | ERROR    | app.api.v1.super_admin.admins | Error in bulk_assign_hostels endpoint: 500: (psycopg2.errors.InvalidColumnReference) there is no unique or exclusion constraint matching the ON CONFLICT specification

[SQL: 
                INSERT INTO admin_hostel_assignments (admin_id, hostel_id, permission_level)
                VALUES (%(admin_id)s, %(hostel_id)s, %(permission_level)s)
                ON CONFLICT (admin_id, hostel_id) 
                DO UPDATE SET permission_level = %(permission_level)s
                RETURNING *;
            ]
[parameters: {'admin_id': 3, 'hostel_id': 5, 'permission_level': 'read'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 17:29:38,702 | INFO     | app.api.v1.super_admin.admins | Bulk assigning hostels with data: {'admin_id': 3, 'hostel_ids': [5, 1], 'permission_level': 'read'}
2025-11-17 17:29:38,705 | INFO     | app.services.admin_service | Bulk assigning with permission level: PermissionLevel.read (type: <enum 'PermissionLevel'>)
2025-11-17 17:29:38,706 | ERROR    | app.services.admin_service | Error in bulk_assign_hostels: (psycopg2.errors.InvalidColumnReference) there is no unique or exclusion constraint matching the ON CONFLICT specification

[SQL: 
                INSERT INTO admin_hostel_assignments (admin_id, hostel_id, permission_level)
                VALUES (%(admin_id)s, %(hostel_id)s, %(permission_level)s)
                ON CONFLICT (admin_id, hostel_id) 
                DO UPDATE SET permission_level = %(permission_level)s
                RETURNING *;
            ]
[parameters: {'admin_id': 3, 'hostel_id': 5, 'permission_level': 'read'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 17:29:38,707 | ERROR    | app.api.v1.super_admin.admins | Error in bulk_assign_hostels endpoint: 500: (psycopg2.errors.InvalidColumnReference) there is no unique or exclusion constraint matching the ON CONFLICT specification

[SQL: 
                INSERT INTO admin_hostel_assignments (admin_id, hostel_id, permission_level)
                VALUES (%(admin_id)s, %(hostel_id)s, %(permission_level)s)
                ON CONFLICT (admin_id, hostel_id) 
                DO UPDATE SET permission_level = %(permission_level)s
                RETURNING *;
            ]
[parameters: {'admin_id': 3, 'hostel_id': 5, 'permission_level': 'read'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-17 17:30:30,158 | INFO     | app | Creating database tables automatically...
2025-11-17 17:30:30,373 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 17:30:38,941 | INFO     | app | Creating database tables automatically...
2025-11-17 17:30:39,055 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 17:30:44,756 | INFO     | app | Creating database tables automatically...
2025-11-17 17:30:44,963 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 17:30:56,855 | INFO     | app | Creating database tables automatically...
2025-11-17 17:30:56,953 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 17:31:20,534 | INFO     | app.api.v1.super_admin.admins | Bulk assigning hostels with data: {'admin_id': 3, 'hostel_ids': [5, 1], 'permission_level': 'read'}
2025-11-17 17:31:20,824 | INFO     | app.services.admin_service | Bulk assigning with permission level: PermissionLevel.read (type: <enum 'PermissionLevel'>)
2025-11-17 17:31:20,858 | INFO     | app.api.v1.super_admin.admins | Bulk assignment successful: success=True message='Successfully assigned 2 hostels to admin' assignments=[AdminHostelAssignmentResponse(permission_level=<PermissionLevel.read: 'read'>, id=2, admin_id=3, hostel_id=5, assigned_at=datetime.datetime(2025, 11, 17, 17, 31, 20, 819954, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800)))), AdminHostelAssignmentResponse(permission_level=<PermissionLevel.read: 'read'>, id=1, admin_id=3, hostel_id=1, assigned_at=datetime.datetime(2025, 11, 17, 17, 26, 9, 942707, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))))]
2025-11-17 17:31:45,817 | INFO     | app | Creating database tables automatically...
2025-11-17 17:31:45,934 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 17:31:52,969 | INFO     | app.api.v1.super_admin.admins | Bulk assigning hostels with data: {'admin_id': 3, 'hostel_ids': [5, 1], 'permission_level': 'read'}
2025-11-17 17:31:53,135 | INFO     | app.services.admin_service | Bulk assigning with permission level: PermissionLevel.read (type: <enum 'PermissionLevel'>)
2025-11-17 17:31:53,139 | INFO     | app.api.v1.super_admin.admins | Bulk assignment successful: success=True message='Successfully assigned 2 hostels to admin' assignments=[AdminHostelAssignmentResponse(permission_level=<PermissionLevel.read: 'read'>, id=2, admin_id=3, hostel_id=5, assigned_at=datetime.datetime(2025, 11, 17, 17, 31, 20, 819954, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800)))), AdminHostelAssignmentResponse(permission_level=<PermissionLevel.read: 'read'>, id=1, admin_id=3, hostel_id=1, assigned_at=datetime.datetime(2025, 11, 17, 17, 26, 9, 942707, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))))]
2025-11-17 17:31:53,176 | INFO     | app.api.v1.super_admin.admins | Bulk assigning hostels with data: {'admin_id': 3, 'hostel_ids': [5, 1], 'permission_level': 'read'}
2025-11-17 17:31:53,186 | INFO     | app.services.admin_service | Bulk assigning with permission level: PermissionLevel.read (type: <enum 'PermissionLevel'>)
2025-11-17 17:31:53,189 | INFO     | app.api.v1.super_admin.admins | Bulk assignment successful: success=True message='Successfully assigned 2 hostels to admin' assignments=[AdminHostelAssignmentResponse(permission_level=<PermissionLevel.read: 'read'>, id=2, admin_id=3, hostel_id=5, assigned_at=datetime.datetime(2025, 11, 17, 17, 31, 20, 819954, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800)))), AdminHostelAssignmentResponse(permission_level=<PermissionLevel.read: 'read'>, id=1, admin_id=3, hostel_id=1, assigned_at=datetime.datetime(2025, 11, 17, 17, 26, 9, 942707, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))))]
2025-11-17 17:32:55,300 | INFO     | app.api.v1.super_admin.admins | Bulk assigning hostels with data: {'admin_id': 3, 'hostel_ids': [5, 1], 'permission_level': 'read'}
2025-11-17 17:32:55,302 | INFO     | app.services.admin_service | Bulk assigning with permission level: PermissionLevel.read (type: <enum 'PermissionLevel'>)
2025-11-17 17:32:55,308 | INFO     | app.api.v1.super_admin.admins | Bulk assignment successful: success=True message='Successfully assigned 2 hostels to admin' assignments=[AdminHostelAssignmentResponse(permission_level=<PermissionLevel.read: 'read'>, id=8, admin_id=3, hostel_id=5, assigned_at=datetime.datetime(2025, 11, 17, 17, 32, 55, 301908, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800)))), AdminHostelAssignmentResponse(permission_level=<PermissionLevel.read: 'read'>, id=1, admin_id=3, hostel_id=1, assigned_at=datetime.datetime(2025, 11, 17, 17, 26, 9, 942707, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))))]
2025-11-17 18:37:32,463 | INFO     | app | Creating database tables automatically...
2025-11-17 18:37:32,606 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 18:42:48,274 | INFO     | app | Creating database tables automatically...
2025-11-17 18:42:48,363 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 18:46:37,111 | INFO     | app | Creating database tables automatically...
2025-11-17 18:46:37,207 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 18:48:47,487 | INFO     | app | Creating database tables automatically...
2025-11-17 18:48:47,596 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 18:48:56,950 | INFO     | app | Creating database tables automatically...
2025-11-17 18:48:57,087 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 18:49:03,587 | INFO     | app | Creating database tables automatically...
2025-11-17 18:49:03,739 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 18:53:00,675 | INFO     | app | Creating database tables automatically...
2025-11-17 18:53:00,892 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 18:53:25,559 | INFO     | app | Creating database tables automatically...
2025-11-17 18:53:25,717 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 18:54:39,671 | INFO     | app | Creating database tables automatically...
2025-11-17 18:54:39,902 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 18:54:43,245 | INFO     | app | Creating database tables automatically...
2025-11-17 18:54:43,369 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 18:54:53,605 | INFO     | app | Creating database tables automatically...
2025-11-17 18:54:53,705 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 18:54:58,571 | INFO     | app | Creating database tables automatically...
2025-11-17 18:54:58,658 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 19:18:09,377 | INFO     | app | Creating database tables automatically...
2025-11-17 19:18:09,548 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 19:18:27,223 | INFO     | app | Creating database tables automatically...
2025-11-17 19:18:27,404 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 19:20:45,244 | INFO     | app | Creating database tables automatically...
2025-11-17 19:20:45,363 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 19:21:35,550 | INFO     | app | Creating database tables automatically...
2025-11-17 19:21:35,759 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 19:21:47,730 | INFO     | app | Creating database tables automatically...
2025-11-17 19:21:47,819 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 19:25:52,497 | INFO     | app | Creating database tables automatically...
2025-11-17 19:25:52,610 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 19:26:08,765 | INFO     | app | Creating database tables automatically...
2025-11-17 19:26:08,998 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 19:31:07,605 | INFO     | app | Creating database tables automatically...
2025-11-17 19:31:07,798 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 20:12:20,369 | INFO     | app | Creating database tables automatically...
2025-11-17 20:12:20,500 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 20:14:12,345 | INFO     | app | Creating database tables automatically...
2025-11-17 20:14:12,587 | INFO     | app | ✓ All database tables created successfully!
2025-11-17 21:22:09,195 | INFO     | app | Creating database tables automatically...
2025-11-17 21:22:09,541 | INFO     | app | ✓ All database tables created successfully!
2025-11-18 10:13:49,688 | INFO     | app | Initializing database...
2025-11-18 10:13:50,721 | INFO     | app | Database initialized.
2025-11-18 10:13:50,722 | INFO     | app | Initializing Elasticsearch...
2025-11-18 10:13:50,723 | INFO     | app | Elasticsearch ready.
2025-11-18 10:23:47,443 | INFO     | app | Initializing database...
2025-11-18 10:23:47,566 | INFO     | app | Database initialized.
2025-11-18 10:23:47,567 | INFO     | app | Initializing Elasticsearch...
2025-11-18 10:23:47,567 | INFO     | app | Elasticsearch ready.
2025-11-18 10:24:54,179 | ERROR    | app.services.dashboard_service | Error fetching dashboard
Traceback (most recent call last):
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedFunction: function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "F:\hostel_backend\app\services\dashboard_service.py", line 13, in get_dashboard_and_activities
    result = db.execute(text("SELECT get_dashboard_and_activities();"))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedFunction) function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.

[SQL: SELECT get_dashboard_and_activities();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-18 10:24:54,244 | ERROR    | app.api.v1.super_admin.dashboard | Error fetching dashboard
Traceback (most recent call last):
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedFunction: function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "F:\hostel_backend\app\api\v1\super_admin\dashboard.py", line 14, in get_dashboard
    data = DashboardService.get_dashboard_and_activities(db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\app\services\dashboard_service.py", line 13, in get_dashboard_and_activities
    result = db.execute(text("SELECT get_dashboard_and_activities();"))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedFunction) function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.

[SQL: SELECT get_dashboard_and_activities();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-18 10:28:27,734 | INFO     | app | Initializing database...
2025-11-18 10:28:27,834 | INFO     | app | Database initialized.
2025-11-18 10:28:27,835 | INFO     | app | Initializing Elasticsearch...
2025-11-18 10:28:27,835 | INFO     | app | Elasticsearch ready.
2025-11-18 10:29:21,324 | INFO     | app.api.v1.super_admin.admins | Creating admin with data: {'admin_name': 'sardhar', 'email': 'sardhar@gmail.com', 'is_active': True}
2025-11-18 10:29:21,575 | INFO     | app.api.v1.super_admin.admins | Admin created successfully: admin_name='sardhar' email='sardhar@gmail.com' is_active=True id=3 joined_at=datetime.datetime(2025, 11, 18, 10, 29, 21, 544996, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800)))
2025-11-18 10:30:25,928 | ERROR    | app.services.dashboard_service | Error fetching dashboard
Traceback (most recent call last):
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedFunction: function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "F:\hostel_backend\app\services\dashboard_service.py", line 13, in get_dashboard_and_activities
    result = db.execute(text("SELECT get_dashboard_and_activities();"))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedFunction) function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.

[SQL: SELECT get_dashboard_and_activities();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-18 10:30:25,940 | ERROR    | app.api.v1.super_admin.dashboard | Error fetching dashboard
Traceback (most recent call last):
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedFunction: function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "F:\hostel_backend\app\api\v1\super_admin\dashboard.py", line 14, in get_dashboard
    data = DashboardService.get_dashboard_and_activities(db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\app\services\dashboard_service.py", line 13, in get_dashboard_and_activities
    result = db.execute(text("SELECT get_dashboard_and_activities();"))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedFunction) function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.

[SQL: SELECT get_dashboard_and_activities();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-18 10:33:14,706 | INFO     | app | Initializing database...
2025-11-18 10:33:15,116 | INFO     | app | Database initialized.
2025-11-18 10:33:15,116 | INFO     | app | Initializing Elasticsearch...
2025-11-18 10:33:15,116 | INFO     | app | Elasticsearch ready.
2025-11-18 10:33:19,659 | INFO     | app | Initializing database...
2025-11-18 10:33:19,784 | INFO     | app | Database initialized.
2025-11-18 10:33:19,785 | INFO     | app | Initializing Elasticsearch...
2025-11-18 10:33:19,786 | INFO     | app | Elasticsearch ready.
2025-11-18 10:33:25,082 | INFO     | app | Initializing database...
2025-11-18 10:33:25,366 | INFO     | app | Database initialized.
2025-11-18 10:33:25,367 | INFO     | app | Initializing Elasticsearch...
2025-11-18 10:33:25,368 | INFO     | app | Elasticsearch ready.
2025-11-18 10:35:02,022 | INFO     | app | Initializing database...
2025-11-18 10:35:02,159 | INFO     | app | Database initialized.
2025-11-18 10:35:02,160 | INFO     | app | Initializing Elasticsearch...
2025-11-18 10:35:02,160 | INFO     | app | Elasticsearch ready.
2025-11-18 10:35:17,753 | INFO     | app | Initializing database...
2025-11-18 10:35:17,978 | INFO     | app | Database initialized.
2025-11-18 10:35:18,168 | INFO     | app | Initializing Elasticsearch...
2025-11-18 10:35:18,169 | INFO     | app | Elasticsearch ready.
2025-11-18 10:35:36,359 | INFO     | app | Initializing database...
2025-11-18 10:35:36,524 | INFO     | app | Database initialized.
2025-11-18 10:35:36,525 | INFO     | app | Initializing Elasticsearch...
2025-11-18 10:35:36,526 | INFO     | app | Elasticsearch ready.
2025-11-18 10:35:54,104 | INFO     | app | Initializing database...
2025-11-18 10:35:54,228 | INFO     | app | Database initialized.
2025-11-18 10:35:54,229 | INFO     | app | Initializing Elasticsearch...
2025-11-18 10:35:54,230 | INFO     | app | Elasticsearch ready.
2025-11-18 10:37:16,225 | INFO     | app | Initializing database...
2025-11-18 10:37:16,369 | INFO     | app | Database initialized.
2025-11-18 10:37:16,371 | INFO     | app | Initializing Elasticsearch...
2025-11-18 10:37:16,372 | INFO     | app | Elasticsearch ready.
2025-11-18 10:38:24,446 | INFO     | app | Initializing database...
2025-11-18 10:38:24,576 | INFO     | app | Database initialized.
2025-11-18 10:38:24,576 | INFO     | app | Initializing Elasticsearch...
2025-11-18 10:38:24,579 | INFO     | app | Elasticsearch ready.
2025-11-18 10:39:39,516 | INFO     | app | Initializing database...
2025-11-18 10:39:39,632 | INFO     | app | Database initialized.
2025-11-18 10:39:39,632 | INFO     | app | Initializing Elasticsearch...
2025-11-18 10:39:39,633 | INFO     | app | Elasticsearch ready.
2025-11-18 10:40:15,988 | INFO     | app | Initializing database...
2025-11-18 10:40:16,127 | INFO     | app | Database initialized.
2025-11-18 10:40:16,127 | INFO     | app | Initializing Elasticsearch...
2025-11-18 10:40:16,128 | INFO     | app | Elasticsearch ready.
2025-11-18 10:41:11,709 | INFO     | app | Initializing database...
2025-11-18 10:41:11,935 | INFO     | app | Database initialized.
2025-11-18 10:41:11,936 | INFO     | app | Initializing Elasticsearch...
2025-11-18 10:41:11,937 | INFO     | app | Elasticsearch ready.
2025-11-18 10:42:52,609 | INFO     | app | Initializing database...
2025-11-18 10:42:52,739 | INFO     | app | Database initialized.
2025-11-18 10:42:52,739 | INFO     | app | Initializing Elasticsearch...
2025-11-18 10:42:52,741 | INFO     | app | Elasticsearch ready.
2025-11-18 10:43:01,692 | INFO     | app | Initializing database...
2025-11-18 10:43:01,814 | INFO     | app | Database initialized.
2025-11-18 10:43:01,814 | INFO     | app | Initializing Elasticsearch...
2025-11-18 10:43:01,815 | INFO     | app | Elasticsearch ready.
2025-11-18 10:43:08,262 | INFO     | app | Initializing database...
2025-11-18 10:43:08,413 | INFO     | app | Database initialized.
2025-11-18 10:43:08,414 | INFO     | app | Initializing Elasticsearch...
2025-11-18 10:43:08,416 | INFO     | app | Elasticsearch ready.
2025-11-18 10:43:17,848 | INFO     | app | Initializing database...
2025-11-18 10:43:17,999 | INFO     | app | Database initialized.
2025-11-18 10:43:17,999 | INFO     | app | Initializing Elasticsearch...
2025-11-18 10:43:18,001 | INFO     | app | Elasticsearch ready.
2025-11-18 10:43:32,462 | INFO     | app | Initializing database...
2025-11-18 10:43:32,592 | INFO     | app | Database initialized.
2025-11-18 10:43:32,593 | INFO     | app | Initializing Elasticsearch...
2025-11-18 10:43:32,594 | INFO     | app | Elasticsearch ready.
2025-11-18 10:45:31,462 | INFO     | app | Initializing database...
2025-11-18 10:45:31,595 | INFO     | app | Database initialized.
2025-11-18 10:45:31,596 | INFO     | app | Initializing Elasticsearch...
2025-11-18 10:45:31,596 | INFO     | app | Elasticsearch ready.
2025-11-18 10:45:45,201 | INFO     | app | Initializing database...
2025-11-18 10:45:45,555 | INFO     | app | Database initialized.
2025-11-18 10:45:45,556 | INFO     | app | Initializing Elasticsearch...
2025-11-18 10:45:45,557 | INFO     | app | Elasticsearch ready.
2025-11-18 10:46:01,257 | INFO     | app | Initializing database...
2025-11-18 10:46:01,364 | INFO     | app | Database initialized.
2025-11-18 10:46:01,365 | INFO     | app | Initializing Elasticsearch...
2025-11-18 10:46:01,365 | INFO     | app | Elasticsearch ready.
2025-11-18 10:51:54,461 | INFO     | app | Initializing database...
2025-11-18 10:51:55,032 | INFO     | app | Database initialized.
2025-11-18 10:51:55,033 | INFO     | app | Initializing Elasticsearch...
2025-11-18 10:51:55,034 | INFO     | app | Elasticsearch ready.
2025-11-18 10:55:34,049 | INFO     | app | Initializing database...
2025-11-18 10:55:34,386 | INFO     | app | Database initialized.
2025-11-18 10:55:34,387 | INFO     | app | Initializing Elasticsearch...
2025-11-18 10:55:34,387 | INFO     | app | Elasticsearch ready.
2025-11-18 10:55:38,192 | INFO     | app | Initializing database...
2025-11-18 10:55:38,298 | INFO     | app | Database initialized.
2025-11-18 10:55:38,298 | INFO     | app | Initializing Elasticsearch...
2025-11-18 10:55:38,299 | INFO     | app | Elasticsearch ready.
2025-11-18 10:58:55,459 | ERROR    | app.services.dashboard_service | Error fetching dashboard
Traceback (most recent call last):
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedFunction: function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "F:\hostel_backend\app\services\dashboard_service.py", line 13, in get_dashboard_and_activities
    result = db.execute(text("SELECT get_dashboard_and_activities();"))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedFunction) function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.

[SQL: SELECT get_dashboard_and_activities();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-18 10:58:55,813 | ERROR    | app.api.v1.super_admin.dashboard | Error fetching dashboard
Traceback (most recent call last):
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedFunction: function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "F:\hostel_backend\app\api\v1\super_admin\dashboard.py", line 14, in get_dashboard
    data = DashboardService.get_dashboard_and_activities(db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\app\services\dashboard_service.py", line 13, in get_dashboard_and_activities
    result = db.execute(text("SELECT get_dashboard_and_activities();"))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedFunction) function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.

[SQL: SELECT get_dashboard_and_activities();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-18 10:59:56,066 | INFO     | app | Initializing database...
2025-11-18 10:59:56,320 | INFO     | app | Database initialized.
2025-11-18 10:59:56,320 | INFO     | app | Initializing Elasticsearch...
2025-11-18 10:59:56,321 | INFO     | app | Elasticsearch ready.
2025-11-18 11:00:08,769 | INFO     | app | Initializing database...
2025-11-18 11:00:08,986 | INFO     | app | Database initialized.
2025-11-18 11:00:08,987 | INFO     | app | Initializing Elasticsearch...
2025-11-18 11:00:08,988 | INFO     | app | Elasticsearch ready.
2025-11-18 11:02:40,711 | INFO     | app | Initializing database...
2025-11-18 11:02:41,254 | INFO     | app | Database initialized.
2025-11-18 11:02:41,255 | INFO     | app | Initializing Elasticsearch...
2025-11-18 11:02:41,256 | INFO     | app | Elasticsearch ready.
2025-11-18 11:06:19,291 | INFO     | app | Initializing database...
2025-11-18 11:06:19,583 | INFO     | app | Database initialized.
2025-11-18 11:06:19,584 | INFO     | app | Initializing Elasticsearch...
2025-11-18 11:06:19,585 | INFO     | app | Elasticsearch ready.
2025-11-18 11:10:03,602 | INFO     | app | Initializing database...
2025-11-18 11:10:03,839 | INFO     | app | Database initialized.
2025-11-18 11:10:03,840 | INFO     | app | Initializing Elasticsearch...
2025-11-18 11:10:03,841 | INFO     | app | Elasticsearch ready.
2025-11-18 11:15:40,945 | INFO     | app | Initializing database...
2025-11-18 11:15:41,410 | INFO     | app | Database initialized.
2025-11-18 11:15:41,412 | INFO     | app | Initializing Elasticsearch...
2025-11-18 11:15:41,413 | INFO     | app | Elasticsearch ready.
2025-11-18 11:15:48,128 | INFO     | app | Initializing database...
2025-11-18 11:15:48,258 | INFO     | app | Database initialized.
2025-11-18 11:15:48,259 | INFO     | app | Initializing Elasticsearch...
2025-11-18 11:15:48,260 | INFO     | app | Elasticsearch ready.
2025-11-18 11:17:03,378 | INFO     | app | Initializing database...
2025-11-18 11:17:03,499 | INFO     | app | Database initialized.
2025-11-18 11:17:03,499 | INFO     | app | Initializing Elasticsearch...
2025-11-18 11:17:03,501 | INFO     | app | Elasticsearch ready.
2025-11-18 11:22:08,096 | INFO     | app | Initializing database...
2025-11-18 11:22:08,350 | INFO     | app | Database initialized.
2025-11-18 11:22:08,352 | INFO     | app | Initializing Elasticsearch...
2025-11-18 11:22:08,352 | INFO     | app | Elasticsearch ready.
2025-11-18 11:22:27,576 | INFO     | app | Initializing database...
2025-11-18 11:22:27,679 | INFO     | app | Database initialized.
2025-11-18 11:22:27,871 | INFO     | app | Initializing Elasticsearch...
2025-11-18 11:22:27,872 | INFO     | app | Elasticsearch ready.
2025-11-18 11:28:24,610 | INFO     | app | Initializing database...
2025-11-18 11:28:24,859 | INFO     | app | Database initialized.
2025-11-18 11:28:24,860 | INFO     | app | Initializing Elasticsearch...
2025-11-18 11:28:24,860 | INFO     | app | Elasticsearch ready.
2025-11-18 11:28:35,057 | INFO     | app | Initializing database...
2025-11-18 11:28:35,290 | INFO     | app | Database initialized.
2025-11-18 11:28:35,290 | INFO     | app | Initializing Elasticsearch...
2025-11-18 11:28:35,291 | INFO     | app | Elasticsearch ready.
2025-11-18 11:32:11,556 | INFO     | app | Initializing database...
2025-11-18 11:32:11,800 | INFO     | app | Database initialized.
2025-11-18 11:32:11,800 | INFO     | app | Initializing Elasticsearch...
2025-11-18 11:32:11,801 | INFO     | app | Elasticsearch ready.
2025-11-18 11:36:39,422 | INFO     | app | Initializing database...
2025-11-18 11:36:39,859 | INFO     | app | Database initialized.
2025-11-18 11:36:39,859 | INFO     | app | Initializing Elasticsearch...
2025-11-18 11:36:39,860 | INFO     | app | Elasticsearch ready.
2025-11-18 11:40:03,715 | INFO     | app | Initializing database...
2025-11-18 11:40:03,925 | INFO     | app | Database initialized.
2025-11-18 11:40:03,930 | INFO     | app | Initializing Elasticsearch...
2025-11-18 11:40:03,932 | INFO     | app | Elasticsearch ready.
2025-11-18 11:40:34,329 | INFO     | app | Initializing database...
2025-11-18 11:40:34,472 | INFO     | app | Database initialized.
2025-11-18 11:40:34,492 | INFO     | app | Initializing Elasticsearch...
2025-11-18 11:40:34,494 | INFO     | app | Elasticsearch ready.
2025-11-18 11:52:52,879 | INFO     | app | Initializing database...
2025-11-18 11:52:53,331 | INFO     | app | Database initialized.
2025-11-18 11:52:53,331 | INFO     | app | Initializing Elasticsearch...
2025-11-18 11:52:53,333 | INFO     | app | Elasticsearch ready.
2025-11-18 11:59:49,867 | INFO     | app | Initializing database...
2025-11-18 11:59:50,531 | INFO     | app | Database initialized.
2025-11-18 11:59:50,531 | INFO     | app | Initializing Elasticsearch...
2025-11-18 11:59:50,533 | INFO     | app | Elasticsearch ready.
2025-11-18 12:00:03,103 | INFO     | app | Initializing database...
2025-11-18 12:00:03,346 | INFO     | app | Database initialized.
2025-11-18 12:00:03,347 | INFO     | app | Initializing Elasticsearch...
2025-11-18 12:00:03,349 | INFO     | app | Elasticsearch ready.
2025-11-18 12:07:23,684 | ERROR    | app.services.dashboard_service | Error fetching dashboard
Traceback (most recent call last):
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedFunction: function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "F:\hostel_backend\app\services\dashboard_service.py", line 13, in get_dashboard_and_activities
    result = db.execute(text("SELECT get_dashboard_and_activities();"))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedFunction) function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.

[SQL: SELECT get_dashboard_and_activities();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-18 12:07:23,846 | ERROR    | app.api.v1.super_admin.dashboard | Error fetching dashboard
Traceback (most recent call last):
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedFunction: function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "F:\hostel_backend\app\api\v1\super_admin\dashboard.py", line 14, in get_dashboard
    data = DashboardService.get_dashboard_and_activities(db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\app\services\dashboard_service.py", line 13, in get_dashboard_and_activities
    result = db.execute(text("SELECT get_dashboard_and_activities();"))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2258, in _execute_internal
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "F:\hostel_backend\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedFunction) function get_dashboard_and_activities() does not exist
LINE 1: SELECT get_dashboard_and_activities();
               ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.

[SQL: SELECT get_dashboard_and_activities();]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-18 12:09:38,488 | INFO     | app | Initializing database...
2025-11-18 12:09:39,029 | INFO     | app | Database initialized.
2025-11-18 12:09:39,029 | INFO     | app | Initializing Elasticsearch...
2025-11-18 12:09:39,030 | INFO     | app | Elasticsearch ready.
2025-11-18 12:09:43,919 | INFO     | app | Initializing database...
2025-11-18 12:09:44,051 | INFO     | app | Database initialized.
2025-11-18 12:09:44,052 | INFO     | app | Initializing Elasticsearch...
2025-11-18 12:09:44,052 | INFO     | app | Elasticsearch ready.
2025-11-18 12:09:53,906 | INFO     | app | Initializing database...
2025-11-18 12:09:54,068 | INFO     | app | Database initialized.
2025-11-18 12:09:54,069 | INFO     | app | Initializing Elasticsearch...
2025-11-18 12:09:54,073 | INFO     | app | Elasticsearch ready.
2025-11-18 12:10:19,217 | INFO     | app | Initializing database...
2025-11-18 12:10:19,348 | INFO     | app | Database initialized.
2025-11-18 12:10:19,349 | INFO     | app | Initializing Elasticsearch...
2025-11-18 12:10:19,349 | INFO     | app | Elasticsearch ready.
2025-11-18 12:10:27,788 | INFO     | app | Initializing database...
2025-11-18 12:10:27,921 | INFO     | app | Database initialized.
2025-11-18 12:10:27,922 | INFO     | app | Initializing Elasticsearch...
2025-11-18 12:10:27,922 | INFO     | app | Elasticsearch ready.
2025-11-18 12:11:10,241 | INFO     | app | Initializing database...
2025-11-18 12:11:10,417 | INFO     | app | Database initialized.
2025-11-18 12:11:10,417 | INFO     | app | Initializing Elasticsearch...
2025-11-18 12:11:10,418 | INFO     | app | Elasticsearch ready.
2025-11-18 12:11:16,250 | INFO     | app | Initializing database...
2025-11-18 12:11:16,411 | INFO     | app | Database initialized.
2025-11-18 12:11:16,414 | INFO     | app | Initializing Elasticsearch...
2025-11-18 12:11:16,415 | INFO     | app | Elasticsearch ready.
2025-11-18 12:11:35,715 | ERROR    | app.services.dashboard_service | Error fetching dashboard
Traceback (most recent call last):
  File "F:\hostel_backend\app\services\dashboard_service.py", line 47, in get_dashboard_and_activities
    Hostel.city,
    ^^^^^^^^^^^
AttributeError: type object 'Hostel' has no attribute 'city'
2025-11-18 12:11:35,718 | ERROR    | app.api.v1.super_admin.dashboard | Error fetching dashboard
Traceback (most recent call last):
  File "F:\hostel_backend\app\api\v1\super_admin\dashboard.py", line 14, in get_dashboard
    data = DashboardService.get_dashboard_and_activities(db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\app\services\dashboard_service.py", line 47, in get_dashboard_and_activities
    Hostel.city,
    ^^^^^^^^^^^
AttributeError: type object 'Hostel' has no attribute 'city'
2025-11-18 12:12:11,929 | INFO     | app | Initializing database...
2025-11-18 12:12:12,049 | INFO     | app | Database initialized.
2025-11-18 12:12:12,050 | INFO     | app | Initializing Elasticsearch...
2025-11-18 12:12:12,050 | INFO     | app | Elasticsearch ready.
2025-11-18 12:12:16,300 | INFO     | app | Initializing database...
2025-11-18 12:12:16,480 | INFO     | app | Database initialized.
2025-11-18 12:12:16,519 | INFO     | app | Initializing Elasticsearch...
2025-11-18 12:12:16,524 | INFO     | app | Elasticsearch ready.
2025-11-18 12:12:36,913 | INFO     | app | Initializing database...
2025-11-18 12:12:37,643 | INFO     | app | Database initialized.
2025-11-18 12:12:37,644 | INFO     | app | Initializing Elasticsearch...
2025-11-18 12:12:37,645 | INFO     | app | Elasticsearch ready.
2025-11-18 12:13:30,624 | ERROR    | app.services.dashboard_service | Error fetching dashboard
Traceback (most recent call last):
  File "F:\hostel_backend\app\services\dashboard_service.py", line 47, in get_dashboard_and_activities
    Hostel.city,
    ^^^^^^^^^^^
AttributeError: type object 'Hostel' has no attribute 'city'
2025-11-18 12:13:30,985 | ERROR    | app.api.v1.super_admin.dashboard | Error fetching dashboard
Traceback (most recent call last):
  File "F:\hostel_backend\app\api\v1\super_admin\dashboard.py", line 14, in get_dashboard
    data = DashboardService.get_dashboard_and_activities(db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\app\services\dashboard_service.py", line 47, in get_dashboard_and_activities
    Hostel.city,
    ^^^^^^^^^^^
AttributeError: type object 'Hostel' has no attribute 'city'
2025-11-18 12:13:41,756 | ERROR    | app.services.dashboard_service | Error fetching dashboard
Traceback (most recent call last):
  File "F:\hostel_backend\app\services\dashboard_service.py", line 47, in get_dashboard_and_activities
    Hostel.city,
    ^^^^^^^^^^^
AttributeError: type object 'Hostel' has no attribute 'city'
2025-11-18 12:13:41,758 | ERROR    | app.api.v1.super_admin.dashboard | Error fetching dashboard
Traceback (most recent call last):
  File "F:\hostel_backend\app\api\v1\super_admin\dashboard.py", line 14, in get_dashboard
    data = DashboardService.get_dashboard_and_activities(db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "F:\hostel_backend\app\services\dashboard_service.py", line 47, in get_dashboard_and_activities
    Hostel.city,
    ^^^^^^^^^^^
AttributeError: type object 'Hostel' has no attribute 'city'
2025-11-18 12:15:26,341 | INFO     | app | Initializing database...
2025-11-18 12:15:26,594 | INFO     | app | Database initialized.
2025-11-18 12:15:26,602 | INFO     | app | Initializing Elasticsearch...
2025-11-18 12:15:26,606 | INFO     | app | Elasticsearch ready.
2025-11-18 12:15:31,593 | INFO     | app | Initializing database...
2025-11-18 12:15:31,718 | INFO     | app | Database initialized.
2025-11-18 12:15:31,719 | INFO     | app | Initializing Elasticsearch...
2025-11-18 12:15:31,719 | INFO     | app | Elasticsearch ready.
2025-11-18 12:21:21,235 | INFO     | app | Initializing database...
2025-11-18 12:21:21,808 | INFO     | app | Database initialized.
2025-11-18 12:21:21,810 | INFO     | app | Initializing Elasticsearch...
2025-11-18 12:21:21,810 | INFO     | app | Elasticsearch ready.
2025-11-18 12:22:05,856 | INFO     | app | Initializing database...
2025-11-18 12:22:05,996 | INFO     | app | Database initialized.
2025-11-18 12:22:05,996 | INFO     | app | Initializing Elasticsearch...
2025-11-18 12:22:05,997 | INFO     | app | Elasticsearch ready.
2025-11-18 12:23:13,060 | INFO     | app | Initializing database...
2025-11-18 12:23:13,177 | INFO     | app | Database initialized.
2025-11-18 12:23:13,178 | INFO     | app | Initializing Elasticsearch...
2025-11-18 12:23:13,178 | INFO     | app | Elasticsearch ready.
2025-11-18 12:29:33,466 | INFO     | app.api.v1.super_admin.admins | Creating admin with data: {'admin_name': 'nagendra', 'email': 'nagendra@gmail.com', 'is_active': True}
2025-11-18 12:29:33,936 | INFO     | app.api.v1.super_admin.admins | Admin created successfully: admin_name='nagendra' email='nagendra@gmail.com' is_active=True id=4 joined_at=datetime.datetime(2025, 11, 18, 12, 29, 33, 844853, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800)))
2025-11-18 12:30:43,517 | INFO     | app | Initializing database...
2025-11-18 12:30:44,112 | INFO     | app | Database initialized.
2025-11-18 12:30:44,113 | INFO     | app | Initializing Elasticsearch...
2025-11-18 12:30:44,113 | INFO     | app | Elasticsearch ready.
2025-11-18 12:31:07,131 | INFO     | app | Initializing database...
2025-11-18 12:31:07,387 | INFO     | app | Database initialized.
2025-11-18 12:31:07,388 | INFO     | app | Initializing Elasticsearch...
2025-11-18 12:31:07,388 | INFO     | app | Elasticsearch ready.
2025-11-18 12:53:45,748 | INFO     | app | Initializing database...
2025-11-18 12:53:46,389 | INFO     | app | Database initialized.
2025-11-18 12:53:46,392 | INFO     | app | Initializing Elasticsearch...
2025-11-18 12:53:46,393 | INFO     | app | Elasticsearch ready.
2025-11-18 16:33:47,810 | INFO     | app | Initializing database...
2025-11-18 16:35:24,826 | INFO     | app | Initializing database...
2025-11-18 16:35:26,085 | INFO     | app | Database initialized.
2025-11-18 16:35:26,086 | INFO     | app | Initializing Elasticsearch...
2025-11-18 16:35:26,086 | INFO     | app | Elasticsearch ready.
2025-11-18 16:35:34,612 | INFO     | app | Initializing database...
2025-11-18 16:35:34,978 | INFO     | app | Database initialized.
2025-11-18 16:35:34,978 | INFO     | app | Initializing Elasticsearch...
2025-11-18 16:35:34,979 | INFO     | app | Elasticsearch ready.
2025-11-18 16:39:54,591 | INFO     | app | Initializing database...
2025-11-18 16:39:54,848 | INFO     | app | Database initialized.
2025-11-18 16:39:54,849 | INFO     | app | Initializing Elasticsearch...
2025-11-18 16:39:54,856 | INFO     | app | Elasticsearch ready.
2025-11-18 16:40:17,062 | INFO     | app | Initializing database...
2025-11-18 16:40:17,324 | INFO     | app | Database initialized.
2025-11-18 16:40:17,324 | INFO     | app | Initializing Elasticsearch...
2025-11-18 16:40:17,325 | INFO     | app | Elasticsearch ready.
2025-11-18 16:51:10,662 | INFO     | app | Initializing database...
2025-11-18 16:51:11,066 | INFO     | app | Database initialized.
2025-11-18 16:51:11,066 | INFO     | app | Initializing Elasticsearch...
2025-11-18 16:51:11,066 | INFO     | app | Elasticsearch ready.
2025-11-18 16:51:17,148 | INFO     | app | Initializing database...
2025-11-18 16:51:17,402 | INFO     | app | Database initialized.
2025-11-18 16:51:17,402 | INFO     | app | Initializing Elasticsearch...
2025-11-18 16:51:17,403 | INFO     | app | Elasticsearch ready.
2025-11-18 16:56:25,611 | INFO     | app | Initializing database...
2025-11-18 16:56:26,002 | INFO     | app | Database initialized.
2025-11-18 16:56:26,002 | INFO     | app | Initializing Elasticsearch...
2025-11-18 16:56:26,003 | INFO     | app | Elasticsearch ready.
2025-11-18 16:56:36,872 | INFO     | app | Initializing database...
2025-11-18 16:56:37,060 | INFO     | app | Database initialized.
2025-11-18 16:56:37,060 | INFO     | app | Initializing Elasticsearch...
2025-11-18 16:56:37,061 | INFO     | app | Elasticsearch ready.
2025-11-18 17:11:49,802 | INFO     | app | Initializing database...
2025-11-18 17:11:50,000 | INFO     | app | Database initialized.
2025-11-18 17:11:50,000 | INFO     | app | Initializing Elasticsearch...
2025-11-18 17:11:50,001 | INFO     | app | Elasticsearch ready.
2025-11-18 17:21:17,826 | INFO     | app | Initializing database...
2025-11-18 17:21:18,385 | INFO     | app | Database initialized.
2025-11-18 17:21:18,385 | INFO     | app | Initializing Elasticsearch...
2025-11-18 17:21:18,386 | INFO     | app | Elasticsearch ready.
2025-11-18 17:21:23,307 | INFO     | app | Initializing database...
2025-11-18 17:21:23,427 | INFO     | app | Database initialized.
2025-11-18 17:21:23,428 | INFO     | app | Initializing Elasticsearch...
2025-11-18 17:21:23,428 | INFO     | app | Elasticsearch ready.
2025-11-18 17:21:34,888 | INFO     | app | Initializing database...
2025-11-18 17:21:35,080 | INFO     | app | Database initialized.
2025-11-18 17:21:35,080 | INFO     | app | Initializing Elasticsearch...
2025-11-18 17:21:35,081 | INFO     | app | Elasticsearch ready.
2025-11-18 17:27:56,962 | INFO     | app | Initializing database...
2025-11-18 17:27:57,384 | INFO     | app | Database initialized.
2025-11-18 17:27:57,384 | INFO     | app | Initializing Elasticsearch...
2025-11-18 17:27:57,385 | INFO     | app | Elasticsearch ready.
2025-11-18 17:27:57,389 | INFO     | app | Database initialized.
2025-11-18 17:27:57,390 | INFO     | app | Initializing Elasticsearch...
2025-11-18 17:27:57,390 | INFO     | app | Elasticsearch ready.
2025-11-18 17:28:17,112 | INFO     | app | Initializing database...
2025-11-18 17:28:17,185 | INFO     | app | Initializing database...
2025-11-18 17:28:17,340 | INFO     | app | Database initialized.
2025-11-18 17:28:17,341 | INFO     | app | Initializing Elasticsearch...
2025-11-18 17:28:17,341 | INFO     | app | Elasticsearch ready.
2025-11-18 17:28:17,395 | INFO     | app | Database initialized.
2025-11-18 17:28:17,395 | INFO     | app | Initializing Elasticsearch...
2025-11-18 17:28:17,396 | INFO     | app | Elasticsearch ready.
2025-11-18 17:36:26,222 | INFO     | app | Initializing database...
2025-11-18 17:36:26,223 | INFO     | app | Initializing database...
2025-11-18 17:36:26,541 | INFO     | app | Database initialized.
2025-11-18 17:36:26,542 | INFO     | app | Initializing Elasticsearch...
2025-11-18 17:36:26,542 | INFO     | app | Initializing Elasticsearch...
2025-11-18 17:36:26,542 | INFO     | app | Elasticsearch ready.
2025-11-18 17:36:26,542 | INFO     | app | Elasticsearch ready.
<<<<<<< HEAD
2025-11-19 14:37:52,259 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-19 14:38:18,789 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-19 14:38:44,988 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-19 14:38:56,082 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-19 14:39:11,528 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-19 14:39:41,905 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-19 14:39:41,913 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-19 14:39:56,511 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-19 14:39:56,579 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-19 14:40:02,459 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-19 14:40:32,927 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-19 14:41:00,576 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-19 14:41:00,661 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-19 14:41:06,603 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-19 14:41:06,609 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-19 14:41:23,771 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-19 14:42:08,254 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-19 14:42:08,281 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-19 14:42:08,394 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-19 14:46:57,498 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-19 14:49:18,018 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-19 14:50:20,257 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-19 14:53:12,280 | INFO     | app | Initializing database...
2025-11-19 15:00:08,905 | INFO     | app | Initializing database...
2025-11-19 15:00:10,192 | INFO     | app | Database initialized.
2025-11-19 15:00:10,192 | INFO     | app | Initializing Elasticsearch...
2025-11-19 15:00:10,195 | INFO     | app | Elasticsearch ready.
2025-11-19 15:00:10,211 | INFO     | app | BookingExpiryService started
2025-11-19 15:07:24,800 | INFO     | app | Initializing database...
2025-11-19 15:07:24,981 | INFO     | app | Database initialized.
2025-11-19 15:07:24,982 | INFO     | app | Initializing Elasticsearch...
2025-11-19 15:07:24,983 | INFO     | app | Elasticsearch ready.
2025-11-19 15:07:24,995 | INFO     | app | BookingExpiryService started
2025-11-19 15:15:36,013 | INFO     | app | Initializing database...
2025-11-19 15:15:36,193 | INFO     | app | Database initialized.
2025-11-19 15:15:36,194 | INFO     | app | Initializing Elasticsearch...
2025-11-19 15:15:36,194 | INFO     | app | Elasticsearch ready.
2025-11-19 15:15:36,217 | INFO     | app | BookingExpiryService started
2025-11-19 15:16:00,728 | INFO     | app | Initializing database...
2025-11-19 15:16:00,968 | INFO     | app | Database initialized.
2025-11-19 15:16:00,969 | INFO     | app | Initializing Elasticsearch...
2025-11-19 15:16:00,969 | INFO     | app | Elasticsearch ready.
2025-11-19 15:16:00,979 | INFO     | app | BookingExpiryService started
2025-11-19 15:22:40,278 | INFO     | app | Initializing database...
2025-11-19 15:22:40,521 | INFO     | app | Database initialized.
2025-11-19 15:22:40,521 | INFO     | app | Initializing Elasticsearch...
2025-11-19 15:22:40,522 | INFO     | app | Elasticsearch ready.
2025-11-19 15:22:40,538 | INFO     | app | BookingExpiryService started
2025-11-19 15:22:47,038 | INFO     | app | Initializing database...
2025-11-19 15:22:47,311 | INFO     | app | Database initialized.
2025-11-19 15:22:47,312 | INFO     | app | Initializing Elasticsearch...
2025-11-19 15:22:47,312 | INFO     | app | Elasticsearch ready.
2025-11-19 15:22:47,327 | INFO     | app | BookingExpiryService started
2025-11-19 15:23:09,436 | INFO     | app | Initializing database...
2025-11-19 15:23:09,570 | INFO     | app | Database initialized.
2025-11-19 15:23:09,571 | INFO     | app | Initializing Elasticsearch...
2025-11-19 15:23:09,571 | INFO     | app | Elasticsearch ready.
2025-11-19 15:23:09,579 | INFO     | app | BookingExpiryService started
2025-11-19 15:27:22,260 | INFO     | app | Initializing database...
2025-11-19 15:27:22,424 | INFO     | app | Database initialized.
2025-11-19 15:27:22,424 | INFO     | app | Initializing Elasticsearch...
2025-11-19 15:27:22,425 | INFO     | app | Elasticsearch ready.
2025-11-19 15:27:22,442 | INFO     | app | BookingExpiryService started
2025-11-19 15:30:38,583 | INFO     | app | Initializing database...
2025-11-19 15:30:38,784 | INFO     | app | Database initialized.
2025-11-19 15:30:38,785 | INFO     | app | Initializing Elasticsearch...
2025-11-19 15:30:38,786 | INFO     | app | Elasticsearch ready.
2025-11-19 15:30:38,800 | INFO     | app | BookingExpiryService started
2025-11-19 15:31:02,975 | INFO     | app | Initializing database...
2025-11-19 15:31:03,247 | INFO     | app | Database initialized.
2025-11-19 15:31:03,249 | INFO     | app | Initializing Elasticsearch...
2025-11-19 15:31:03,252 | INFO     | app | Elasticsearch ready.
2025-11-19 15:31:03,266 | INFO     | app | BookingExpiryService started
2025-11-19 15:31:03,410 | ERROR    | app | Error in _check_and_expire_bookings: Mapper 'Mapper[Hostel(hostels)]' has no property 'admin_assignments'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-11-19 15:31:26,950 | INFO     | app | Initializing database...
2025-11-19 15:31:27,099 | INFO     | app | Database initialized.
2025-11-19 15:31:27,100 | INFO     | app | Initializing Elasticsearch...
2025-11-19 15:31:27,101 | INFO     | app | Elasticsearch ready.
2025-11-19 15:31:27,109 | INFO     | app | BookingExpiryService started
2025-11-19 15:31:27,278 | ERROR    | app | Error in _check_and_expire_bookings: Mapper 'Mapper[Hostel(hostels)]' has no property 'admin_assignments'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-11-19 15:31:32,594 | INFO     | app | Initializing database...
2025-11-19 15:31:32,857 | INFO     | app | Database initialized.
2025-11-19 15:31:32,857 | INFO     | app | Initializing Elasticsearch...
2025-11-19 15:31:32,858 | INFO     | app | Elasticsearch ready.
2025-11-19 15:31:32,866 | INFO     | app | BookingExpiryService started
2025-11-19 15:31:32,960 | ERROR    | app | Error in _check_and_expire_bookings: Mapper 'Mapper[Hostel(hostels)]' has no property 'admin_assignments'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-11-19 15:33:51,369 | INFO     | app | Initializing database...
2025-11-19 15:33:51,503 | INFO     | app | Database initialized.
2025-11-19 15:33:51,504 | INFO     | app | Initializing Elasticsearch...
2025-11-19 15:33:51,505 | INFO     | app | Elasticsearch ready.
2025-11-19 15:33:51,526 | INFO     | app | BookingExpiryService started
2025-11-19 15:33:51,597 | ERROR    | app | Error in _check_and_expire_bookings: Mapper 'Mapper[Hostel(hostels)]' has no property 'admin_assignments'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-11-19 15:33:57,428 | INFO     | app | Initializing database...
2025-11-19 15:33:57,566 | INFO     | app | Database initialized.
2025-11-19 15:33:57,566 | INFO     | app | Initializing Elasticsearch...
2025-11-19 15:33:57,567 | INFO     | app | Elasticsearch ready.
2025-11-19 15:33:57,582 | INFO     | app | BookingExpiryService started
2025-11-19 15:33:57,644 | ERROR    | app | Error in _check_and_expire_bookings: Mapper 'Mapper[Hostel(hostels)]' has no property 'admin_assignments'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-11-19 15:34:03,182 | INFO     | app | Initializing database...
2025-11-19 15:34:03,369 | INFO     | app | Database initialized.
2025-11-19 15:34:03,370 | INFO     | app | Initializing Elasticsearch...
2025-11-19 15:34:03,370 | INFO     | app | Elasticsearch ready.
2025-11-19 15:34:03,389 | INFO     | app | BookingExpiryService started
2025-11-19 15:34:03,466 | ERROR    | app | Error in _check_and_expire_bookings: Mapper 'Mapper[Hostel(hostels)]' has no property 'admin_assignments'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-11-19 15:34:15,076 | INFO     | app | Initializing database...
2025-11-19 15:34:15,235 | INFO     | app | Database initialized.
2025-11-19 15:34:15,236 | INFO     | app | Initializing Elasticsearch...
2025-11-19 15:34:15,237 | INFO     | app | Elasticsearch ready.
2025-11-19 15:34:15,248 | INFO     | app | BookingExpiryService started
2025-11-19 15:34:15,320 | ERROR    | app | Error in _check_and_expire_bookings: Mapper 'Mapper[Hostel(hostels)]' has no property 'admin_assignments'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-11-19 15:34:44,265 | INFO     | app | Initializing database...
2025-11-19 15:34:44,422 | INFO     | app | Database initialized.
2025-11-19 15:34:44,423 | INFO     | app | Initializing Elasticsearch...
2025-11-19 15:34:44,423 | INFO     | app | Elasticsearch ready.
2025-11-19 15:34:44,430 | INFO     | app | BookingExpiryService started
2025-11-19 15:34:58,801 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-19 15:35:37,233 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-19 15:35:54,170 | INFO     | app | Initializing database...
2025-11-19 15:35:54,325 | INFO     | app | Database initialized.
2025-11-19 15:35:54,325 | INFO     | app | Initializing Elasticsearch...
2025-11-19 15:35:54,327 | INFO     | app | Elasticsearch ready.
2025-11-19 15:35:54,347 | INFO     | app | BookingExpiryService started
2025-11-19 15:48:04,430 | INFO     | app | Initializing database...
2025-11-19 15:48:04,690 | INFO     | app | Database initialized.
2025-11-19 15:48:04,691 | INFO     | app | Initializing Elasticsearch...
2025-11-19 15:48:04,692 | INFO     | app | Elasticsearch ready.
2025-11-19 15:48:04,713 | INFO     | app | BookingExpiryService started
2025-11-19 15:48:26,835 | INFO     | app | Initializing database...
2025-11-19 15:48:27,083 | INFO     | app | Database initialized.
2025-11-19 15:48:27,084 | INFO     | app | Initializing Elasticsearch...
2025-11-19 15:48:27,084 | INFO     | app | Elasticsearch ready.
2025-11-19 15:48:27,097 | INFO     | app | BookingExpiryService started
2025-11-19 16:01:31,784 | INFO     | app | Initializing database...
2025-11-19 16:01:32,093 | INFO     | app | Database initialized.
2025-11-19 16:01:32,093 | INFO     | app | Initializing Elasticsearch...
2025-11-19 16:01:32,095 | INFO     | app | Elasticsearch ready.
2025-11-19 16:01:32,112 | INFO     | app | BookingExpiryService started
2025-11-19 16:02:16,776 | INFO     | app | Initializing database...
2025-11-19 16:02:17,023 | INFO     | app | Database initialized.
2025-11-19 16:02:17,024 | INFO     | app | Initializing Elasticsearch...
2025-11-19 16:02:17,025 | INFO     | app | Elasticsearch ready.
2025-11-19 16:02:17,035 | INFO     | app | BookingExpiryService started
2025-11-19 16:02:34,226 | INFO     | app | Initializing database...
2025-11-19 16:02:34,369 | INFO     | app | Database initialized.
2025-11-19 16:02:34,369 | INFO     | app | Initializing Elasticsearch...
2025-11-19 16:02:34,370 | INFO     | app | Elasticsearch ready.
2025-11-19 16:02:34,385 | INFO     | app | BookingExpiryService started
=======
2025-11-18 23:07:14,578 | INFO     | app | Initializing database...
2025-11-18 23:10:38,267 | INFO     | app | Initializing database...
2025-11-18 23:14:15,658 | INFO     | app | Initializing database...
2025-11-18 23:14:22,769 | INFO     | app | Initializing database...
2025-11-18 23:16:01,228 | INFO     | app | Initializing database...
2025-11-18 23:16:01,873 | INFO     | app | Database initialized.
2025-11-18 23:16:01,873 | INFO     | app | Initializing Elasticsearch...
2025-11-18 23:16:01,873 | INFO     | app | Elasticsearch ready.
2025-11-18 23:16:05,151 | INFO     | app | Initializing database...
2025-11-18 23:16:05,238 | INFO     | app | Database initialized.
2025-11-18 23:16:05,239 | INFO     | app | Initializing Elasticsearch...
2025-11-18 23:16:05,239 | INFO     | app | Elasticsearch ready.
2025-11-18 23:16:08,729 | INFO     | app | Initializing database...
2025-11-18 23:16:08,832 | INFO     | app | Database initialized.
2025-11-18 23:16:08,833 | INFO     | app | Initializing Elasticsearch...
2025-11-18 23:16:08,833 | INFO     | app | Elasticsearch ready.
2025-11-18 23:16:27,032 | INFO     | app | Initializing database...
2025-11-18 23:16:27,136 | INFO     | app | Database initialized.
2025-11-18 23:16:27,136 | INFO     | app | Initializing Elasticsearch...
2025-11-18 23:16:27,136 | INFO     | app | Elasticsearch ready.
2025-11-18 23:19:14,326 | INFO     | app | Initializing database...
2025-11-18 23:19:14,415 | INFO     | app | Database initialized.
2025-11-18 23:19:14,415 | INFO     | app | Initializing Elasticsearch...
2025-11-18 23:19:14,416 | INFO     | app | Elasticsearch ready.
2025-11-18 23:20:42,430 | INFO     | app | Initializing database...
2025-11-18 23:20:42,568 | INFO     | app | Database initialized.
2025-11-18 23:20:42,568 | INFO     | app | Initializing Elasticsearch...
2025-11-18 23:20:42,569 | INFO     | app | Elasticsearch ready.
2025-11-18 23:53:55,747 | INFO     | app | Initializing database...
2025-11-18 23:53:55,966 | INFO     | app | Database initialized.
2025-11-18 23:53:55,966 | INFO     | app | Initializing Elasticsearch...
2025-11-18 23:53:55,967 | INFO     | app | Elasticsearch ready.
2025-11-18 23:55:06,433 | INFO     | app | Initializing database...
2025-11-18 23:55:06,517 | INFO     | app | Database initialized.
2025-11-18 23:55:06,518 | INFO     | app | Initializing Elasticsearch...
2025-11-18 23:55:06,518 | INFO     | app | Elasticsearch ready.
2025-11-19 09:15:01,334 | INFO     | app | Initializing database...
2025-11-19 09:15:01,869 | INFO     | app | Database initialized.
2025-11-19 09:15:01,870 | INFO     | app | Initializing Elasticsearch...
2025-11-19 09:15:01,870 | INFO     | app | Elasticsearch ready.
2025-11-19 09:16:12,635 | INFO     | app | Initializing database...
2025-11-19 09:16:13,054 | INFO     | app | Database initialized.
2025-11-19 09:16:13,055 | INFO     | app | Initializing Elasticsearch...
2025-11-19 09:16:13,056 | INFO     | app | Elasticsearch ready.
2025-11-19 09:26:02,207 | INFO     | app | Initializing database...
2025-11-19 09:26:02,610 | INFO     | app | Database initialized.
2025-11-19 09:26:02,611 | INFO     | app | Initializing Elasticsearch...
2025-11-19 09:26:02,612 | INFO     | app | Elasticsearch ready.
2025-11-19 09:26:14,159 | INFO     | app | Initializing database...
2025-11-19 09:26:14,621 | INFO     | app | Database initialized.
2025-11-19 09:26:14,622 | INFO     | app | Initializing Elasticsearch...
2025-11-19 09:26:14,623 | INFO     | app | Elasticsearch ready.
2025-11-19 09:27:17,412 | INFO     | app | Initializing database...
2025-11-19 09:27:17,761 | INFO     | app | Database initialized.
2025-11-19 09:27:17,761 | INFO     | app | Initializing Elasticsearch...
2025-11-19 09:27:17,762 | INFO     | app | Elasticsearch ready.
2025-11-19 09:28:13,213 | INFO     | app | Initializing database...
2025-11-19 09:28:13,496 | INFO     | app | Database initialized.
2025-11-19 09:28:13,496 | INFO     | app | Initializing Elasticsearch...
2025-11-19 09:28:13,497 | INFO     | app | Elasticsearch ready.
2025-11-19 09:39:09,177 | INFO     | app | Initializing database...
2025-11-19 09:39:09,508 | INFO     | app | Database initialized.
2025-11-19 09:39:09,508 | INFO     | app | Initializing Elasticsearch...
2025-11-19 09:39:09,509 | INFO     | app | Elasticsearch ready.
2025-11-19 09:39:20,482 | INFO     | app | Initializing database...
2025-11-19 09:39:20,868 | INFO     | app | Database initialized.
2025-11-19 09:39:20,869 | INFO     | app | Initializing Elasticsearch...
2025-11-19 09:39:20,870 | INFO     | app | Elasticsearch ready.
2025-11-19 09:39:27,308 | INFO     | app | Initializing database...
2025-11-19 09:39:27,625 | INFO     | app | Database initialized.
2025-11-19 09:39:27,625 | INFO     | app | Initializing Elasticsearch...
2025-11-19 09:39:27,626 | INFO     | app | Elasticsearch ready.
2025-11-19 09:39:37,991 | INFO     | app | Initializing database...
2025-11-19 09:39:38,302 | INFO     | app | Database initialized.
2025-11-19 09:39:38,303 | INFO     | app | Initializing Elasticsearch...
2025-11-19 09:39:38,303 | INFO     | app | Elasticsearch ready.
2025-11-19 09:39:57,710 | INFO     | app | Initializing database...
2025-11-19 09:39:58,000 | INFO     | app | Database initialized.
2025-11-19 09:39:58,000 | INFO     | app | Initializing Elasticsearch...
2025-11-19 09:39:58,001 | INFO     | app | Elasticsearch ready.
2025-11-19 09:41:19,318 | INFO     | app | Initializing database...
2025-11-19 09:41:19,742 | INFO     | app | Database initialized.
2025-11-19 09:41:19,742 | INFO     | app | Initializing Elasticsearch...
2025-11-19 09:41:19,744 | INFO     | app | Elasticsearch ready.
2025-11-19 09:41:33,082 | INFO     | app | Initializing database...
2025-11-19 09:41:33,472 | INFO     | app | Database initialized.
2025-11-19 09:41:33,473 | INFO     | app | Initializing Elasticsearch...
2025-11-19 09:41:33,474 | INFO     | app | Elasticsearch ready.
2025-11-19 09:46:48,638 | INFO     | app | Initializing database...
2025-11-19 09:46:48,990 | INFO     | app | Database initialized.
2025-11-19 09:46:48,991 | INFO     | app | Initializing Elasticsearch...
2025-11-19 09:46:48,991 | INFO     | app | Elasticsearch ready.
2025-11-19 09:47:14,955 | INFO     | app | Initializing database...
2025-11-19 09:47:15,375 | INFO     | app | Database initialized.
2025-11-19 09:47:15,376 | INFO     | app | Initializing Elasticsearch...
2025-11-19 09:47:15,378 | INFO     | app | Elasticsearch ready.
2025-11-19 09:47:30,154 | INFO     | app | Initializing database...
2025-11-19 09:47:30,482 | INFO     | app | Database initialized.
2025-11-19 09:47:30,482 | INFO     | app | Initializing Elasticsearch...
2025-11-19 09:47:30,483 | INFO     | app | Elasticsearch ready.
2025-11-19 09:47:38,947 | INFO     | app | Initializing database...
2025-11-19 09:47:39,338 | INFO     | app | Database initialized.
2025-11-19 09:47:39,338 | INFO     | app | Initializing Elasticsearch...
2025-11-19 09:47:39,339 | INFO     | app | Elasticsearch ready.
2025-11-19 09:47:55,066 | INFO     | app | Initializing database...
2025-11-19 09:47:55,346 | INFO     | app | Database initialized.
2025-11-19 09:47:55,346 | INFO     | app | Initializing Elasticsearch...
2025-11-19 09:47:55,347 | INFO     | app | Elasticsearch ready.
2025-11-19 09:50:56,877 | INFO     | app | Initializing database...
2025-11-19 09:50:57,138 | INFO     | app | Database initialized.
2025-11-19 09:50:57,138 | INFO     | app | Initializing Elasticsearch...
2025-11-19 09:50:57,139 | INFO     | app | Elasticsearch ready.
2025-11-19 09:51:46,041 | INFO     | app | Initializing database...
2025-11-19 09:51:46,370 | INFO     | app | Database initialized.
2025-11-19 09:51:46,371 | INFO     | app | Initializing Elasticsearch...
2025-11-19 09:51:46,372 | INFO     | app | Elasticsearch ready.
2025-11-19 10:00:21,380 | INFO     | app | Initializing database...
2025-11-19 10:00:21,794 | INFO     | app | Database initialized.
2025-11-19 10:00:21,795 | INFO     | app | Initializing Elasticsearch...
2025-11-19 10:00:21,797 | INFO     | app | Elasticsearch ready.
2025-11-19 10:02:15,021 | INFO     | app | Initializing database...
2025-11-19 10:02:15,369 | INFO     | app | Database initialized.
2025-11-19 10:02:15,369 | INFO     | app | Initializing Elasticsearch...
2025-11-19 10:02:15,370 | INFO     | app | Elasticsearch ready.
2025-11-19 10:02:24,232 | INFO     | app | Initializing database...
2025-11-19 10:02:24,536 | INFO     | app | Database initialized.
2025-11-19 10:02:24,536 | INFO     | app | Initializing Elasticsearch...
2025-11-19 10:02:24,537 | INFO     | app | Elasticsearch ready.
2025-11-19 10:02:56,120 | INFO     | app | Initializing database...
2025-11-19 10:02:56,524 | INFO     | app | Database initialized.
2025-11-19 10:02:56,525 | INFO     | app | Initializing Elasticsearch...
2025-11-19 10:02:56,526 | INFO     | app | Elasticsearch ready.
2025-11-19 10:03:51,327 | INFO     | app | Initializing database...
2025-11-19 10:03:51,635 | INFO     | app | Database initialized.
2025-11-19 10:03:51,635 | INFO     | app | Initializing Elasticsearch...
2025-11-19 10:03:51,636 | INFO     | app | Elasticsearch ready.
2025-11-19 10:03:57,869 | INFO     | app | Initializing database...
2025-11-19 10:03:58,131 | INFO     | app | Database initialized.
2025-11-19 10:03:58,132 | INFO     | app | Initializing Elasticsearch...
2025-11-19 10:03:58,132 | INFO     | app | Elasticsearch ready.
2025-11-19 10:04:07,040 | INFO     | app | Initializing database...
2025-11-19 10:04:07,387 | INFO     | app | Database initialized.
2025-11-19 10:04:07,387 | INFO     | app | Initializing Elasticsearch...
2025-11-19 10:04:07,388 | INFO     | app | Elasticsearch ready.
2025-11-19 10:04:31,666 | INFO     | app | Initializing database...
2025-11-19 10:04:31,943 | INFO     | app | Database initialized.
2025-11-19 10:04:31,943 | INFO     | app | Initializing Elasticsearch...
2025-11-19 10:04:31,944 | INFO     | app | Elasticsearch ready.
2025-11-19 10:06:12,257 | INFO     | app | Initializing database...
2025-11-19 10:06:12,542 | INFO     | app | Database initialized.
2025-11-19 10:06:12,543 | INFO     | app | Initializing Elasticsearch...
2025-11-19 10:06:12,543 | INFO     | app | Elasticsearch ready.
2025-11-19 10:06:19,094 | INFO     | app | Initializing database...
2025-11-19 10:06:19,400 | INFO     | app | Database initialized.
2025-11-19 10:06:19,400 | INFO     | app | Initializing Elasticsearch...
2025-11-19 10:06:19,401 | INFO     | app | Elasticsearch ready.
2025-11-19 10:06:36,028 | INFO     | app | Initializing database...
2025-11-19 10:06:36,286 | INFO     | app | Database initialized.
2025-11-19 10:06:36,287 | INFO     | app | Initializing Elasticsearch...
2025-11-19 10:06:36,287 | INFO     | app | Elasticsearch ready.
2025-11-19 10:06:56,466 | INFO     | app | Initializing database...
2025-11-19 10:06:56,727 | INFO     | app | Database initialized.
2025-11-19 10:06:56,728 | INFO     | app | Initializing Elasticsearch...
2025-11-19 10:06:56,728 | INFO     | app | Elasticsearch ready.
2025-11-19 10:07:03,129 | INFO     | app | Initializing database...
2025-11-19 10:07:03,462 | INFO     | app | Database initialized.
2025-11-19 10:07:03,463 | INFO     | app | Initializing Elasticsearch...
2025-11-19 10:07:03,464 | INFO     | app | Elasticsearch ready.
2025-11-19 10:09:17,295 | INFO     | app | Initializing database...
2025-11-19 10:09:17,524 | INFO     | app | Database initialized.
2025-11-19 10:09:17,524 | INFO     | app | Initializing Elasticsearch...
2025-11-19 10:09:17,525 | INFO     | app | Elasticsearch ready.
2025-11-19 10:09:24,004 | INFO     | app | Initializing database...
2025-11-19 10:09:24,200 | INFO     | app | Database initialized.
2025-11-19 10:09:24,200 | INFO     | app | Initializing Elasticsearch...
2025-11-19 10:09:24,201 | INFO     | app | Elasticsearch ready.
2025-11-19 10:09:45,608 | INFO     | app | Initializing database...
2025-11-19 10:09:45,840 | INFO     | app | Database initialized.
2025-11-19 10:09:45,841 | INFO     | app | Initializing Elasticsearch...
2025-11-19 10:09:45,841 | INFO     | app | Elasticsearch ready.
2025-11-19 10:10:49,296 | INFO     | app | Initializing database...
2025-11-19 10:10:49,534 | INFO     | app | Database initialized.
2025-11-19 10:10:49,534 | INFO     | app | Initializing Elasticsearch...
2025-11-19 10:10:49,535 | INFO     | app | Elasticsearch ready.
2025-11-19 10:12:28,122 | INFO     | app | Initializing database...
2025-11-19 10:12:28,352 | INFO     | app | Database initialized.
2025-11-19 10:12:28,352 | INFO     | app | Initializing Elasticsearch...
2025-11-19 10:12:28,353 | INFO     | app | Elasticsearch ready.
2025-11-19 10:15:51,515 | INFO     | app | Initializing database...
2025-11-19 10:15:51,770 | INFO     | app | Database initialized.
2025-11-19 10:15:51,771 | INFO     | app | Initializing Elasticsearch...
2025-11-19 10:15:51,771 | INFO     | app | Elasticsearch ready.
2025-11-19 10:21:36,672 | INFO     | app | Initializing database...
2025-11-19 10:21:36,985 | INFO     | app | Database initialized.
2025-11-19 10:21:36,986 | INFO     | app | Initializing Elasticsearch...
2025-11-19 10:21:36,987 | INFO     | app | Elasticsearch ready.
2025-11-19 10:22:48,121 | INFO     | app | Initializing database...
2025-11-19 10:22:48,384 | INFO     | app | Database initialized.
2025-11-19 10:22:48,385 | INFO     | app | Initializing Elasticsearch...
2025-11-19 10:22:48,386 | INFO     | app | Elasticsearch ready.
2025-11-19 10:28:25,316 | INFO     | app | Initializing database...
2025-11-19 10:28:25,536 | INFO     | app | Database initialized.
2025-11-19 10:28:25,537 | INFO     | app | Initializing Elasticsearch...
2025-11-19 10:28:25,537 | INFO     | app | Elasticsearch ready.
2025-11-19 10:28:34,295 | INFO     | app | Initializing database...
2025-11-19 10:28:34,585 | INFO     | app | Database initialized.
2025-11-19 10:28:34,586 | INFO     | app | Initializing Elasticsearch...
2025-11-19 10:28:34,587 | INFO     | app | Elasticsearch ready.
2025-11-19 10:28:52,257 | INFO     | app | Initializing database...
2025-11-19 10:28:52,614 | INFO     | app | Database initialized.
2025-11-19 10:28:52,614 | INFO     | app | Initializing Elasticsearch...
2025-11-19 10:28:52,615 | INFO     | app | Elasticsearch ready.
2025-11-19 10:29:00,773 | INFO     | app | Initializing database...
2025-11-19 10:29:01,096 | INFO     | app | Database initialized.
2025-11-19 10:29:01,097 | INFO     | app | Initializing Elasticsearch...
2025-11-19 10:29:01,098 | INFO     | app | Elasticsearch ready.
2025-11-19 10:29:12,459 | INFO     | app | Initializing database...
2025-11-19 10:29:12,643 | INFO     | app | Database initialized.
2025-11-19 10:29:12,643 | INFO     | app | Initializing Elasticsearch...
2025-11-19 10:29:12,643 | INFO     | app | Elasticsearch ready.
2025-11-19 10:29:20,008 | INFO     | app | Initializing database...
2025-11-19 10:29:20,279 | INFO     | app | Database initialized.
2025-11-19 10:29:20,279 | INFO     | app | Initializing Elasticsearch...
2025-11-19 10:29:20,280 | INFO     | app | Elasticsearch ready.
2025-11-19 10:31:11,471 | INFO     | app | Initializing database...
2025-11-19 10:31:11,745 | INFO     | app | Database initialized.
2025-11-19 10:31:11,746 | INFO     | app | Initializing Elasticsearch...
2025-11-19 10:31:11,747 | INFO     | app | Elasticsearch ready.
2025-11-19 10:32:43,568 | INFO     | app | Initializing database...
2025-11-19 10:32:43,839 | INFO     | app | Database initialized.
2025-11-19 10:32:43,839 | INFO     | app | Initializing Elasticsearch...
2025-11-19 10:32:43,840 | INFO     | app | Elasticsearch ready.
2025-11-19 10:32:59,167 | INFO     | app | Initializing database...
2025-11-19 10:32:59,420 | INFO     | app | Database initialized.
2025-11-19 10:32:59,421 | INFO     | app | Initializing Elasticsearch...
2025-11-19 10:32:59,421 | INFO     | app | Elasticsearch ready.
2025-11-19 10:34:28,095 | INFO     | app | Initializing database...
2025-11-19 10:34:28,355 | INFO     | app | Database initialized.
2025-11-19 10:34:28,355 | INFO     | app | Initializing Elasticsearch...
2025-11-19 10:34:28,356 | INFO     | app | Elasticsearch ready.
2025-11-19 11:34:30,934 | INFO     | app | Initializing database...
2025-11-19 11:34:31,197 | INFO     | app | Database initialized.
2025-11-19 11:34:31,197 | INFO     | app | Initializing Elasticsearch...
2025-11-19 11:34:31,198 | INFO     | app | Elasticsearch ready.
2025-11-19 11:34:38,037 | INFO     | app | Initializing database...
2025-11-19 11:34:38,532 | INFO     | app | Database initialized.
2025-11-19 11:34:38,532 | INFO     | app | Initializing Elasticsearch...
2025-11-19 11:34:38,533 | INFO     | app | Elasticsearch ready.
2025-11-19 11:37:08,068 | INFO     | app | Initializing database...
2025-11-19 11:37:08,342 | INFO     | app | Database initialized.
2025-11-19 11:37:08,342 | INFO     | app | Initializing Elasticsearch...
2025-11-19 11:37:08,343 | INFO     | app | Elasticsearch ready.
2025-11-19 11:37:14,965 | INFO     | app | Initializing database...
2025-11-19 11:37:15,291 | INFO     | app | Database initialized.
2025-11-19 11:37:15,292 | INFO     | app | Initializing Elasticsearch...
2025-11-19 11:37:15,293 | INFO     | app | Elasticsearch ready.
2025-11-19 11:39:18,082 | INFO     | app | Initializing database...
2025-11-19 11:39:18,448 | INFO     | app | Database initialized.
2025-11-19 11:39:18,448 | INFO     | app | Initializing Elasticsearch...
2025-11-19 11:39:18,449 | INFO     | app | Elasticsearch ready.
2025-11-19 11:53:07,104 | INFO     | app | Initializing database...
2025-11-19 11:53:07,254 | INFO     | app | Database initialized.
2025-11-19 11:53:07,254 | INFO     | app | Initializing Elasticsearch...
2025-11-19 11:53:07,255 | INFO     | app | Elasticsearch ready.
2025-11-19 11:53:13,452 | INFO     | app | Initializing database...
2025-11-19 11:53:13,542 | INFO     | app | Database initialized.
2025-11-19 11:53:13,542 | INFO     | app | Initializing Elasticsearch...
2025-11-19 11:53:13,542 | INFO     | app | Elasticsearch ready.
2025-11-19 11:53:18,617 | INFO     | app | Initializing database...
2025-11-19 11:53:18,807 | INFO     | app | Database initialized.
2025-11-19 11:53:18,807 | INFO     | app | Initializing Elasticsearch...
2025-11-19 11:53:18,808 | INFO     | app | Elasticsearch ready.
2025-11-19 11:53:40,464 | INFO     | app | Initializing database...
2025-11-19 11:53:40,594 | INFO     | app | Database initialized.
2025-11-19 11:53:40,594 | INFO     | app | Initializing Elasticsearch...
2025-11-19 11:53:40,595 | INFO     | app | Elasticsearch ready.
2025-11-19 11:53:48,338 | INFO     | app | Initializing database...
2025-11-19 11:53:48,526 | INFO     | app | Database initialized.
2025-11-19 11:53:48,527 | INFO     | app | Initializing Elasticsearch...
2025-11-19 11:53:48,527 | INFO     | app | Elasticsearch ready.
2025-11-19 11:55:01,850 | INFO     | app | Initializing database...
2025-11-19 11:55:02,096 | INFO     | app | Database initialized.
2025-11-19 11:55:02,096 | INFO     | app | Initializing Elasticsearch...
2025-11-19 11:55:02,097 | INFO     | app | Elasticsearch ready.
2025-11-19 11:59:05,521 | INFO     | app | Initializing database...
2025-11-19 11:59:05,824 | INFO     | app | Database initialized.
2025-11-19 11:59:05,824 | INFO     | app | Initializing Elasticsearch...
2025-11-19 11:59:05,825 | INFO     | app | Elasticsearch ready.
2025-11-19 11:59:29,328 | INFO     | app | Initializing database...
2025-11-19 11:59:29,531 | INFO     | app | Database initialized.
2025-11-19 11:59:29,531 | INFO     | app | Initializing Elasticsearch...
2025-11-19 11:59:29,532 | INFO     | app | Elasticsearch ready.
2025-11-19 11:59:37,335 | INFO     | app | Initializing database...
2025-11-19 11:59:37,515 | INFO     | app | Database initialized.
2025-11-19 11:59:37,515 | INFO     | app | Initializing Elasticsearch...
2025-11-19 11:59:37,516 | INFO     | app | Elasticsearch ready.
2025-11-19 11:59:43,227 | INFO     | app | Initializing database...
2025-11-19 11:59:43,455 | INFO     | app | Database initialized.
2025-11-19 11:59:43,455 | INFO     | app | Initializing Elasticsearch...
2025-11-19 11:59:43,456 | INFO     | app | Elasticsearch ready.
2025-11-19 12:01:17,459 | INFO     | app | Initializing database...
2025-11-19 12:01:17,732 | INFO     | app | Database initialized.
2025-11-19 12:01:17,732 | INFO     | app | Initializing Elasticsearch...
2025-11-19 12:01:17,733 | INFO     | app | Elasticsearch ready.
2025-11-19 12:18:31,442 | INFO     | app | Initializing database...
2025-11-19 12:18:31,666 | INFO     | app | Database initialized.
2025-11-19 12:18:31,667 | INFO     | app | Initializing Elasticsearch...
2025-11-19 12:18:31,667 | INFO     | app | Elasticsearch ready.
2025-11-19 12:26:00,879 | INFO     | app | Initializing database...
2025-11-19 12:26:01,246 | INFO     | app | Database initialized.
2025-11-19 12:26:01,247 | INFO     | app | Initializing Elasticsearch...
2025-11-19 12:26:01,248 | INFO     | app | Elasticsearch ready.
2025-11-19 12:27:41,071 | INFO     | app | Initializing database...
2025-11-19 12:27:41,388 | INFO     | app | Database initialized.
2025-11-19 12:27:41,389 | INFO     | app | Initializing Elasticsearch...
2025-11-19 12:27:41,390 | INFO     | app | Elasticsearch ready.
2025-11-19 12:31:54,615 | INFO     | app | Initializing database...
2025-11-19 12:31:54,891 | INFO     | app | Database initialized.
2025-11-19 12:31:54,891 | INFO     | app | Initializing Elasticsearch...
2025-11-19 12:31:54,892 | INFO     | app | Elasticsearch ready.
2025-11-19 12:32:03,344 | INFO     | app | Initializing database...
2025-11-19 12:32:03,710 | INFO     | app | Database initialized.
2025-11-19 12:32:03,729 | INFO     | app | Initializing Elasticsearch...
2025-11-19 12:32:03,745 | INFO     | app | Elasticsearch ready.
2025-11-19 12:32:12,986 | INFO     | app | Initializing database...
2025-11-19 12:32:13,202 | INFO     | app | Database initialized.
2025-11-19 12:32:13,202 | INFO     | app | Initializing Elasticsearch...
2025-11-19 12:32:13,203 | INFO     | app | Elasticsearch ready.
2025-11-19 12:40:21,344 | INFO     | app | Initializing database...
2025-11-19 12:40:21,634 | INFO     | app | Database initialized.
2025-11-19 12:40:21,634 | INFO     | app | Initializing Elasticsearch...
2025-11-19 12:40:21,635 | INFO     | app | Elasticsearch ready.
2025-11-19 12:45:06,931 | INFO     | app | Initializing database...
2025-11-19 12:45:07,209 | INFO     | app | Database initialized.
2025-11-19 12:45:07,209 | INFO     | app | Initializing Elasticsearch...
2025-11-19 12:45:07,210 | INFO     | app | Elasticsearch ready.
2025-11-19 12:45:13,760 | INFO     | app | Initializing database...
2025-11-19 12:45:14,094 | INFO     | app | Database initialized.
2025-11-19 12:45:14,095 | INFO     | app | Initializing Elasticsearch...
2025-11-19 12:45:14,095 | INFO     | app | Elasticsearch ready.
2025-11-19 12:45:30,346 | INFO     | app | Initializing database...
2025-11-19 12:45:30,677 | INFO     | app | Database initialized.
2025-11-19 12:45:30,684 | INFO     | app | Initializing Elasticsearch...
2025-11-19 12:45:30,695 | INFO     | app | Elasticsearch ready.
2025-11-19 12:45:44,345 | INFO     | app | Initializing database...
2025-11-19 12:45:44,691 | INFO     | app | Database initialized.
2025-11-19 12:45:44,691 | INFO     | app | Initializing Elasticsearch...
2025-11-19 12:45:44,692 | INFO     | app | Elasticsearch ready.
2025-11-19 12:45:57,066 | INFO     | app | Initializing database...
2025-11-19 12:45:57,471 | INFO     | app | Database initialized.
2025-11-19 12:45:57,472 | INFO     | app | Initializing Elasticsearch...
2025-11-19 12:45:57,473 | INFO     | app | Elasticsearch ready.
2025-11-19 12:50:43,750 | INFO     | app | Initializing database...
2025-11-19 12:50:44,020 | INFO     | app | Database initialized.
2025-11-19 12:50:44,020 | INFO     | app | Initializing Elasticsearch...
2025-11-19 12:50:44,021 | INFO     | app | Elasticsearch ready.
2025-11-19 12:50:51,763 | INFO     | app | Initializing database...
2025-11-19 12:50:52,121 | INFO     | app | Database initialized.
2025-11-19 12:50:52,121 | INFO     | app | Initializing Elasticsearch...
2025-11-19 12:50:52,122 | INFO     | app | Elasticsearch ready.
2025-11-19 12:50:58,837 | INFO     | app | Initializing database...
2025-11-19 12:50:59,092 | INFO     | app | Database initialized.
2025-11-19 12:50:59,092 | INFO     | app | Initializing Elasticsearch...
2025-11-19 12:50:59,093 | INFO     | app | Elasticsearch ready.
2025-11-19 12:52:55,563 | INFO     | app | Initializing database...
2025-11-19 12:52:55,955 | INFO     | app | Database initialized.
2025-11-19 12:52:55,955 | INFO     | app | Initializing Elasticsearch...
2025-11-19 12:52:55,957 | INFO     | app | Elasticsearch ready.
2025-11-19 12:53:06,922 | INFO     | app | Initializing database...
2025-11-19 12:53:07,178 | INFO     | app | Database initialized.
2025-11-19 12:53:07,178 | INFO     | app | Initializing Elasticsearch...
2025-11-19 12:53:07,179 | INFO     | app | Elasticsearch ready.
2025-11-19 12:53:51,439 | INFO     | app | Initializing database...
2025-11-19 12:53:51,845 | INFO     | app | Database initialized.
2025-11-19 12:53:51,846 | INFO     | app | Initializing Elasticsearch...
2025-11-19 12:53:51,847 | INFO     | app | Elasticsearch ready.
2025-11-19 12:56:50,104 | INFO     | app | Initializing database...
2025-11-19 12:56:50,457 | INFO     | app | Database initialized.
2025-11-19 12:56:50,457 | INFO     | app | Initializing Elasticsearch...
2025-11-19 12:56:50,458 | INFO     | app | Elasticsearch ready.
2025-11-19 12:57:03,591 | INFO     | app | Initializing database...
2025-11-19 12:57:03,876 | INFO     | app | Database initialized.
2025-11-19 12:57:03,877 | INFO     | app | Initializing Elasticsearch...
2025-11-19 12:57:03,877 | INFO     | app | Elasticsearch ready.
2025-11-19 12:58:47,514 | INFO     | app | Initializing database...
2025-11-19 12:58:47,802 | INFO     | app | Database initialized.
2025-11-19 12:58:47,803 | INFO     | app | Initializing Elasticsearch...
2025-11-19 12:58:47,803 | INFO     | app | Elasticsearch ready.
2025-11-19 12:58:59,263 | INFO     | app | Initializing database...
2025-11-19 12:58:59,535 | INFO     | app | Database initialized.
2025-11-19 12:58:59,535 | INFO     | app | Initializing Elasticsearch...
2025-11-19 12:58:59,535 | INFO     | app | Elasticsearch ready.
2025-11-19 12:59:05,872 | INFO     | app | Initializing database...
2025-11-19 12:59:06,177 | INFO     | app | Database initialized.
2025-11-19 12:59:06,177 | INFO     | app | Initializing Elasticsearch...
2025-11-19 12:59:06,178 | INFO     | app | Elasticsearch ready.
2025-11-19 12:59:17,845 | INFO     | app | Initializing database...
2025-11-19 12:59:18,145 | INFO     | app | Database initialized.
2025-11-19 12:59:18,146 | INFO     | app | Initializing Elasticsearch...
2025-11-19 12:59:18,147 | INFO     | app | Elasticsearch ready.
2025-11-19 13:00:58,442 | INFO     | app | Initializing database...
2025-11-19 13:00:58,867 | INFO     | app | Database initialized.
2025-11-19 13:00:58,868 | INFO     | app | Initializing Elasticsearch...
2025-11-19 13:00:58,869 | INFO     | app | Elasticsearch ready.
2025-11-19 13:01:24,040 | INFO     | app | Initializing database...
2025-11-19 13:01:24,304 | INFO     | app | Database initialized.
2025-11-19 13:01:24,304 | INFO     | app | Initializing Elasticsearch...
2025-11-19 13:01:24,305 | INFO     | app | Elasticsearch ready.
2025-11-19 13:05:43,687 | INFO     | app | Initializing database...
2025-11-19 13:05:43,907 | INFO     | app | Database initialized.
2025-11-19 13:05:43,908 | INFO     | app | Initializing Elasticsearch...
2025-11-19 13:05:43,908 | INFO     | app | Elasticsearch ready.
2025-11-19 13:05:50,325 | INFO     | app | Initializing database...
2025-11-19 13:05:50,647 | INFO     | app | Database initialized.
2025-11-19 13:05:50,647 | INFO     | app | Initializing Elasticsearch...
2025-11-19 13:05:50,648 | INFO     | app | Elasticsearch ready.
2025-11-19 13:08:28,800 | INFO     | app | Initializing database...
2025-11-19 13:08:29,213 | INFO     | app | Database initialized.
2025-11-19 13:08:29,214 | INFO     | app | Initializing Elasticsearch...
2025-11-19 13:08:29,215 | INFO     | app | Elasticsearch ready.
2025-11-19 13:12:11,168 | INFO     | app | Initializing database...
2025-11-19 13:12:36,601 | INFO     | app | Initializing database...
2025-11-19 13:12:44,701 | INFO     | app | Initializing database...
2025-11-19 13:13:05,945 | INFO     | app | Initializing database...
2025-11-19 13:17:17,332 | INFO     | app | Initializing database...
2025-11-19 13:17:19,428 | INFO     | app | Database initialized.
2025-11-19 13:17:19,428 | INFO     | app | Initializing Elasticsearch...
2025-11-19 13:17:19,430 | INFO     | app | Elasticsearch ready.
2025-11-19 13:19:40,676 | INFO     | app | Initializing database...
2025-11-19 13:19:41,057 | INFO     | app | Database initialized.
2025-11-19 13:19:41,059 | INFO     | app | Initializing Elasticsearch...
2025-11-19 13:19:41,060 | INFO     | app | Elasticsearch ready.
2025-11-19 13:23:44,243 | INFO     | app | Initializing database...
2025-11-19 13:23:44,672 | INFO     | app | Database initialized.
2025-11-19 13:23:44,674 | INFO     | app | Initializing Elasticsearch...
2025-11-19 13:23:44,676 | INFO     | app | Elasticsearch ready.
2025-11-19 13:28:53,986 | INFO     | app | Initializing database...
2025-11-19 13:28:54,388 | INFO     | app | Database initialized.
2025-11-19 13:28:54,389 | INFO     | app | Initializing Elasticsearch...
2025-11-19 13:28:54,391 | INFO     | app | Elasticsearch ready.
>>>>>>> 09fdca32182c059e56fbfc1c4f4cd9812da41b25
2025-11-19 18:29:56,147 | INFO     | app | Initializing database...
2025-11-19 18:29:57,391 | INFO     | app | Database initialized.
2025-11-19 18:29:57,391 | INFO     | app | Initializing Elasticsearch...
2025-11-19 18:29:57,393 | INFO     | app | Elasticsearch ready.
2025-11-19 18:29:57,408 | INFO     | app | BookingExpiryService started
2025-11-19 18:36:08,994 | INFO     | app | Initializing database...
2025-11-19 18:36:09,156 | INFO     | app | Database initialized.
2025-11-19 18:36:09,157 | INFO     | app | Initializing Elasticsearch...
2025-11-19 18:36:09,157 | INFO     | app | Elasticsearch ready.
2025-11-19 18:36:09,178 | INFO     | app | BookingExpiryService started
2025-11-19 22:43:51,872 | INFO     | app | Initializing database...
2025-11-19 22:46:57,864 | INFO     | app | Initializing database...
2025-11-19 22:46:59,405 | INFO     | app | Database initialized.
2025-11-19 22:46:59,406 | INFO     | app | Initializing Elasticsearch...
2025-11-19 22:46:59,409 | INFO     | app | Elasticsearch ready.
2025-11-19 22:46:59,415 | INFO     | app | BookingExpiryService started
2025-11-19 22:46:59,433 | INFO     | app | Notification worker started.
2025-11-20 04:01:14,878 | INFO     | app | Initializing database...
2025-11-20 04:07:36,385 | INFO     | app | Initializing database...
2025-11-20 04:07:37,544 | INFO     | app | Database initialized.
2025-11-20 04:07:37,545 | INFO     | app | Initializing Elasticsearch...
2025-11-20 04:07:37,548 | INFO     | app | Elasticsearch ready.
2025-11-20 04:07:37,564 | INFO     | app | BookingExpiryService started
2025-11-20 04:07:37,616 | INFO     | app | Notification worker started.
2025-11-20 04:12:36,981 | INFO     | app | Initializing database...
2025-11-20 04:12:37,341 | INFO     | app | Database initialized.
2025-11-20 04:12:37,341 | INFO     | app | Initializing Elasticsearch...
2025-11-20 04:12:37,342 | INFO     | app | Elasticsearch ready.
2025-11-20 04:12:37,349 | INFO     | app | BookingExpiryService started
2025-11-20 04:12:37,377 | INFO     | app | Notification worker started.
2025-11-20 04:13:45,754 | INFO     | app | Initializing database...
2025-11-20 04:13:46,252 | INFO     | app | Database initialized.
2025-11-20 04:13:46,254 | INFO     | app | Initializing Elasticsearch...
2025-11-20 04:13:46,255 | INFO     | app | Elasticsearch ready.
2025-11-20 04:13:46,260 | INFO     | app | BookingExpiryService started
2025-11-20 04:13:46,286 | INFO     | app | Notification worker started.
2025-11-20 04:14:22,471 | INFO     | app | Initializing database...
2025-11-20 04:14:22,736 | INFO     | app | Database initialized.
2025-11-20 04:14:22,736 | INFO     | app | Initializing Elasticsearch...
2025-11-20 04:14:22,737 | INFO     | app | Elasticsearch ready.
2025-11-20 04:14:22,757 | INFO     | app | BookingExpiryService started
2025-11-20 04:14:22,807 | INFO     | app | Notification worker started.
2025-11-20 04:15:24,886 | INFO     | app | Initializing database...
2025-11-20 04:15:25,153 | INFO     | app | Database initialized.
2025-11-20 04:15:25,153 | INFO     | app | Initializing Elasticsearch...
2025-11-20 04:15:25,153 | INFO     | app | Elasticsearch ready.
2025-11-20 04:15:25,162 | INFO     | app | BookingExpiryService started
2025-11-20 04:15:25,200 | INFO     | app | Notification worker started.
2025-11-20 04:21:29,927 | INFO     | app | Initializing database...
2025-11-20 04:21:30,373 | INFO     | app | Database initialized.
2025-11-20 04:21:30,373 | INFO     | app | Initializing Elasticsearch...
2025-11-20 04:21:30,374 | INFO     | app | Elasticsearch ready.
2025-11-20 04:21:30,384 | INFO     | app | BookingExpiryService started
2025-11-20 04:21:30,440 | INFO     | app | Notification worker started.
2025-11-20 04:28:58,565 | INFO     | app | Initializing database...
2025-11-20 04:28:58,994 | INFO     | app | Database initialized.
2025-11-20 04:28:58,994 | INFO     | app | Initializing Elasticsearch...
2025-11-20 04:28:58,995 | INFO     | app | Elasticsearch ready.
2025-11-20 04:28:59,012 | INFO     | app | BookingExpiryService started
2025-11-20 04:28:59,048 | INFO     | app | Notification worker started.
2025-11-20 04:29:28,326 | INFO     | app | Initializing database...
2025-11-20 04:29:28,625 | INFO     | app | Database initialized.
2025-11-20 04:29:28,625 | INFO     | app | Initializing Elasticsearch...
2025-11-20 04:29:28,626 | INFO     | app | Elasticsearch ready.
2025-11-20 04:29:28,632 | INFO     | app | BookingExpiryService started
2025-11-20 04:29:28,667 | INFO     | app | Notification worker started.
2025-11-20 04:35:47,208 | INFO     | app | Initializing database...
2025-11-20 04:35:47,627 | INFO     | app | Database initialized.
2025-11-20 04:35:47,627 | INFO     | app | Initializing Elasticsearch...
2025-11-20 04:35:47,628 | INFO     | app | Elasticsearch ready.
2025-11-20 04:35:47,640 | INFO     | app | BookingExpiryService started
2025-11-20 04:35:47,677 | INFO     | app | Notification worker started.
2025-11-20 04:36:07,430 | INFO     | app | Initializing database...
2025-11-20 04:36:07,773 | INFO     | app | Database initialized.
2025-11-20 04:36:07,774 | INFO     | app | Initializing Elasticsearch...
2025-11-20 04:36:07,774 | INFO     | app | Elasticsearch ready.
2025-11-20 04:36:07,784 | INFO     | app | BookingExpiryService started
2025-11-20 04:36:07,836 | INFO     | app | Notification worker started.
2025-11-20 04:36:49,175 | ERROR    | app.repositories.hostel_repository | Integrity error during upsert: (psycopg2.errors.ForeignKeyViolation) insert or update on table "hostels" violates foreign key constraint "hostels_location_id_fkey"
DETAIL:  Key (location_id)=(1) is not present in table "locations".

[SQL: INSERT INTO hostels (hostel_name, name, full_address, address, city, pincode, description, hostel_type, gender_type, amenities, rules, contact_email, contact_phone, check_in, check_out, total_beds, current_occupancy, monthly_revenue, location_id, visibility, is_featured, capacity) VALUES (%(hostel_name)s, %(name)s, %(full_address)s, %(address)s, %(city)s, %(pincode)s, %(description)s, %(hostel_type)s, %(gender_type)s, %(amenities)s, %(rules)s, %(contact_email)s, %(contact_phone)s, %(check_in)s, %(check_out)s, %(total_beds)s, %(current_occupancy)s, %(monthly_revenue)s, %(location_id)s, %(visibility)s, %(is_featured)s, %(capacity)s) RETURNING hostels.id, hostels.created_at]
[parameters: {'hostel_name': 'Green Valley Boys Hostel', 'name': None, 'full_address': '12-45/3, Near Hyderabad Central Mall, Ameerpet, Hyderabad, Telangana, 500016', 'address': None, 'city': None, 'pincode': None, 'description': 'A well-maintained hostel offering spacious rooms, 24/7 security, and high-speed WiFi.', 'hostel_type': 'boys', 'gender_type': None, 'amenities': 'WiFi, Laundry, 24/7 Security, Hot Water, Power Backup, CCTV', 'rules': 'No loud music after 10 PM; ID proof required; Visitors restricted to lobby area', 'contact_email': 'contact@greenvalleyhostel.com', 'contact_phone': '+91-9876543210', 'check_in': datetime.time(8, 0), 'check_out': datetime.time(9, 0), 'total_beds': 120, 'current_occupancy': 95, 'monthly_revenue': 320000.0, 'location_id': 1, 'visibility': <Visibility.public: 'public'>, 'is_featured': True, 'capacity': 0}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-11-20 04:38:05,715 | INFO     | app | Initializing database...
2025-11-20 04:38:06,080 | INFO     | app | Database initialized.
2025-11-20 04:38:06,080 | INFO     | app | Initializing Elasticsearch...
2025-11-20 04:38:06,081 | INFO     | app | Elasticsearch ready.
2025-11-20 04:38:06,136 | INFO     | app | BookingExpiryService started
2025-11-20 04:38:06,176 | INFO     | app | Notification worker started.
2025-11-20 04:38:15,366 | INFO     | app | Initializing database...
2025-11-20 04:38:15,578 | INFO     | app | Database initialized.
2025-11-20 04:38:15,578 | INFO     | app | Initializing Elasticsearch...
2025-11-20 04:38:15,579 | INFO     | app | Elasticsearch ready.
2025-11-20 04:38:15,595 | INFO     | app | BookingExpiryService started
2025-11-20 04:38:15,608 | INFO     | app | Notification worker started.
2025-11-20 04:38:21,027 | ERROR    | app.repositories.hostel_repository | Integrity error during upsert: insert or update on table "hostels" violates foreign key constraint "hostels_location_id_fkey"
DETAIL:  Key (location_id)=(1) is not present in table "locations".

2025-11-20 04:38:22,261 | ERROR    | app.repositories.hostel_repository | Integrity error during upsert: insert or update on table "hostels" violates foreign key constraint "hostels_location_id_fkey"
DETAIL:  Key (location_id)=(1) is not present in table "locations".

2025-11-20 04:40:17,332 | INFO     | app | Initializing database...
2025-11-20 04:40:17,651 | INFO     | app | Database initialized.
2025-11-20 04:40:17,652 | INFO     | app | Initializing Elasticsearch...
2025-11-20 04:40:17,653 | INFO     | app | Elasticsearch ready.
2025-11-20 04:40:17,665 | INFO     | app | BookingExpiryService started
2025-11-20 04:40:17,717 | INFO     | app | Notification worker started.
2025-11-20 04:40:31,828 | INFO     | app | Initializing database...
2025-11-20 04:40:32,086 | INFO     | app | Database initialized.
2025-11-20 04:40:32,086 | INFO     | app | Initializing Elasticsearch...
2025-11-20 04:40:32,087 | INFO     | app | Elasticsearch ready.
2025-11-20 04:40:32,106 | INFO     | app | BookingExpiryService started
2025-11-20 04:40:32,138 | INFO     | app | Notification worker started.
2025-11-20 04:40:32,760 | ERROR    | app.repositories.hostel_repository | Integrity error during upsert: insert or update on table "hostels" violates foreign key constraint "hostels_location_id_fkey"
DETAIL:  Key (location_id)=(1) is not present in table "locations".

2025-11-20 04:40:50,986 | ERROR    | app.repositories.hostel_repository | Integrity error during upsert: insert or update on table "hostels" violates foreign key constraint "hostels_location_id_fkey"
DETAIL:  Key (location_id)=(0) is not present in table "locations".

2025-11-20 04:41:11,995 | INFO     | app | Initializing database...
2025-11-20 04:41:12,246 | INFO     | app | Database initialized.
2025-11-20 04:41:12,246 | INFO     | app | Initializing Elasticsearch...
2025-11-20 04:41:12,247 | INFO     | app | Elasticsearch ready.
2025-11-20 04:41:12,256 | INFO     | app | BookingExpiryService started
2025-11-20 04:41:12,294 | INFO     | app | Notification worker started.
2025-11-20 04:41:42,353 | ERROR    | app.repositories.hostel_repository | Integrity error during upsert: insert or update on table "hostels" violates foreign key constraint "hostels_location_id_fkey"
DETAIL:  Key (location_id)=(0) is not present in table "locations".

2025-11-20 04:44:08,382 | ERROR    | app.repositories.hostel_repository | Integrity error during upsert: insert or update on table "hostels" violates foreign key constraint "hostels_location_id_fkey"
DETAIL:  Key (location_id)=(3) is not present in table "locations".

2025-11-20 04:46:19,389 | ERROR    | app.repositories.hostel_repository | Integrity error during upsert: insert or update on table "hostels" violates foreign key constraint "hostels_location_id_fkey"
DETAIL:  Key (location_id)=(0) is not present in table "locations".

2025-11-20 04:58:34,804 | WARNING  | app.services.email_service | Email service not configured. Email not sent.
2025-11-20 04:58:34,806 | INFO     | app.services.email_service | Email configuration (masked): host=sm**********om port=**** user=None from=None use_tls=True use_ssl=False
2025-11-20 04:58:34,806 | INFO     | app.services.email_service | Would send email to manikantanedunuri88@gmail.com: Reset Your Password
2025-11-20 04:58:34,807 | INFO     | app.services.password_reset_service | Password reset link for manikantanedunuri88@gmail.com: http://localhost:3000/reset-password?token=aqc8J0ug2AWby17lMNbM36ayrXFYd73aXZZd8URZPp0
2025-11-20 05:02:25,043 | WARNING  | app.services.email_service | Email service not configured. Email not sent.
2025-11-20 05:02:25,044 | INFO     | app.services.email_service | Email configuration (masked): host=sm**********om port=**** user=None from=None use_tls=True use_ssl=False
2025-11-20 05:02:25,045 | INFO     | app.services.email_service | Would send email to manikantanedunuri88@gmail.com: Reset Your Password
2025-11-20 05:02:25,045 | INFO     | app.services.password_reset_service | Password reset link for manikantanedunuri88@gmail.com: http://localhost:3000/reset-password?token=c7pdDqV0UVBmhQ7MuFOzb8IVsuNdvHp7YDdLCrJUOpo
2025-11-20 05:03:14,467 | INFO     | app | Initializing database...
2025-11-20 05:03:15,636 | INFO     | app | Database initialized.
2025-11-20 05:03:15,638 | INFO     | app | Initializing Elasticsearch...
2025-11-20 05:03:15,642 | INFO     | app | Elasticsearch ready.
2025-11-20 05:03:15,683 | INFO     | app | BookingExpiryService started
2025-11-20 05:03:15,698 | INFO     | app | Notification worker started.
2025-11-20 05:03:55,009 | INFO     | app.services.email_service | Email sent successfully to manikantanedunuri88@gmail.com
2025-11-20 05:06:36,988 | INFO     | app | Initializing database...
2025-11-20 05:06:37,197 | INFO     | app | Database initialized.
2025-11-20 05:06:37,198 | INFO     | app | Initializing Elasticsearch...
2025-11-20 05:06:37,199 | INFO     | app | Elasticsearch ready.
2025-11-20 05:06:37,214 | INFO     | app | BookingExpiryService started
2025-11-20 05:06:37,245 | INFO     | app | Notification worker started.
2025-11-20 05:06:44,396 | INFO     | app | Initializing database...
2025-11-20 05:06:44,597 | INFO     | app | Database initialized.
2025-11-20 05:06:44,597 | INFO     | app | Initializing Elasticsearch...
2025-11-20 05:06:44,598 | INFO     | app | Elasticsearch ready.
2025-11-20 05:06:44,600 | INFO     | app | BookingExpiryService started
2025-11-20 05:06:44,633 | INFO     | app | Notification worker started.
2025-11-20 05:06:57,744 | INFO     | app | Initializing database...
2025-11-20 05:06:58,035 | INFO     | app | Database initialized.
2025-11-20 05:06:58,035 | INFO     | app | Initializing Elasticsearch...
2025-11-20 05:06:58,036 | INFO     | app | Elasticsearch ready.
2025-11-20 05:06:58,057 | INFO     | app | BookingExpiryService started
2025-11-20 05:06:58,108 | INFO     | app | Notification worker started.
2025-11-20 05:07:24,944 | INFO     | app.services.email_service | Email sent successfully to manikantanedunuri88@gmail.com
2025-11-20 05:11:43,362 | INFO     | app | Initializing database...
2025-11-20 05:11:43,893 | INFO     | app | Database initialized.
2025-11-20 05:11:43,894 | INFO     | app | Initializing Elasticsearch...
2025-11-20 05:11:43,894 | INFO     | app | Elasticsearch ready.
2025-11-20 05:11:43,906 | INFO     | app | BookingExpiryService started
2025-11-20 05:11:43,914 | INFO     | app | Notification worker started.
2025-11-20 05:11:50,136 | INFO     | app | Initializing database...
2025-11-20 05:11:50,427 | INFO     | app | Database initialized.
2025-11-20 05:11:50,428 | INFO     | app | Initializing Elasticsearch...
2025-11-20 05:11:50,429 | INFO     | app | Elasticsearch ready.
2025-11-20 05:11:50,447 | INFO     | app | BookingExpiryService started
2025-11-20 05:11:50,470 | INFO     | app | Notification worker started.
2025-11-20 05:13:00,043 | INFO     | app.services.email_service | Email sent successfully to manikantanedunuri88@gmail.com
2025-11-20 05:16:47,133 | INFO     | app | Initializing database...
2025-11-20 05:16:47,481 | INFO     | app | Database initialized.
2025-11-20 05:16:47,481 | INFO     | app | Initializing Elasticsearch...
2025-11-20 05:16:47,482 | INFO     | app | Elasticsearch ready.
2025-11-20 05:16:47,493 | INFO     | app | BookingExpiryService started
2025-11-20 05:16:47,510 | INFO     | app | Notification worker started.
2025-11-20 05:18:08,448 | INFO     | app.services.email_service | Email sent successfully to manikantanedunuri88@gmail.com
2025-11-20 05:20:10,758 | INFO     | app | Initializing database...
2025-11-20 05:20:11,115 | INFO     | app | Database initialized.
2025-11-20 05:20:11,116 | INFO     | app | Initializing Elasticsearch...
2025-11-20 05:20:11,117 | INFO     | app | Elasticsearch ready.
2025-11-20 05:20:11,127 | INFO     | app | BookingExpiryService started
2025-11-20 05:20:11,152 | INFO     | app | Notification worker started.
2025-11-20 05:20:25,150 | INFO     | app.services.email_service | Email sent successfully to manikantanedunuri88@gmail.com
2025-11-20 05:23:15,092 | INFO     | app | Initializing database...
2025-11-20 05:23:15,349 | INFO     | app | Database initialized.
2025-11-20 05:23:15,349 | INFO     | app | Initializing Elasticsearch...
2025-11-20 05:23:15,350 | INFO     | app | Elasticsearch ready.
2025-11-20 05:23:15,360 | INFO     | app | BookingExpiryService started
2025-11-20 05:23:15,384 | INFO     | app | Notification worker started.
2025-11-20 05:23:27,599 | INFO     | app.services.email_service | Email sent successfully to manikantanedunuri88@gmail.com
2025-11-20 05:29:21,935 | INFO     | app | Initializing database...
2025-11-20 05:29:22,336 | INFO     | app | Database initialized.
2025-11-20 05:29:22,337 | INFO     | app | Initializing Elasticsearch...
2025-11-20 05:29:22,338 | INFO     | app | Elasticsearch ready.
2025-11-20 05:29:22,354 | INFO     | app | BookingExpiryService started
2025-11-20 05:29:22,391 | INFO     | app | Notification worker started.
2025-11-20 05:29:31,270 | INFO     | app | Initializing database...
2025-11-20 05:29:31,716 | INFO     | app | Database initialized.
2025-11-20 05:29:31,716 | INFO     | app | Initializing Elasticsearch...
2025-11-20 05:29:31,717 | INFO     | app | Elasticsearch ready.
2025-11-20 05:29:31,727 | INFO     | app | BookingExpiryService started
2025-11-20 05:29:31,752 | INFO     | app | Notification worker started.
2025-11-20 05:29:45,045 | INFO     | app.services.email_service | Email sent successfully to manikantanedunuri88@gmail.com
2025-11-20 06:00:45,016 | INFO     | app | Initializing database...
2025-11-20 06:00:45,419 | INFO     | app | Database initialized.
2025-11-20 06:00:45,420 | INFO     | app | Initializing Elasticsearch...
2025-11-20 06:00:45,420 | INFO     | app | Elasticsearch ready.
2025-11-20 06:00:45,438 | INFO     | app | BookingExpiryService started
2025-11-20 06:00:45,471 | INFO     | app | Notification worker started.
2025-11-20 06:01:12,870 | INFO     | app.services.email_service | Email sent successfully to manikantanedunuri88@gmail.com
2025-11-20 06:03:18,404 | INFO     | app | Initializing database...
2025-11-20 06:03:18,783 | INFO     | app | Database initialized.
2025-11-20 06:03:18,783 | INFO     | app | Initializing Elasticsearch...
2025-11-20 06:03:18,784 | INFO     | app | Elasticsearch ready.
2025-11-20 06:03:18,793 | INFO     | app | BookingExpiryService started
2025-11-20 06:03:18,826 | INFO     | app | Notification worker started.
2025-11-20 06:03:34,062 | INFO     | app | Initializing database...
2025-11-20 06:03:34,404 | INFO     | app | Database initialized.
2025-11-20 06:03:34,405 | INFO     | app | Initializing Elasticsearch...
2025-11-20 06:03:34,406 | INFO     | app | Elasticsearch ready.
2025-11-20 06:03:34,423 | INFO     | app | BookingExpiryService started
2025-11-20 06:03:34,455 | INFO     | app | Notification worker started.
2025-11-20 06:03:38,471 | INFO     | app.services.email_service | Email sent successfully to manikantanedunuri88@gmail.com
2025-11-20 06:03:44,656 | INFO     | app.services.email_service | Email sent successfully to manikantanedunuri88@gmail.com
2025-11-20 06:11:57,788 | INFO     | app | Initializing database...
2025-11-20 06:11:58,166 | INFO     | app | Database initialized.
2025-11-20 06:11:58,166 | INFO     | app | Initializing Elasticsearch...
2025-11-20 06:11:58,167 | INFO     | app | Elasticsearch ready.
2025-11-20 06:11:58,184 | INFO     | app | BookingExpiryService started
2025-11-20 06:11:58,232 | INFO     | app | Notification worker started.
2025-11-20 06:12:13,511 | INFO     | app | Initializing database...
2025-11-20 06:12:13,863 | INFO     | app | Database initialized.
2025-11-20 06:12:13,864 | INFO     | app | Initializing Elasticsearch...
2025-11-20 06:12:13,865 | INFO     | app | Elasticsearch ready.
2025-11-20 06:12:13,873 | INFO     | app | BookingExpiryService started
2025-11-20 06:12:13,905 | INFO     | app | Notification worker started.
2025-11-20 06:12:18,033 | INFO     | app.services.email_service | Email sent successfully to manikantanedunuri88@gmail.com
2025-11-20 06:14:06,444 | INFO     | app | Initializing database...
2025-11-20 06:14:06,864 | INFO     | app | Database initialized.
2025-11-20 06:14:06,866 | INFO     | app | Initializing Elasticsearch...
2025-11-20 06:14:06,869 | INFO     | app | Elasticsearch ready.
2025-11-20 06:14:06,879 | INFO     | app | BookingExpiryService started
2025-11-20 06:14:06,925 | INFO     | app | Notification worker started.
2025-11-20 06:14:15,389 | INFO     | app | Initializing database...
2025-11-20 06:14:15,723 | INFO     | app | Database initialized.
2025-11-20 06:14:15,723 | INFO     | app | Initializing Elasticsearch...
2025-11-20 06:14:15,724 | INFO     | app | Elasticsearch ready.
2025-11-20 06:14:15,741 | INFO     | app | BookingExpiryService started
2025-11-20 06:14:15,773 | INFO     | app | Notification worker started.
2025-11-20 06:14:39,110 | INFO     | app.services.email_service | Email sent successfully to manikantanedunuri88@gmail.com
2025-11-20 06:14:55,322 | INFO     | app | Initializing database...
2025-11-20 06:14:55,772 | INFO     | app | Database initialized.
2025-11-20 06:14:55,773 | INFO     | app | Initializing Elasticsearch...
2025-11-20 06:14:55,773 | INFO     | app | Elasticsearch ready.
2025-11-20 06:14:55,791 | INFO     | app | BookingExpiryService started
2025-11-20 06:14:55,821 | INFO     | app | Notification worker started.
2025-11-20 06:16:51,720 | INFO     | app | Initializing database...
2025-11-20 06:16:52,016 | INFO     | app | Database initialized.
2025-11-20 06:16:52,016 | INFO     | app | Initializing Elasticsearch...
2025-11-20 06:16:52,017 | INFO     | app | Elasticsearch ready.
2025-11-20 06:16:52,021 | INFO     | app | BookingExpiryService started
2025-11-20 06:16:52,044 | INFO     | app | Notification worker started.
2025-11-20 06:17:03,629 | INFO     | app.services.email_service | Email sent successfully to manikantanedunuri88@gmail.com
2025-11-20 06:20:05,711 | INFO     | app | Initializing database...
2025-11-20 06:20:06,075 | INFO     | app | Database initialized.
2025-11-20 06:20:06,076 | INFO     | app | Initializing Elasticsearch...
2025-11-20 06:20:06,077 | INFO     | app | Elasticsearch ready.
2025-11-20 06:20:06,088 | INFO     | app | BookingExpiryService started
2025-11-20 06:20:06,120 | INFO     | app | Notification worker started.
2025-11-20 06:20:56,160 | INFO     | app | Initializing database...
2025-11-20 06:20:56,458 | INFO     | app | Database initialized.
2025-11-20 06:20:56,459 | INFO     | app | Initializing Elasticsearch...
2025-11-20 06:20:56,459 | INFO     | app | Elasticsearch ready.
2025-11-20 06:20:56,462 | INFO     | app | BookingExpiryService started
2025-11-20 06:20:56,496 | INFO     | app | Notification worker started.
2025-11-20 06:22:25,130 | INFO     | app | Initializing database...
2025-11-20 06:22:25,348 | INFO     | app | Database initialized.
2025-11-20 06:22:25,349 | INFO     | app | Initializing Elasticsearch...
2025-11-20 06:22:25,349 | INFO     | app | Elasticsearch ready.
2025-11-20 06:22:25,363 | INFO     | app | BookingExpiryService started
2025-11-20 06:22:25,390 | INFO     | app | Notification worker started.
2025-11-20 06:23:38,009 | INFO     | app.services.email_service | Email sent successfully to nedunurimanikanta03@gmail.com
2025-11-20 06:23:38,023 | INFO     | app.services.password_reset_service | Password reset link for nedunurimanikanta03@gmail.com: http://localhost:3000/reset-password?token=iIm_QLaGNXcLKZFV9qWNUgXk75gevmy0JCPheff7suQ
2025-11-20 06:23:38,024 | INFO     | app.services.password_reset_service | Hello manikantanedunuri, We received a request to reset your password. Your password reset code is: ➡ 310860 Please enter this code on the password reset page: http://localhost:3000/reset-password?token=iIm_QLaGNXcLKZFV9qWNUgXk75gevmy0JCPheff7suQ Note: This code is valid for 15 minutes. If you did not request a password reset, you can safely ignore this email. With regards, Support Team
2025-11-20 06:23:38,029 | INFO     | app.services.password_reset_service | Password reset link for nedunurimanikanta03@gmail.com: http://localhost:3000/reset-password?token=iIm_QLaGNXcLKZFV9qWNUgXk75gevmy0JCPheff7suQ
2025-11-20 06:40:58,074 | INFO     | app | Initializing database...
2025-11-20 06:40:58,376 | INFO     | app | Database initialized.
2025-11-20 06:40:58,376 | INFO     | app | Initializing Elasticsearch...
2025-11-20 06:40:58,377 | INFO     | app | Elasticsearch ready.
2025-11-20 06:40:58,386 | INFO     | app | BookingExpiryService started
2025-11-20 06:40:58,408 | INFO     | app | Notification worker started.
2025-11-20 06:44:21,871 | INFO     | app | Initializing database...
2025-11-20 06:44:22,176 | INFO     | app | Database initialized.
2025-11-20 06:44:22,176 | INFO     | app | Initializing Elasticsearch...
2025-11-20 06:44:22,177 | INFO     | app | Elasticsearch ready.
2025-11-20 06:44:22,188 | INFO     | app | BookingExpiryService started
2025-11-20 06:44:22,230 | INFO     | app | Notification worker started.
2025-11-20 06:44:38,683 | INFO     | app | Initializing database...
2025-11-20 06:44:38,884 | INFO     | app | Database initialized.
2025-11-20 06:44:38,885 | INFO     | app | Initializing Elasticsearch...
2025-11-20 06:44:38,886 | INFO     | app | Elasticsearch ready.
2025-11-20 06:44:38,904 | INFO     | app | BookingExpiryService started
2025-11-20 06:44:38,954 | INFO     | app | Notification worker started.
2025-11-20 06:47:22,207 | INFO     | app | Initializing database...
2025-11-20 06:47:22,514 | INFO     | app | Database initialized.
2025-11-20 06:47:22,516 | INFO     | app | Initializing Elasticsearch...
2025-11-20 06:47:22,519 | INFO     | app | Elasticsearch ready.
2025-11-20 06:47:22,532 | INFO     | app | BookingExpiryService started
2025-11-20 06:47:22,555 | INFO     | app | Notification worker started.
2025-11-20 06:47:32,256 | INFO     | app | Initializing database...
2025-11-20 06:47:32,502 | INFO     | app | Database initialized.
2025-11-20 06:47:32,503 | INFO     | app | Initializing Elasticsearch...
2025-11-20 06:47:32,503 | INFO     | app | Elasticsearch ready.
2025-11-20 06:47:32,509 | INFO     | app | BookingExpiryService started
2025-11-20 06:47:32,559 | INFO     | app | Notification worker started.
2025-11-20 06:48:54,741 | INFO     | app | Initializing database...
2025-11-20 06:48:55,172 | INFO     | app | Database initialized.
2025-11-20 06:48:55,173 | INFO     | app | Initializing Elasticsearch...
2025-11-20 06:48:55,174 | INFO     | app | Elasticsearch ready.
2025-11-20 06:48:55,183 | INFO     | app | BookingExpiryService started
2025-11-20 06:48:55,215 | INFO     | app | Notification worker started.
2025-11-20 06:49:05,530 | INFO     | app | Initializing database...
2025-11-20 06:49:05,855 | INFO     | app | Database initialized.
2025-11-20 06:49:05,855 | INFO     | app | Initializing Elasticsearch...
2025-11-20 06:49:05,856 | INFO     | app | Elasticsearch ready.
2025-11-20 06:49:05,857 | INFO     | app | BookingExpiryService started
2025-11-20 06:49:05,876 | INFO     | app | Notification worker started.
2025-11-20 06:49:15,801 | INFO     | app | Initializing database...
2025-11-20 06:49:16,428 | INFO     | app | Database initialized.
2025-11-20 06:49:16,474 | INFO     | app | Initializing Elasticsearch...
2025-11-20 06:49:16,477 | INFO     | app | Elasticsearch ready.
2025-11-20 06:49:16,489 | INFO     | app | BookingExpiryService started
2025-11-20 06:49:16,541 | INFO     | app | Notification worker started.
2025-11-20 06:49:25,771 | INFO     | app | Initializing database...
2025-11-20 06:49:26,047 | INFO     | app | Database initialized.
2025-11-20 06:49:26,048 | INFO     | app | Initializing Elasticsearch...
2025-11-20 06:49:26,050 | INFO     | app | Elasticsearch ready.
2025-11-20 06:49:26,072 | INFO     | app | BookingExpiryService started
2025-11-20 06:49:26,107 | INFO     | app | Notification worker started.
2025-11-20 06:49:35,154 | INFO     | app | Initializing database...
2025-11-20 06:49:35,497 | INFO     | app | Database initialized.
2025-11-20 06:49:35,498 | INFO     | app | Initializing Elasticsearch...
2025-11-20 06:49:35,500 | INFO     | app | Elasticsearch ready.
2025-11-20 06:49:35,521 | INFO     | app | BookingExpiryService started
2025-11-20 06:49:35,567 | INFO     | app | Notification worker started.
2025-11-20 06:49:55,996 | INFO     | app | Initializing database...
2025-11-20 06:49:56,639 | INFO     | app | Database initialized.
2025-11-20 06:49:56,640 | INFO     | app | Initializing Elasticsearch...
2025-11-20 06:49:56,644 | INFO     | app | Elasticsearch ready.
2025-11-20 06:49:56,654 | INFO     | app | BookingExpiryService started
2025-11-20 06:49:56,687 | INFO     | app | Notification worker started.
2025-11-20 06:50:10,956 | INFO     | app | Initializing database...
2025-11-20 06:50:11,196 | INFO     | app | Database initialized.
2025-11-20 06:50:11,196 | INFO     | app | Initializing Elasticsearch...
2025-11-20 06:50:11,197 | INFO     | app | Elasticsearch ready.
2025-11-20 06:50:11,207 | INFO     | app | BookingExpiryService started
2025-11-20 06:50:11,224 | INFO     | app | Notification worker started.
2025-11-20 06:50:18,439 | INFO     | app | Initializing database...
2025-11-20 06:50:18,617 | INFO     | app | Database initialized.
2025-11-20 06:50:18,617 | INFO     | app | Initializing Elasticsearch...
2025-11-20 06:50:18,618 | INFO     | app | Elasticsearch ready.
2025-11-20 06:50:18,632 | INFO     | app | BookingExpiryService started
2025-11-20 06:50:18,653 | INFO     | app | Notification worker started.
2025-11-20 07:24:04,962 | INFO     | app | Initializing database...
2025-11-20 07:24:05,253 | INFO     | app | Database initialized.
2025-11-20 07:24:05,254 | INFO     | app | Initializing Elasticsearch...
2025-11-20 07:24:05,254 | INFO     | app | Elasticsearch ready.
2025-11-20 07:24:05,257 | INFO     | app | BookingExpiryService started
2025-11-20 07:24:05,313 | INFO     | app | Notification worker started.
2025-11-20 07:25:52,472 | INFO     | app | Initializing database...
2025-11-20 07:25:52,946 | INFO     | app | Database initialized.
2025-11-20 07:25:52,947 | INFO     | app | Initializing Elasticsearch...
2025-11-20 07:25:52,948 | INFO     | app | Elasticsearch ready.
2025-11-20 07:25:52,962 | INFO     | app | BookingExpiryService started
2025-11-20 07:25:52,987 | INFO     | app | Notification worker started.
2025-11-20 09:12:25,202 | INFO     | app | Initializing database...
2025-11-20 09:20:45,316 | INFO     | app | Initializing database...
2025-11-20 09:20:46,201 | INFO     | app | Database initialized.
2025-11-20 09:20:46,202 | INFO     | app | Initializing Elasticsearch...
2025-11-20 09:20:46,208 | INFO     | app | Elasticsearch ready.
2025-11-20 09:20:46,217 | INFO     | app | BookingExpiryService started
2025-11-20 09:20:46,308 | INFO     | app | Notification worker started.
2025-11-20 09:45:02,433 | INFO     | app | Initializing database...
2025-11-20 09:45:02,639 | INFO     | app | Database initialized.
2025-11-20 09:45:02,639 | INFO     | app | Initializing Elasticsearch...
2025-11-20 09:45:02,640 | INFO     | app | Elasticsearch ready.
2025-11-20 09:45:02,650 | INFO     | app | BookingExpiryService started
2025-11-20 09:45:02,695 | INFO     | app | Notification worker started.
2025-11-20 09:47:52,464 | INFO     | app | Initializing database...
2025-11-20 09:47:52,586 | INFO     | app | Database initialized.
2025-11-20 09:47:52,587 | INFO     | app | Initializing Elasticsearch...
2025-11-20 09:47:52,587 | INFO     | app | Elasticsearch ready.
2025-11-20 09:47:52,598 | INFO     | app | BookingExpiryService started
2025-11-20 09:47:52,689 | INFO     | app | Notification worker started.
2025-11-20 09:47:57,092 | INFO     | app | Initializing database...
2025-11-20 09:47:57,207 | INFO     | app | Database initialized.
2025-11-20 09:47:57,207 | INFO     | app | Initializing Elasticsearch...
2025-11-20 09:47:57,208 | INFO     | app | Elasticsearch ready.
2025-11-20 09:47:57,226 | INFO     | app | BookingExpiryService started
2025-11-20 09:47:57,271 | INFO     | app | Notification worker started.
2025-11-20 09:54:16,797 | INFO     | app | Initializing database...
2025-11-20 09:54:17,051 | INFO     | app | Database initialized.
2025-11-20 09:54:17,051 | INFO     | app | Initializing Elasticsearch...
2025-11-20 09:54:17,052 | INFO     | app | Elasticsearch ready.
2025-11-20 09:54:17,066 | INFO     | app | BookingExpiryService started
2025-11-20 09:54:17,141 | INFO     | app | Notification worker started.
2025-11-20 09:54:21,577 | INFO     | app | Initializing database...
2025-11-20 09:54:21,703 | INFO     | app | Database initialized.
2025-11-20 09:54:21,704 | INFO     | app | Initializing Elasticsearch...
2025-11-20 09:54:21,704 | INFO     | app | Elasticsearch ready.
2025-11-20 09:54:21,721 | INFO     | app | BookingExpiryService started
2025-11-20 09:54:21,783 | INFO     | app | Notification worker started.
2025-11-20 10:09:23,221 | INFO     | app | Initializing database...
2025-11-20 10:09:23,396 | INFO     | app | Database initialized.
2025-11-20 10:09:23,396 | INFO     | app | Initializing Elasticsearch...
2025-11-20 10:09:23,397 | INFO     | app | Elasticsearch ready.
2025-11-20 10:09:23,416 | INFO     | app | BookingExpiryService started
2025-11-20 10:09:23,476 | INFO     | app | Notification worker started.
2025-11-20 10:15:23,235 | INFO     | app | Initializing database...
2025-11-20 10:15:23,537 | INFO     | app | Database initialized.
2025-11-20 10:15:23,537 | INFO     | app | Initializing Elasticsearch...
2025-11-20 10:15:23,537 | INFO     | app | Elasticsearch ready.
2025-11-20 10:15:23,555 | INFO     | app | BookingExpiryService started
2025-11-20 10:15:23,615 | INFO     | app | Notification worker started.
2025-11-20 10:17:30,523 | INFO     | app | Initializing database...
2025-11-20 10:17:30,801 | INFO     | app | Database initialized.
2025-11-20 10:17:30,802 | INFO     | app | Initializing Elasticsearch...
2025-11-20 10:17:30,802 | INFO     | app | Elasticsearch ready.
2025-11-20 10:17:30,821 | INFO     | app | BookingExpiryService started
2025-11-20 10:17:30,897 | INFO     | app | Notification worker started.
2025-11-20 10:19:59,614 | INFO     | app | Initializing database...
2025-11-20 10:19:59,739 | INFO     | app | Database initialized.
2025-11-20 10:19:59,739 | INFO     | app | Initializing Elasticsearch...
2025-11-20 10:19:59,740 | INFO     | app | Elasticsearch ready.
2025-11-20 10:19:59,757 | INFO     | app | BookingExpiryService started
2025-11-20 10:19:59,819 | INFO     | app | Notification worker started.
2025-11-20 10:53:59,777 | INFO     | app | Initializing database...
2025-11-20 10:54:00,075 | INFO     | app | Database initialized.
2025-11-20 10:54:00,075 | INFO     | app | Initializing Elasticsearch...
2025-11-20 10:54:00,075 | INFO     | app | Elasticsearch ready.
2025-11-20 10:54:00,091 | INFO     | app | BookingExpiryService started
2025-11-20 10:54:00,175 | INFO     | app | Notification worker started.
2025-11-20 10:55:45,417 | INFO     | app | Initializing database...
2025-11-20 10:55:46,766 | INFO     | app | Database initialized.
2025-11-20 10:55:46,766 | INFO     | app | Initializing Elasticsearch...
2025-11-20 10:55:46,766 | INFO     | app | Elasticsearch ready.
2025-11-20 10:55:46,797 | INFO     | app | BookingExpiryService started
2025-11-20 10:55:46,842 | INFO     | app | Notification worker started.
2025-11-20 10:58:32,152 | ERROR    | app.repositories.hostel_repository | Integrity error during upsert: insert or update on table "hostels" violates foreign key constraint "hostels_location_id_fkey"
DETAIL:  Key (location_id)=(1) is not present in table "locations".

2025-11-20 10:58:47,011 | ERROR    | app.repositories.hostel_repository | Integrity error during upsert: insert or update on table "hostels" violates foreign key constraint "hostels_location_id_fkey"
DETAIL:  Key (location_id)=(0) is not present in table "locations".

2025-11-20 11:09:32,276 | INFO     | app | Initializing database...
2025-11-20 11:09:32,430 | INFO     | app | Database initialized.
2025-11-20 11:09:32,430 | INFO     | app | Initializing Elasticsearch...
2025-11-20 11:09:32,431 | INFO     | app | Elasticsearch ready.
2025-11-20 11:09:32,450 | INFO     | app | BookingExpiryService started
2025-11-20 11:09:32,526 | INFO     | app | Notification worker started.
2025-11-20 12:06:48,050 | INFO     | app | Initializing database...
2025-11-20 12:06:48,417 | INFO     | app | Database initialized.
2025-11-20 12:06:48,417 | INFO     | app | Initializing Elasticsearch...
2025-11-20 12:06:48,428 | INFO     | app | Elasticsearch ready.
2025-11-20 12:06:48,443 | INFO     | app | BookingExpiryService started
2025-11-20 12:06:48,530 | INFO     | app | Notification worker started.
2025-11-20 15:40:32,389 | INFO     | app | Initializing database...
2025-11-20 15:40:32,721 | INFO     | app | Database initialized.
2025-11-20 15:40:32,722 | INFO     | app | Initializing Elasticsearch...
2025-11-20 15:40:49,295 | INFO     | app | Elasticsearch ready.
2025-11-20 15:40:49,310 | INFO     | app | BookingExpiryService started
2025-11-20 15:40:49,355 | INFO     | app | Notification worker started.
2025-11-20 15:40:58,766 | INFO     | app | Initializing database...
2025-11-20 15:40:58,891 | INFO     | app | Database initialized.
2025-11-20 15:40:58,892 | INFO     | app | Initializing Elasticsearch...
2025-11-20 15:41:15,119 | INFO     | app | Elasticsearch ready.
2025-11-20 15:41:15,132 | INFO     | app | BookingExpiryService started
2025-11-20 15:41:15,179 | INFO     | app | Notification worker started.
2025-11-20 15:45:32,910 | INFO     | app | Initializing database...
2025-11-20 15:45:33,043 | INFO     | app | Database initialized.
2025-11-20 15:45:33,043 | INFO     | app | Initializing Elasticsearch...
2025-11-20 15:45:49,363 | INFO     | app | Elasticsearch ready.
2025-11-20 15:45:49,377 | INFO     | app | BookingExpiryService started
2025-11-20 15:45:49,453 | INFO     | app | Notification worker started.
2025-11-20 15:48:23,936 | INFO     | app | Initializing database...
2025-11-20 15:48:24,065 | INFO     | app | Database initialized.
2025-11-20 15:48:24,065 | INFO     | app | Initializing Elasticsearch...
2025-11-20 15:48:24,066 | INFO     | app | Elasticsearch ready.
2025-11-20 15:48:24,081 | INFO     | app | BookingExpiryService started
2025-11-20 15:48:24,158 | INFO     | app | Notification worker started.
2025-11-20 15:49:45,104 | INFO     | app | Initializing database...
2025-11-20 15:49:45,371 | INFO     | app | Database initialized.
2025-11-20 15:49:45,373 | INFO     | app | Initializing Elasticsearch...
2025-11-20 15:50:01,681 | INFO     | app | Elasticsearch ready.
2025-11-20 15:50:01,695 | INFO     | app | BookingExpiryService started
2025-11-20 15:50:01,785 | INFO     | app | Notification worker started.
2025-11-20 15:50:11,394 | INFO     | app | Initializing database...
2025-11-20 15:50:11,522 | INFO     | app | Database initialized.
2025-11-20 15:50:11,523 | INFO     | app | Initializing Elasticsearch...
2025-11-20 15:50:27,866 | INFO     | app | Elasticsearch ready.
2025-11-20 15:50:27,880 | INFO     | app | BookingExpiryService started
2025-11-20 15:50:27,925 | INFO     | app | Notification worker started.
2025-11-20 15:50:41,745 | INFO     | app | Initializing database...
2025-11-20 15:50:41,862 | INFO     | app | Database initialized.
2025-11-20 15:50:41,862 | INFO     | app | Initializing Elasticsearch...
2025-11-20 15:50:58,140 | INFO     | app | Elasticsearch ready.
2025-11-20 15:50:58,153 | INFO     | app | BookingExpiryService started
2025-11-20 15:50:58,245 | INFO     | app | Notification worker started.
2025-11-20 15:51:08,407 | INFO     | app | Initializing database...
2025-11-20 15:51:08,535 | INFO     | app | Database initialized.
2025-11-20 15:51:08,535 | INFO     | app | Initializing Elasticsearch...
2025-11-20 15:51:24,781 | INFO     | app | Elasticsearch ready.
2025-11-20 15:51:24,804 | INFO     | app | BookingExpiryService started
2025-11-20 15:51:24,894 | INFO     | app | Notification worker started.
2025-11-20 15:53:05,954 | INFO     | app | Initializing database...
2025-11-20 15:53:06,095 | INFO     | app | Database initialized.
2025-11-20 15:53:06,095 | INFO     | app | Initializing Elasticsearch...
2025-11-20 15:53:10,124 | INFO     | app | Elasticsearch ready.
2025-11-20 15:53:10,138 | INFO     | app | BookingExpiryService started
2025-11-20 15:53:10,182 | INFO     | app | Notification worker started.
2025-11-20 15:55:15,322 | INFO     | app | Initializing database...
2025-11-20 15:55:15,457 | INFO     | app | Database initialized.
2025-11-20 15:55:15,458 | INFO     | app | Initializing Elasticsearch...
2025-11-20 15:55:19,482 | INFO     | app | Elasticsearch ready.
2025-11-20 15:55:19,496 | INFO     | app | BookingExpiryService started
2025-11-20 15:55:19,558 | INFO     | app | Notification worker started.
2025-11-20 16:09:06,697 | INFO     | app | Initializing database...
2025-11-20 16:09:06,951 | INFO     | app | Database initialized.
2025-11-20 16:09:06,951 | INFO     | app | Initializing Elasticsearch...
2025-11-20 16:09:10,958 | INFO     | app | Elasticsearch ready.
2025-11-20 16:09:10,972 | INFO     | app | BookingExpiryService started
2025-11-20 16:09:11,033 | INFO     | app | Notification worker started.
2025-11-20 18:21:32,464 | INFO     | app | Initializing database...
2025-11-20 18:21:32,840 | INFO     | app | Database initialized.
2025-11-20 18:21:32,842 | INFO     | app | Initializing Elasticsearch...
2025-11-20 18:21:36,870 | INFO     | app | Elasticsearch ready.
2025-11-20 18:21:36,885 | INFO     | app | BookingExpiryService started
2025-11-20 18:21:36,946 | INFO     | app | Notification worker started.
2025-11-20 18:33:27,606 | INFO     | app | Initializing database...
2025-11-20 18:33:28,018 | INFO     | app | Database initialized.
2025-11-20 18:33:28,019 | INFO     | app | Initializing Elasticsearch...
2025-11-20 18:33:32,051 | INFO     | app | Elasticsearch ready.
2025-11-20 18:33:32,065 | INFO     | app | BookingExpiryService started
2025-11-20 18:33:32,126 | INFO     | app | Notification worker started.
2025-11-20 18:45:10,510 | INFO     | app | Initializing database...
2025-11-20 18:45:10,929 | INFO     | app | Database initialized.
2025-11-20 18:45:10,929 | INFO     | app | Initializing Elasticsearch...
2025-11-20 18:45:14,936 | INFO     | app | Elasticsearch ready.
2025-11-20 18:45:14,952 | INFO     | app | BookingExpiryService started
2025-11-20 18:45:15,035 | INFO     | app | Notification worker started.
2025-11-20 18:48:47,939 | INFO     | app | Initializing database...
2025-11-20 18:48:48,251 | INFO     | app | Database initialized.
2025-11-20 18:48:48,251 | INFO     | app | Initializing Elasticsearch...
2025-11-20 18:48:52,273 | INFO     | app | Elasticsearch ready.
2025-11-20 18:48:52,289 | INFO     | app | BookingExpiryService started
2025-11-20 18:48:52,372 | INFO     | app | Notification worker started.
2025-11-20 18:53:05,359 | INFO     | app | Initializing database...
2025-11-20 18:53:05,490 | INFO     | app | Database initialized.
2025-11-20 18:53:05,490 | INFO     | app | Initializing Elasticsearch...
2025-11-20 18:53:09,495 | INFO     | app | Elasticsearch ready.
2025-11-20 18:53:09,511 | INFO     | app | BookingExpiryService started
2025-11-20 18:53:09,586 | INFO     | app | Notification worker started.
2025-11-20 18:56:28,332 | INFO     | app | Initializing database...
2025-11-20 18:56:28,470 | INFO     | app | Database initialized.
2025-11-20 18:56:28,470 | INFO     | app | Initializing Elasticsearch...
2025-11-20 18:56:32,484 | INFO     | app | Elasticsearch ready.
2025-11-20 18:56:32,503 | INFO     | app | BookingExpiryService started
2025-11-20 18:56:32,595 | INFO     | app | Notification worker started.
2025-11-20 18:59:01,153 | INFO     | app | Initializing database...
2025-11-20 18:59:01,270 | INFO     | app | Database initialized.
2025-11-20 18:59:01,270 | INFO     | app | Initializing Elasticsearch...
2025-11-20 18:59:05,272 | INFO     | app | Elasticsearch ready.
2025-11-20 18:59:05,288 | INFO     | app | BookingExpiryService started
2025-11-20 18:59:05,371 | INFO     | app | Notification worker started.
2025-11-20 19:02:31,188 | INFO     | app | Initializing database...
2025-11-20 19:02:31,298 | INFO     | app | Database initialized.
2025-11-20 19:02:31,299 | INFO     | app | Initializing Elasticsearch...
2025-11-20 19:02:35,314 | INFO     | app | Elasticsearch ready.
2025-11-20 19:02:35,330 | INFO     | app | BookingExpiryService started
2025-11-20 19:02:35,380 | INFO     | app | Notification worker started.
2025-11-20 19:03:33,295 | INFO     | app | Initializing database...
2025-11-20 19:03:33,474 | INFO     | app | Database initialized.
2025-11-20 19:03:33,478 | INFO     | app | Initializing Elasticsearch...
2025-11-20 19:03:37,501 | INFO     | app | Elasticsearch ready.
2025-11-20 19:03:37,515 | INFO     | app | BookingExpiryService started
2025-11-20 19:03:37,598 | INFO     | app | Notification worker started.
2025-11-20 19:05:01,491 | INFO     | app | Initializing database...
2025-11-20 19:05:01,616 | INFO     | app | Database initialized.
2025-11-20 19:05:01,616 | INFO     | app | Initializing Elasticsearch...
2025-11-20 19:05:05,628 | INFO     | app | Elasticsearch ready.
2025-11-20 19:05:05,645 | INFO     | app | BookingExpiryService started
2025-11-20 19:05:05,696 | INFO     | app | Notification worker started.
2025-11-20 19:10:05,761 | ERROR    | app | Error in _check_and_expire_bookings: (psycopg2.OperationalError) server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

[SQL: SELECT bookings.id AS bookings_id, bookings.visitor_id AS bookings_visitor_id, bookings.hostel_id AS bookings_hostel_id, bookings.room_id AS bookings_room_id, bookings.check_in AS bookings_check_in, bookings.check_out AS bookings_check_out, bookings.amount_paid AS bookings_amount_paid, bookings.status AS bookings_status, bookings.created_at AS bookings_created_at 
FROM bookings 
WHERE bookings.status = %(status_1)s AND bookings.created_at < %(created_at_1)s]
[parameters: {'status_1': 'pending', 'created_at_1': datetime.datetime(2025, 11, 19, 13, 40, 5, 739928)}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-11-20 19:12:17,605 | INFO     | app | Initializing database...
2025-11-20 19:12:18,484 | INFO     | app | Database initialized.
2025-11-20 19:12:18,485 | INFO     | app | Initializing Elasticsearch...
2025-11-20 19:12:22,509 | INFO     | app | Elasticsearch ready.
2025-11-20 19:12:22,525 | INFO     | app | BookingExpiryService started
2025-11-20 19:12:22,583 | INFO     | app | Notification worker started.
2025-11-20 19:12:50,425 | INFO     | app | Initializing database...
2025-11-20 19:12:50,553 | INFO     | app | Database initialized.
2025-11-20 19:12:50,553 | INFO     | app | Initializing Elasticsearch...
2025-11-20 19:12:54,578 | INFO     | app | Elasticsearch ready.
2025-11-20 19:12:54,594 | INFO     | app | BookingExpiryService started
2025-11-20 19:12:54,778 | INFO     | app | Notification worker started.
2025-11-20 19:52:55,456 | INFO     | app | Initializing database...
2025-11-20 19:53:46,113 | INFO     | app | Initializing database...
2025-11-20 19:53:46,644 | INFO     | app | Database initialized.
2025-11-20 19:53:46,644 | INFO     | app | Initializing Elasticsearch...
2025-11-20 19:53:50,670 | INFO     | app | Elasticsearch ready.
2025-11-20 19:53:50,685 | INFO     | app | BookingExpiryService started
2025-11-20 19:53:50,720 | INFO     | app | Notification worker started.
2025-11-20 19:55:52,810 | INFO     | app | Initializing database...
2025-11-20 19:55:54,586 | INFO     | app | Database initialized.
2025-11-20 19:55:54,587 | INFO     | app | Initializing Elasticsearch...
2025-11-20 19:55:58,608 | INFO     | app | Elasticsearch ready.
2025-11-20 19:55:58,623 | INFO     | app | BookingExpiryService started
2025-11-20 19:55:58,639 | INFO     | app | Notification worker started.
2025-11-20 20:03:36,744 | INFO     | app | Initializing database...
2025-11-20 20:03:36,970 | INFO     | app | Database initialized.
2025-11-20 20:03:36,971 | INFO     | app | Initializing Elasticsearch...
2025-11-20 20:03:40,980 | INFO     | app | Elasticsearch ready.
2025-11-20 20:03:40,995 | INFO     | app | BookingExpiryService started
2025-11-20 20:03:41,038 | INFO     | app | Notification worker started.
2025-11-20 20:09:14,942 | INFO     | app | Initializing database...
2025-11-20 20:09:15,298 | INFO     | app | Database initialized.
2025-11-20 20:09:15,299 | INFO     | app | Initializing Elasticsearch...
2025-11-20 20:09:19,306 | INFO     | app | Elasticsearch ready.
2025-11-20 20:09:19,321 | INFO     | app | BookingExpiryService started
2025-11-20 20:09:19,357 | INFO     | app | Notification worker started.
2025-11-20 20:09:28,480 | INFO     | app | Initializing database...
2025-11-20 20:09:28,781 | INFO     | app | Database initialized.
2025-11-20 20:09:28,781 | INFO     | app | Initializing Elasticsearch...
2025-11-20 20:09:32,784 | INFO     | app | Elasticsearch ready.
2025-11-20 20:09:32,798 | INFO     | app | BookingExpiryService started
2025-11-20 20:09:32,820 | INFO     | app | Notification worker started.
2025-11-20 20:10:49,329 | INFO     | app | Initializing database...
2025-11-20 20:10:49,735 | INFO     | app | Database initialized.
2025-11-20 20:10:49,735 | INFO     | app | Initializing Elasticsearch...
2025-11-20 20:10:53,748 | INFO     | app | Elasticsearch ready.
2025-11-20 20:10:53,757 | INFO     | app | BookingExpiryService started
2025-11-20 20:10:53,791 | INFO     | app | Notification worker started.
2025-11-20 20:11:33,214 | INFO     | app.services.email_service | Email sent successfully to superadmin@gmail.com
2025-11-20 20:11:33,215 | INFO     | app.services.password_reset_service | Password reset link for superadmin@gmail.com: http://localhost:3000/reset-password?token=hye2fMmiMLufrlkp-t7Pds96ZYyqrA2rAPcPk1zCzJA
2025-11-20 20:11:33,215 | INFO     | app.services.password_reset_service | Hello Default Super Admin, We received a request to reset your password. Your password reset code is: ➡ 945631 Please enter this code on the password reset page: http://localhost:3000/reset-password?token=hye2fMmiMLufrlkp-t7Pds96ZYyqrA2rAPcPk1zCzJA Note: This code is valid for 15 minutes. If you did not request a password reset, you can safely ignore this email. With regards, Support Team
2025-11-20 20:11:33,216 | INFO     | app.services.password_reset_service | Password reset link for superadmin@gmail.com: http://localhost:3000/reset-password?token=hye2fMmiMLufrlkp-t7Pds96ZYyqrA2rAPcPk1zCzJA
2025-11-20 20:20:58,682 | INFO     | app | Initializing database...
2025-11-20 20:22:13,585 | INFO     | app | Initializing database...
2025-11-20 20:23:13,239 | INFO     | app | Initializing database...
2025-11-20 20:23:13,900 | INFO     | app | Database initialized.
2025-11-20 20:23:13,900 | INFO     | app | Initializing Elasticsearch...
2025-11-20 20:23:17,929 | INFO     | app | Elasticsearch ready.
2025-11-20 20:23:17,943 | INFO     | app | BookingExpiryService started
2025-11-20 20:23:17,983 | INFO     | app | Notification worker started.
2025-11-20 20:26:58,322 | INFO     | app | Initializing database...
2025-11-20 20:26:58,439 | INFO     | app | Database initialized.
2025-11-20 20:26:58,440 | INFO     | app | Initializing Elasticsearch...
2025-11-20 20:27:02,459 | INFO     | app | Elasticsearch ready.
2025-11-20 20:27:02,473 | INFO     | app | BookingExpiryService started
2025-11-20 20:27:02,513 | INFO     | app | Notification worker started.
2025-11-20 20:27:06,873 | INFO     | app | Initializing database...
2025-11-20 20:27:06,971 | INFO     | app | Database initialized.
2025-11-20 20:27:06,971 | INFO     | app | Initializing Elasticsearch...
2025-11-20 20:27:10,984 | INFO     | app | Elasticsearch ready.
2025-11-20 20:27:11,001 | INFO     | app | BookingExpiryService started
2025-11-20 20:27:11,037 | INFO     | app | Notification worker started.
2025-11-20 20:28:02,863 | INFO     | app | Initializing database...
2025-11-20 20:28:02,981 | INFO     | app | Database initialized.
2025-11-20 20:28:02,981 | INFO     | app | Initializing Elasticsearch...
2025-11-20 20:28:06,988 | INFO     | app | Elasticsearch ready.
2025-11-20 20:28:06,998 | INFO     | app | BookingExpiryService started
2025-11-20 20:28:07,043 | INFO     | app | Notification worker started.
2025-11-20 20:28:57,526 | INFO     | app | Initializing database...
2025-11-20 20:28:57,753 | INFO     | app | Database initialized.
2025-11-20 20:28:57,754 | INFO     | app | Initializing Elasticsearch...
2025-11-20 20:29:01,762 | INFO     | app | Elasticsearch ready.
2025-11-20 20:29:01,776 | INFO     | app | BookingExpiryService started
2025-11-20 20:29:01,827 | INFO     | app | Notification worker started.
2025-11-20 20:29:06,260 | INFO     | app | Initializing database...
2025-11-20 20:29:06,374 | INFO     | app | Database initialized.
2025-11-20 20:29:06,374 | INFO     | app | Initializing Elasticsearch...
2025-11-20 20:29:10,405 | INFO     | app | Elasticsearch ready.
2025-11-20 20:29:10,420 | INFO     | app | BookingExpiryService started
2025-11-20 20:29:10,470 | INFO     | app | Notification worker started.
2025-11-20 20:30:10,593 | INFO     | app | Initializing database...
2025-11-20 20:30:10,689 | INFO     | app | Database initialized.
2025-11-20 20:30:10,689 | INFO     | app | Initializing Elasticsearch...
2025-11-20 20:30:14,704 | INFO     | app | Elasticsearch ready.
2025-11-20 20:30:14,719 | INFO     | app | BookingExpiryService started
2025-11-20 20:30:14,759 | INFO     | app | Notification worker started.
2025-11-20 20:30:19,154 | INFO     | app | Initializing database...
2025-11-20 20:30:19,257 | INFO     | app | Database initialized.
2025-11-20 20:30:19,258 | INFO     | app | Initializing Elasticsearch...
2025-11-20 20:30:23,284 | INFO     | app | Elasticsearch ready.
2025-11-20 20:30:23,298 | INFO     | app | BookingExpiryService started
2025-11-20 20:30:23,348 | INFO     | app | Notification worker started.
2025-11-20 20:30:23,467 | ERROR    | app.repositories.hostel_repository | Integrity error during upsert: insert or update on table "hostels" violates foreign key constraint "hostels_location_id_fkey"
DETAIL:  Key (location_id)=(0) is not present in table "locations".

2025-11-20 20:31:21,789 | ERROR    | app.repositories.hostel_repository | Integrity error during upsert: insert or update on table "hostels" violates foreign key constraint "hostels_location_id_fkey"
DETAIL:  Key (location_id)=(0) is not present in table "locations".

2025-11-20 20:31:26,474 | INFO     | app | Initializing database...
2025-11-20 20:31:26,594 | INFO     | app | Database initialized.
2025-11-20 20:31:26,594 | INFO     | app | Initializing Elasticsearch...
2025-11-20 20:31:30,599 | INFO     | app | Elasticsearch ready.
2025-11-20 20:31:30,612 | INFO     | app | BookingExpiryService started
2025-11-20 20:31:30,646 | INFO     | app | Notification worker started.
2025-11-20 20:31:35,196 | INFO     | app | Initializing database...
2025-11-20 20:31:35,296 | INFO     | app | Database initialized.
2025-11-20 20:31:35,296 | INFO     | app | Initializing Elasticsearch...
2025-11-20 20:31:39,312 | INFO     | app | Elasticsearch ready.
2025-11-20 20:31:39,327 | INFO     | app | BookingExpiryService started
2025-11-20 20:31:39,392 | INFO     | app | Notification worker started.
2025-11-20 20:31:39,494 | ERROR    | app.repositories.hostel_repository | Integrity error during upsert: insert or update on table "hostels" violates foreign key constraint "hostels_location_id_fkey"
DETAIL:  Key (location_id)=(0) is not present in table "locations".

2025-11-20 20:32:35,305 | ERROR    | app.repositories.hostel_repository | Integrity error during upsert: insert or update on table "hostels" violates foreign key constraint "hostels_location_id_fkey"
DETAIL:  Key (location_id)=(0) is not present in table "locations".

2025-11-20 20:32:39,681 | INFO     | app | Initializing database...
2025-11-20 20:32:39,792 | INFO     | app | Database initialized.
2025-11-20 20:32:39,792 | INFO     | app | Initializing Elasticsearch...
2025-11-20 20:32:43,799 | INFO     | app | Elasticsearch ready.
2025-11-20 20:32:43,806 | INFO     | app | BookingExpiryService started
2025-11-20 20:32:43,844 | INFO     | app | Notification worker started.
2025-11-20 20:32:48,202 | INFO     | app | Initializing database...
2025-11-20 20:32:48,434 | INFO     | app | Database initialized.
2025-11-20 20:32:48,434 | INFO     | app | Initializing Elasticsearch...
2025-11-20 20:32:52,455 | INFO     | app | Elasticsearch ready.
2025-11-20 20:32:52,472 | INFO     | app | BookingExpiryService started
2025-11-20 20:32:52,506 | INFO     | app | Notification worker started.
2025-11-20 20:32:52,608 | ERROR    | app.repositories.hostel_repository | Integrity error during upsert: insert or update on table "hostels" violates foreign key constraint "hostels_location_id_fkey"
DETAIL:  Key (location_id)=(1) is not present in table "locations".

2025-11-20 20:34:51,143 | INFO     | app | Initializing database...
2025-11-20 20:34:51,265 | INFO     | app | Database initialized.
2025-11-20 20:34:51,266 | INFO     | app | Initializing Elasticsearch...
2025-11-20 20:34:55,286 | INFO     | app | Elasticsearch ready.
2025-11-20 20:34:55,302 | INFO     | app | BookingExpiryService started
2025-11-20 20:34:55,339 | INFO     | app | Notification worker started.
2025-11-20 20:35:00,806 | INFO     | app | Initializing database...
2025-11-20 20:35:01,030 | INFO     | app | Database initialized.
2025-11-20 20:35:01,031 | INFO     | app | Initializing Elasticsearch...
2025-11-20 20:35:05,050 | INFO     | app | Elasticsearch ready.
2025-11-20 20:35:05,065 | INFO     | app | BookingExpiryService started
2025-11-20 20:35:05,113 | INFO     | app | Notification worker started.
2025-11-20 20:35:39,746 | ERROR    | app.repositories.hostel_repository | Integrity error during upsert: insert or update on table "hostels" violates foreign key constraint "hostels_location_id_fkey"
DETAIL:  Key (location_id)=(0) is not present in table "locations".

2025-11-20 20:37:24,838 | ERROR    | app.repositories.hostel_repository | Integrity error during upsert: insert or update on table "hostels" violates foreign key constraint "hostels_location_id_fkey"
DETAIL:  Key (location_id)=(0) is not present in table "locations".

2025-11-20 20:40:01,248 | INFO     | app | Initializing database...
2025-11-20 20:40:01,368 | INFO     | app | Database initialized.
2025-11-20 20:40:01,369 | INFO     | app | Initializing Elasticsearch...
2025-11-20 20:40:05,397 | INFO     | app | Elasticsearch ready.
2025-11-20 20:40:05,412 | INFO     | app | BookingExpiryService started
2025-11-20 20:40:05,475 | INFO     | app | Notification worker started.
2025-11-20 20:44:08,028 | INFO     | app.api.v1.super_admin.admins | Creating admin with data: {'admin_name': 'string', 'email': 'user@example.com', 'is_active': True}
2025-11-20 20:44:08,038 | INFO     | app.api.v1.super_admin.admins | Admin created successfully: admin_name='string' email='user@example.com' is_active=True id=3 joined_at=datetime.datetime(2025, 11, 20, 20, 44, 8, 29957, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800)))
2025-11-20 20:45:46,299 | INFO     | app | Initializing database...
2025-11-20 20:45:46,423 | INFO     | app | Database initialized.
2025-11-20 20:45:46,423 | INFO     | app | Initializing Elasticsearch...
2025-11-20 20:45:50,447 | INFO     | app | Elasticsearch ready.
2025-11-20 20:45:50,462 | INFO     | app | BookingExpiryService started
2025-11-20 20:45:50,496 | INFO     | app | Notification worker started.
2025-11-20 20:45:56,899 | INFO     | app | Initializing database...
2025-11-20 20:45:57,114 | INFO     | app | Database initialized.
2025-11-20 20:45:57,114 | INFO     | app | Initializing Elasticsearch...
2025-11-20 20:46:01,134 | INFO     | app | Elasticsearch ready.
2025-11-20 20:46:01,149 | INFO     | app | BookingExpiryService started
2025-11-20 20:46:01,207 | INFO     | app | Notification worker started.
2025-11-20 20:47:04,131 | INFO     | app | Initializing database...
2025-11-20 20:47:04,268 | INFO     | app | Database initialized.
2025-11-20 20:47:04,268 | INFO     | app | Initializing Elasticsearch...
2025-11-20 20:47:08,292 | INFO     | app | Elasticsearch ready.
2025-11-20 20:47:08,318 | INFO     | app | BookingExpiryService started
2025-11-20 20:47:08,409 | INFO     | app | Notification worker started.
2025-11-20 20:47:15,451 | INFO     | app | Initializing database...
2025-11-20 20:47:15,587 | INFO     | app | Database initialized.
2025-11-20 20:47:15,587 | INFO     | app | Initializing Elasticsearch...
2025-11-20 20:47:19,604 | INFO     | app | Elasticsearch ready.
2025-11-20 20:47:19,619 | INFO     | app | BookingExpiryService started
2025-11-20 20:47:19,665 | INFO     | app | Notification worker started.
2025-11-20 20:55:38,610 | INFO     | app | Initializing database...
2025-11-20 20:55:39,408 | INFO     | app | Database initialized.
2025-11-20 20:55:39,409 | INFO     | app | Initializing Elasticsearch...
2025-11-20 20:55:43,438 | INFO     | app | Elasticsearch ready.
2025-11-20 20:55:43,455 | INFO     | app | BookingExpiryService started
2025-11-20 20:55:43,484 | INFO     | app | Notification worker started.
2025-11-20 21:22:33,515 | INFO     | app | Initializing database...
2025-11-20 21:22:34,590 | INFO     | app | Database initialized.
2025-11-20 21:22:34,590 | INFO     | app | Initializing Elasticsearch...
2025-11-20 21:22:38,613 | INFO     | app | Elasticsearch ready.
2025-11-20 21:22:38,627 | INFO     | app | BookingExpiryService started
2025-11-20 21:22:38,657 | INFO     | app | Notification worker started.
2025-11-20 21:23:36,017 | INFO     | app | Initializing database...
2025-11-20 21:23:36,366 | INFO     | app | Database initialized.
2025-11-20 21:23:36,367 | INFO     | app | Initializing Elasticsearch...
2025-11-20 21:23:40,384 | INFO     | app | Elasticsearch ready.
2025-11-20 21:23:40,399 | INFO     | app | BookingExpiryService started
2025-11-20 21:23:40,447 | INFO     | app | Notification worker started.
2025-11-20 21:24:31,642 | ERROR    | app.repositories.hostel_repository | Integrity error during upsert: insert or update on table "hostels" violates foreign key constraint "hostels_location_id_fkey"
DETAIL:  Key (location_id)=(0) is not present in table "locations".

2025-11-20 21:26:29,696 | INFO     | app.api.v1.super_admin.admins | Creating admin with data: {'admin_name': 'string', 'email': 'user@example.com', 'is_active': True}
2025-11-20 21:26:29,767 | INFO     | app.api.v1.super_admin.admins | Admin created successfully: admin_name='string' email='user@example.com' is_active=True id=3 joined_at=datetime.datetime(2025, 11, 20, 21, 26, 29, 698594, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800)))
2025-11-20 21:28:17,944 | INFO     | app | Initializing database...
2025-11-20 21:28:18,202 | INFO     | app | Database initialized.
2025-11-20 21:28:18,202 | INFO     | app | Initializing Elasticsearch...
2025-11-20 21:28:22,227 | INFO     | app | Elasticsearch ready.
2025-11-20 21:28:22,243 | INFO     | app | BookingExpiryService started
2025-11-20 21:28:22,274 | INFO     | app | Notification worker started.
2025-11-20 21:28:28,642 | INFO     | app | Initializing database...
2025-11-20 21:28:28,777 | INFO     | app | Database initialized.
2025-11-20 21:28:28,778 | INFO     | app | Initializing Elasticsearch...
2025-11-20 21:28:32,791 | INFO     | app | Elasticsearch ready.
2025-11-20 21:28:32,805 | INFO     | app | BookingExpiryService started
2025-11-20 21:28:32,837 | INFO     | app | Notification worker started.
2025-11-20 21:30:13,103 | INFO     | app | Initializing database...
2025-11-20 21:30:13,258 | INFO     | app | Database initialized.
2025-11-20 21:30:13,258 | INFO     | app | Initializing Elasticsearch...
2025-11-20 21:30:17,269 | INFO     | app | Elasticsearch ready.
2025-11-20 21:30:17,283 | INFO     | app | BookingExpiryService started
2025-11-20 21:30:17,329 | INFO     | app | Notification worker started.
2025-11-20 21:31:42,150 | INFO     | app | Initializing database...
2025-11-20 21:31:42,349 | INFO     | app | Database initialized.
2025-11-20 21:31:42,350 | INFO     | app | Initializing Elasticsearch...
2025-11-20 21:31:46,370 | INFO     | app | Elasticsearch ready.
2025-11-20 21:31:46,385 | INFO     | app | BookingExpiryService started
2025-11-20 21:31:46,431 | INFO     | app | Notification worker started.
2025-11-20 21:31:53,452 | INFO     | app | Initializing database...
2025-11-20 21:31:53,683 | INFO     | app | Database initialized.
2025-11-20 21:31:53,684 | INFO     | app | Initializing Elasticsearch...
2025-11-20 21:31:57,701 | INFO     | app | Elasticsearch ready.
2025-11-20 21:31:57,717 | INFO     | app | BookingExpiryService started
2025-11-20 21:31:57,749 | INFO     | app | Notification worker started.
2025-11-20 21:34:45,192 | INFO     | app | Initializing database...
2025-11-20 21:34:45,474 | INFO     | app | Database initialized.
2025-11-20 21:34:45,475 | INFO     | app | Initializing Elasticsearch...
2025-11-20 21:34:49,487 | INFO     | app | Elasticsearch ready.
2025-11-20 21:34:49,502 | INFO     | app | BookingExpiryService started
2025-11-20 21:34:49,564 | INFO     | app | Notification worker started.
2025-11-20 21:36:00,406 | INFO     | app | Initializing database...
2025-11-20 21:36:00,541 | INFO     | app | Database initialized.
2025-11-20 21:36:00,541 | INFO     | app | Initializing Elasticsearch...
2025-11-20 21:36:04,563 | INFO     | app | Elasticsearch ready.
2025-11-20 21:36:04,578 | INFO     | app | BookingExpiryService started
2025-11-20 21:36:04,626 | INFO     | app | Notification worker started.
2025-11-20 21:37:48,963 | INFO     | app | Initializing database...
2025-11-20 21:37:49,134 | INFO     | app | Database initialized.
2025-11-20 21:37:49,134 | INFO     | app | Initializing Elasticsearch...
2025-11-20 21:37:53,153 | INFO     | app | Elasticsearch ready.
2025-11-20 21:37:53,168 | INFO     | app | BookingExpiryService started
2025-11-20 21:37:53,216 | INFO     | app | Notification worker started.
2025-11-20 21:40:05,028 | INFO     | app | Initializing database...
2025-11-20 21:40:05,174 | INFO     | app | Database initialized.
2025-11-20 21:40:05,174 | INFO     | app | Initializing Elasticsearch...
2025-11-20 21:40:09,192 | INFO     | app | Elasticsearch ready.
2025-11-20 21:40:09,207 | INFO     | app | BookingExpiryService started
2025-11-20 21:40:09,240 | INFO     | app | Notification worker started.
2025-11-20 21:40:15,772 | INFO     | app | Initializing database...
2025-11-20 21:40:16,014 | INFO     | app | Database initialized.
2025-11-20 21:40:16,014 | INFO     | app | Initializing Elasticsearch...
2025-11-20 21:40:20,032 | INFO     | app | Elasticsearch ready.
2025-11-20 21:40:20,046 | INFO     | app | BookingExpiryService started
2025-11-20 21:40:20,094 | INFO     | app | Notification worker started.
2025-11-20 21:48:48,983 | INFO     | app | Initializing database...
2025-11-20 21:48:49,246 | INFO     | app | Database initialized.
2025-11-20 21:48:49,247 | INFO     | app | Initializing Elasticsearch...
2025-11-20 21:48:53,275 | INFO     | app | Elasticsearch ready.
2025-11-20 21:48:53,290 | INFO     | app | BookingExpiryService started
2025-11-20 21:48:53,336 | INFO     | app | Notification worker started.
2025-11-20 21:49:36,295 | INFO     | app | Initializing database...
2025-11-20 21:49:36,495 | INFO     | app | Database initialized.
2025-11-20 21:49:36,496 | INFO     | app | Initializing Elasticsearch...
2025-11-20 21:49:40,514 | INFO     | app | Elasticsearch ready.
2025-11-20 21:49:40,530 | INFO     | app | BookingExpiryService started
2025-11-20 21:49:40,562 | INFO     | app | Notification worker started.
2025-11-20 21:50:58,576 | INFO     | app | Initializing database...
2025-11-20 21:50:58,768 | INFO     | app | Database initialized.
2025-11-20 21:50:58,769 | INFO     | app | Initializing Elasticsearch...
2025-11-20 21:51:02,798 | INFO     | app | Elasticsearch ready.
2025-11-20 21:51:02,812 | INFO     | app | BookingExpiryService started
2025-11-20 21:51:02,844 | INFO     | app | Notification worker started.
2025-11-20 21:54:24,831 | INFO     | app | Initializing database...
2025-11-20 21:54:25,001 | INFO     | app | Database initialized.
2025-11-20 21:54:25,001 | INFO     | app | Initializing Elasticsearch...
2025-11-20 21:54:29,012 | INFO     | app | Elasticsearch ready.
2025-11-20 21:54:29,027 | INFO     | app | BookingExpiryService started
2025-11-20 21:54:29,074 | INFO     | app | Notification worker started.
2025-11-20 22:02:04,318 | INFO     | app | Initializing database...
2025-11-20 22:02:04,518 | INFO     | app | Database initialized.
2025-11-20 22:02:04,518 | INFO     | app | Initializing Elasticsearch...
2025-11-20 22:02:08,539 | INFO     | app | Elasticsearch ready.
2025-11-20 22:02:08,554 | INFO     | app | BookingExpiryService started
2025-11-20 22:02:08,569 | INFO     | app | Notification worker started.
2025-11-20 22:03:22,951 | INFO     | app | Initializing database...
2025-11-20 22:03:23,174 | INFO     | app | Database initialized.
2025-11-20 22:03:23,174 | INFO     | app | Initializing Elasticsearch...
2025-11-20 22:03:27,204 | INFO     | app | Elasticsearch ready.
2025-11-20 22:03:27,219 | INFO     | app | BookingExpiryService started
2025-11-20 22:03:27,251 | INFO     | app | Notification worker started.
2025-11-20 22:04:53,349 | INFO     | app | Initializing database...
2025-11-20 22:04:53,667 | INFO     | app | Database initialized.
2025-11-20 22:04:53,668 | INFO     | app | Initializing Elasticsearch...
2025-11-20 22:04:57,680 | INFO     | app | Elasticsearch ready.
2025-11-20 22:04:57,695 | INFO     | app | BookingExpiryService started
2025-11-20 22:04:57,741 | INFO     | app | Notification worker started.
2025-11-20 22:05:05,479 | INFO     | app | Initializing database...
2025-11-20 22:05:05,753 | INFO     | app | Database initialized.
2025-11-20 22:05:05,753 | INFO     | app | Initializing Elasticsearch...
2025-11-20 22:05:09,776 | INFO     | app | Elasticsearch ready.
2025-11-20 22:05:09,793 | INFO     | app | BookingExpiryService started
2025-11-20 22:05:09,810 | INFO     | app | Notification worker started.
2025-11-20 22:07:40,789 | INFO     | app | Initializing database...
2025-11-20 22:07:41,066 | INFO     | app | Database initialized.
2025-11-20 22:07:41,067 | INFO     | app | Initializing Elasticsearch...
2025-11-20 22:07:45,089 | INFO     | app | Elasticsearch ready.
2025-11-20 22:07:45,104 | INFO     | app | BookingExpiryService started
2025-11-20 22:07:45,120 | INFO     | app | Notification worker started.
2025-11-20 22:12:53,229 | INFO     | app | Initializing database...
2025-11-20 22:12:53,536 | INFO     | app | Database initialized.
2025-11-20 22:12:53,536 | INFO     | app | Initializing Elasticsearch...
2025-11-20 22:12:57,550 | INFO     | app | Elasticsearch ready.
2025-11-20 22:12:57,566 | INFO     | app | BookingExpiryService started
2025-11-20 22:12:57,581 | INFO     | app | Notification worker started.
2025-11-20 22:13:30,776 | INFO     | app | Initializing database...
2025-11-20 22:13:31,106 | INFO     | app | Database initialized.
2025-11-20 22:13:31,107 | INFO     | app | Initializing Elasticsearch...
2025-11-20 22:13:35,132 | INFO     | app | Elasticsearch ready.
2025-11-20 22:13:35,147 | INFO     | app | BookingExpiryService started
2025-11-20 22:13:35,178 | INFO     | app | Notification worker started.
2025-11-20 22:14:16,356 | INFO     | app | Initializing database...
2025-11-20 22:14:16,634 | INFO     | app | Database initialized.
2025-11-20 22:14:16,634 | INFO     | app | Initializing Elasticsearch...
2025-11-20 22:14:20,653 | INFO     | app | Elasticsearch ready.
2025-11-20 22:14:20,669 | INFO     | app | BookingExpiryService started
2025-11-20 22:14:20,716 | INFO     | app | Notification worker started.
2025-11-20 22:15:17,788 | INFO     | app | Initializing database...
2025-11-20 22:15:17,939 | INFO     | app | Database initialized.
2025-11-20 22:15:17,939 | INFO     | app | Initializing Elasticsearch...
2025-11-20 22:15:21,966 | INFO     | app | Elasticsearch ready.
2025-11-20 22:15:21,980 | INFO     | app | BookingExpiryService started
2025-11-20 22:15:22,027 | INFO     | app | Notification worker started.
2025-11-20 22:15:27,496 | INFO     | app | Initializing database...
2025-11-20 22:15:27,776 | INFO     | app | Database initialized.
2025-11-20 22:15:27,776 | INFO     | app | Initializing Elasticsearch...
2025-11-20 22:15:31,796 | INFO     | app | Elasticsearch ready.
2025-11-20 22:15:31,811 | INFO     | app | BookingExpiryService started
2025-11-20 22:15:31,842 | INFO     | app | Notification worker started.
2025-11-20 22:20:32,338 | INFO     | app | Initializing database...
2025-11-20 22:20:32,738 | INFO     | app | Database initialized.
2025-11-20 22:20:32,738 | INFO     | app | Initializing Elasticsearch...
2025-11-20 22:20:36,770 | INFO     | app | Elasticsearch ready.
2025-11-20 22:20:36,785 | INFO     | app | BookingExpiryService started
2025-11-20 22:20:36,803 | INFO     | app | Notification worker started.
2025-11-21 00:00:41,352 | INFO     | app | Initializing database...
2025-11-21 00:00:43,022 | INFO     | app | Database initialized.
2025-11-21 00:00:43,023 | INFO     | app | Initializing Elasticsearch...
2025-11-21 00:00:47,038 | INFO     | app | Elasticsearch ready.
2025-11-21 00:00:47,053 | INFO     | app | BookingExpiryService started
2025-11-21 00:00:47,085 | INFO     | app | Notification worker started.
2025-11-21 00:01:13,033 | INFO     | app | Initializing database...
2025-11-21 00:01:13,242 | INFO     | app | Database initialized.
2025-11-21 00:01:13,242 | INFO     | app | Initializing Elasticsearch...
2025-11-21 00:01:17,262 | INFO     | app | Elasticsearch ready.
2025-11-21 00:01:17,272 | INFO     | app | BookingExpiryService started
2025-11-21 00:01:17,297 | INFO     | app | Notification worker started.
2025-11-21 00:02:27,131 | INFO     | app | Initializing database...
2025-11-21 00:02:27,342 | INFO     | app | Database initialized.
2025-11-21 00:02:27,342 | INFO     | app | Initializing Elasticsearch...
2025-11-21 00:02:31,356 | INFO     | app | Elasticsearch ready.
2025-11-21 00:02:31,371 | INFO     | app | BookingExpiryService started
2025-11-21 00:02:31,397 | INFO     | app | Notification worker started.
2025-11-21 00:02:49,577 | INFO     | app | Initializing database...
2025-11-21 00:02:49,777 | INFO     | app | Database initialized.
2025-11-21 00:02:49,778 | INFO     | app | Initializing Elasticsearch...
2025-11-21 00:02:53,793 | INFO     | app | Elasticsearch ready.
2025-11-21 00:02:53,807 | INFO     | app | BookingExpiryService started
2025-11-21 00:02:53,816 | INFO     | app | Notification worker started.
2025-11-21 00:03:38,951 | INFO     | app | Initializing database...
2025-11-21 00:03:39,176 | INFO     | app | Database initialized.
2025-11-21 00:03:39,176 | INFO     | app | Initializing Elasticsearch...
2025-11-21 00:03:43,185 | INFO     | app | Elasticsearch ready.
2025-11-21 00:03:43,195 | INFO     | app | BookingExpiryService started
2025-11-21 00:03:43,225 | INFO     | app | Notification worker started.
2025-11-21 00:04:49,814 | INFO     | app | Initializing database...
2025-11-21 00:04:50,042 | INFO     | app | Database initialized.
2025-11-21 00:04:50,042 | INFO     | app | Initializing Elasticsearch...
2025-11-21 00:04:54,056 | INFO     | app | Elasticsearch ready.
2025-11-21 00:04:54,071 | INFO     | app | BookingExpiryService started
2025-11-21 00:04:54,082 | ERROR    | app | Error in _check_and_expire_bookings: Could not determine join condition between parent/child tables on relationship User.payments - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.
2025-11-21 00:04:54,083 | INFO     | app | Notification worker started.
2025-11-21 00:05:39,676 | INFO     | app | Initializing database...
2025-11-21 00:05:40,083 | INFO     | app | Database initialized.
2025-11-21 00:05:40,084 | INFO     | app | Initializing Elasticsearch...
2025-11-21 00:05:44,103 | INFO     | app | Elasticsearch ready.
2025-11-21 00:05:44,118 | INFO     | app | BookingExpiryService started
2025-11-21 00:05:44,124 | ERROR    | app | Error in _check_and_expire_bookings: Could not determine join condition between parent/child tables on relationship User.payments - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.
2025-11-21 00:05:44,125 | INFO     | app | Notification worker started.
2025-11-21 00:05:50,847 | INFO     | app | Initializing database...
2025-11-21 00:05:51,078 | INFO     | app | Database initialized.
2025-11-21 00:05:51,078 | INFO     | app | Initializing Elasticsearch...
2025-11-21 00:05:55,089 | INFO     | app | Elasticsearch ready.
2025-11-21 00:05:55,096 | INFO     | app | BookingExpiryService started
2025-11-21 00:05:55,103 | ERROR    | app | Error in _check_and_expire_bookings: Could not determine join condition between parent/child tables on relationship User.payments - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.
2025-11-21 00:05:55,103 | INFO     | app | Notification worker started.
2025-11-21 00:06:07,279 | INFO     | app | Initializing database...
2025-11-21 00:06:07,556 | INFO     | app | Database initialized.
2025-11-21 00:06:07,557 | INFO     | app | Initializing Elasticsearch...
2025-11-21 00:06:11,568 | INFO     | app | Elasticsearch ready.
2025-11-21 00:06:11,576 | INFO     | app | BookingExpiryService started
2025-11-21 00:06:11,581 | ERROR    | app | Error in _check_and_expire_bookings: Mapper 'Mapper[Payment(payments)]' has no property 'user'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-11-21 00:06:11,582 | INFO     | app | Notification worker started.
2025-11-21 00:06:34,743 | INFO     | app | Initializing database...
2025-11-21 00:06:34,962 | INFO     | app | Database initialized.
2025-11-21 00:06:34,962 | INFO     | app | Initializing Elasticsearch...
2025-11-21 00:06:38,978 | INFO     | app | Elasticsearch ready.
2025-11-21 00:06:38,986 | ERROR    | app | Error in _check_and_expire_bookings: Mapper 'Mapper[Payment(payments)]' has no property 'user'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-11-21 00:06:38,986 | INFO     | app | BookingExpiryService started
2025-11-21 00:06:38,987 | INFO     | app | Notification worker started.
2025-11-21 00:06:45,944 | INFO     | app | Initializing database...
2025-11-21 00:06:46,252 | INFO     | app | Database initialized.
2025-11-21 00:06:46,253 | INFO     | app | Initializing Elasticsearch...
2025-11-21 00:06:50,278 | INFO     | app | Elasticsearch ready.
2025-11-21 00:06:50,286 | INFO     | app | BookingExpiryService started
2025-11-21 00:06:50,291 | ERROR    | app | Error in _check_and_expire_bookings: Could not determine join condition between parent/child tables on relationship User.invoices - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.
2025-11-21 00:06:50,292 | INFO     | app | Notification worker started.
2025-11-21 00:08:07,565 | INFO     | app | Initializing database...
2025-11-21 00:08:07,818 | INFO     | app | Database initialized.
2025-11-21 00:08:07,820 | INFO     | app | Initializing Elasticsearch...
2025-11-21 00:08:11,841 | INFO     | app | Elasticsearch ready.
2025-11-21 00:08:11,853 | INFO     | app | BookingExpiryService started
2025-11-21 00:08:11,861 | ERROR    | app | Error in _check_and_expire_bookings: Could not determine join condition between parent/child tables on relationship User.invoices - there are no foreign keys linking these tables.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or specify a 'primaryjoin' expression.
2025-11-21 00:08:11,861 | INFO     | app | Notification worker started.
2025-11-21 00:08:18,576 | INFO     | app | Initializing database...
2025-11-21 00:08:18,780 | INFO     | app | Database initialized.
2025-11-21 00:08:18,780 | INFO     | app | Initializing Elasticsearch...
2025-11-21 00:08:22,798 | INFO     | app | Elasticsearch ready.
2025-11-21 00:08:22,806 | INFO     | app | BookingExpiryService started
2025-11-21 00:08:22,808 | ERROR    | app | Error in _check_and_expire_bookings: Mapper 'Mapper[Invoice(invoices)]' has no property 'user'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-11-21 00:08:22,808 | INFO     | app | Notification worker started.
2025-11-21 00:08:43,610 | INFO     | app | Initializing database...
2025-11-21 00:08:43,818 | INFO     | app | Database initialized.
2025-11-21 00:08:43,819 | INFO     | app | Initializing Elasticsearch...
2025-11-21 00:08:47,836 | INFO     | app | Elasticsearch ready.
2025-11-21 00:08:47,846 | INFO     | app | BookingExpiryService started
2025-11-21 00:08:47,845 | ERROR    | app | Error in _check_and_expire_bookings: Mapper 'Mapper[Invoice(invoices)]' has no property 'user'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-11-21 00:08:47,846 | INFO     | app | Notification worker started.
2025-11-21 00:12:07,869 | INFO     | app | Initializing database...
2025-11-21 00:12:08,080 | INFO     | app | Database initialized.
2025-11-21 00:12:08,081 | INFO     | app | Initializing Elasticsearch...
2025-11-21 00:12:12,094 | INFO     | app | Elasticsearch ready.
2025-11-21 00:12:12,102 | ERROR    | app | Error in _check_and_expire_bookings: Mapper 'Mapper[Invoice(invoices)]' has no property 'user'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-11-21 00:12:12,103 | INFO     | app | BookingExpiryService started
2025-11-21 00:12:12,103 | INFO     | app | Notification worker started.
2025-11-21 00:12:52,362 | INFO     | app | Initializing database...
2025-11-21 00:12:52,565 | INFO     | app | Database initialized.
2025-11-21 00:12:52,566 | INFO     | app | Initializing Elasticsearch...
2025-11-21 00:12:56,581 | INFO     | app | Elasticsearch ready.
2025-11-21 00:12:56,592 | ERROR    | app | Error in _check_and_expire_bookings: Mapper 'Mapper[Invoice(invoices)]' has no property 'user'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-11-21 00:12:56,592 | INFO     | app | BookingExpiryService started
2025-11-21 00:12:56,593 | INFO     | app | Notification worker started.
2025-11-21 00:13:43,041 | INFO     | app | Initializing database...
2025-11-21 00:13:43,259 | INFO     | app | Database initialized.
2025-11-21 00:13:43,260 | INFO     | app | Initializing Elasticsearch...
2025-11-21 00:13:47,276 | INFO     | app | Elasticsearch ready.
2025-11-21 00:13:47,291 | INFO     | app | BookingExpiryService started
2025-11-21 00:13:47,301 | ERROR    | app | Error in _check_and_expire_bookings: Mapper 'Mapper[Invoice(invoices)]' has no property 'user'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-11-21 00:13:47,301 | INFO     | app | Notification worker started.
2025-11-21 00:13:53,711 | INFO     | app | Initializing database...
2025-11-21 00:13:53,966 | INFO     | app | Database initialized.
2025-11-21 00:13:53,966 | INFO     | app | Initializing Elasticsearch...
2025-11-21 00:13:57,990 | INFO     | app | Elasticsearch ready.
2025-11-21 00:13:58,000 | ERROR    | app | Error in _check_and_expire_bookings: Mapper 'Mapper[Invoice(invoices)]' has no property 'user'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-11-21 00:13:58,000 | INFO     | app | BookingExpiryService started
2025-11-21 00:13:58,000 | INFO     | app | Notification worker started.
2025-11-21 00:14:06,681 | INFO     | app | Initializing database...
2025-11-21 00:14:06,910 | INFO     | app | Database initialized.
2025-11-21 00:14:06,911 | INFO     | app | Initializing Elasticsearch...
2025-11-21 00:14:10,916 | INFO     | app | Elasticsearch ready.
2025-11-21 00:14:10,925 | INFO     | app | BookingExpiryService started
2025-11-21 00:14:10,927 | ERROR    | app | Error in _check_and_expire_bookings: Mapper 'Mapper[Invoice(invoices)]' has no property 'user'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-11-21 00:14:10,927 | INFO     | app | Notification worker started.
2025-11-21 00:19:23,614 | INFO     | app | Initializing database...
2025-11-21 00:19:23,843 | INFO     | app | Database initialized.
2025-11-21 00:19:23,843 | INFO     | app | Initializing Elasticsearch...
2025-11-21 00:19:27,847 | INFO     | app | Elasticsearch ready.
2025-11-21 00:19:27,857 | INFO     | app | BookingExpiryService started
2025-11-21 00:19:27,888 | INFO     | app | Notification worker started.
2025-11-21 00:24:44,046 | INFO     | app | Initializing database...
2025-11-21 00:24:45,946 | INFO     | app | Database initialized.
2025-11-21 00:24:45,946 | INFO     | app | Initializing Elasticsearch...
2025-11-21 00:24:49,956 | INFO     | app | Elasticsearch ready.
2025-11-21 00:24:49,971 | INFO     | app | BookingExpiryService started
2025-11-21 00:24:50,008 | INFO     | app | Notification worker started.
2025-11-21 00:25:52,848 | INFO     | app | Initializing database...
2025-11-21 00:25:53,076 | INFO     | app | Database initialized.
2025-11-21 00:25:53,076 | INFO     | app | Initializing Elasticsearch...
2025-11-21 00:25:57,097 | INFO     | app | Elasticsearch ready.
2025-11-21 00:25:57,112 | INFO     | app | BookingExpiryService started
2025-11-21 00:25:57,145 | INFO     | app | Notification worker started.
2025-11-21 00:34:08,423 | INFO     | app | Initializing database...
2025-11-21 00:34:08,807 | INFO     | app | Database initialized.
2025-11-21 00:34:08,808 | INFO     | app | Initializing Elasticsearch...
2025-11-21 00:34:12,832 | INFO     | app | Elasticsearch ready.
2025-11-21 00:34:12,848 | INFO     | app | BookingExpiryService started
2025-11-21 00:34:12,880 | INFO     | app | Notification worker started.
2025-11-21 00:40:59,382 | INFO     | app | Initializing database...
2025-11-21 00:41:01,159 | INFO     | app | Database initialized.
2025-11-21 00:41:01,160 | INFO     | app | Initializing Elasticsearch...
2025-11-21 00:41:05,185 | INFO     | app | Elasticsearch ready.
2025-11-21 00:41:05,200 | INFO     | app | BookingExpiryService started
2025-11-21 00:41:05,222 | INFO     | app | Notification worker started.
2025-11-21 07:30:41,334 | INFO     | app | Initializing database...
2025-11-21 07:30:42,126 | INFO     | app | Database initialized.
2025-11-21 07:30:42,127 | INFO     | app | Initializing Elasticsearch...
2025-11-21 07:30:46,133 | INFO     | app | Elasticsearch ready.
2025-11-21 07:30:46,139 | INFO     | app | BookingExpiryService started
2025-11-21 07:30:46,144 | INFO     | app | Notification worker started.
2025-11-21 07:43:51,621 | INFO     | app | Initializing database...
2025-11-21 07:43:51,789 | INFO     | app | Database initialized.
2025-11-21 07:43:51,790 | INFO     | app | Initializing Elasticsearch...
2025-11-21 07:43:55,794 | INFO     | app | Elasticsearch ready.
2025-11-21 07:43:55,801 | INFO     | app | BookingExpiryService started
2025-11-21 07:43:55,818 | INFO     | app | Notification worker started.
2025-11-21 12:48:37,839 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-21 12:50:19,092 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-21 12:50:54,799 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-21 12:52:23,718 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-21 12:53:08,908 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-21 12:53:59,283 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-21 13:08:47,135 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-21 13:13:23,768 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-21 13:14:12,437 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-21 13:14:15,014 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-21 13:14:18,903 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-21 13:14:21,620 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-21 13:14:24,098 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-21 13:15:55,022 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-21 13:21:17,779 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-21 13:21:20,402 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-21 13:21:22,947 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-21 13:21:36,845 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-21 13:21:47,896 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-21 13:22:27,586 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-21 13:23:18,046 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-21 13:23:20,318 | INFO     | app | Initializing database...
2025-11-21 13:23:30,219 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-21 13:23:32,513 | INFO     | app | Initializing database...
2025-11-21 13:25:11,831 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-21 13:25:13,813 | INFO     | app | Initializing database...
2025-11-21 13:25:14,905 | INFO     | app | Database initialized.
2025-11-21 13:25:14,905 | WARNING  | app | Elasticsearch not available - skipping initialization
2025-11-21 13:25:14,923 | INFO     | app | BookingExpiryService started
2025-11-21 13:25:14,953 | INFO     | app | Notification worker started.
2025-11-21 13:28:34,007 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-21 13:28:35,836 | INFO     | app | Initializing database...
2025-11-21 13:28:35,858 | INFO     | app | Database initialized.
2025-11-21 13:28:35,858 | WARNING  | app | Elasticsearch not available - skipping initialization
2025-11-21 13:28:35,877 | INFO     | app | BookingExpiryService started
2025-11-21 13:28:35,901 | INFO     | app | Notification worker started.
2025-11-21 13:33:12,754 | WARNING  | app.services.sms_service | Twilio not installed. Install with: pip install twilio
2025-11-21 13:33:16,663 | INFO     | app | Initializing database...
2025-11-21 13:33:16,685 | INFO     | app | Database initialized.
2025-11-21 13:33:16,685 | WARNING  | app | Elasticsearch not available - skipping initialization
2025-11-21 13:33:16,702 | INFO     | app | BookingExpiryService started
2025-11-21 13:33:16,742 | INFO     | app | Notification worker started.
2025-11-21 14:15:12,614 | INFO     | app | Initializing database...
2025-11-21 14:15:12,652 | INFO     | app | Database initialized.
2025-11-21 14:15:12,652 | INFO     | app | Initializing Elasticsearch...
2025-11-21 14:15:16,669 | INFO     | app | Elasticsearch ready.
2025-11-21 14:15:16,685 | INFO     | app | BookingExpiryService started
2025-11-21 14:15:16,749 | INFO     | app | Notification worker started.
2025-11-21 14:39:00,408 | INFO     | app | Initializing database...
2025-11-21 14:39:00,454 | INFO     | app | Database initialized.
2025-11-21 14:39:00,455 | INFO     | app | Initializing Elasticsearch...
2025-11-21 14:39:04,478 | INFO     | app | Elasticsearch ready.
2025-11-21 14:39:04,492 | INFO     | app | BookingExpiryService started
2025-11-21 14:39:04,554 | INFO     | app | Notification worker started.
2025-11-21 14:44:31,611 | INFO     | app | Initializing database...
2025-11-21 14:44:33,964 | INFO     | app | Database initialized.
2025-11-21 14:44:33,964 | INFO     | app | Initializing Elasticsearch...
2025-11-21 14:44:37,981 | INFO     | app | Elasticsearch ready.
2025-11-21 14:44:37,997 | INFO     | app | BookingExpiryService started
2025-11-21 14:44:38,045 | INFO     | app | Notification worker started.
2025-11-21 14:45:04,745 | INFO     | app | Initializing database...
2025-11-21 14:45:04,888 | INFO     | app | Database initialized.
2025-11-21 14:45:04,889 | INFO     | app | Initializing Elasticsearch...
2025-11-21 14:45:08,897 | INFO     | app | Elasticsearch ready.
2025-11-21 14:45:08,913 | INFO     | app | BookingExpiryService started
2025-11-21 14:45:09,009 | INFO     | app | Notification worker started.
2025-11-21 14:49:37,332 | INFO     | app | Initializing database...
2025-11-21 14:49:37,486 | INFO     | app | Database initialized.
2025-11-21 14:49:37,486 | INFO     | app | Initializing Elasticsearch...
2025-11-21 14:49:41,508 | INFO     | app | Elasticsearch ready.
2025-11-21 14:49:41,524 | INFO     | app | BookingExpiryService started
2025-11-21 14:49:41,571 | INFO     | app | Notification worker started.
2025-11-21 14:52:33,726 | INFO     | app | Initializing database...
2025-11-21 14:52:33,843 | INFO     | app | Database initialized.
2025-11-21 14:52:33,843 | INFO     | app | Initializing Elasticsearch...
2025-11-21 14:52:37,855 | INFO     | app | Elasticsearch ready.
2025-11-21 14:52:37,871 | INFO     | app | BookingExpiryService started
2025-11-21 14:52:37,934 | INFO     | app | Notification worker started.
2025-11-21 14:55:05,999 | INFO     | app | Initializing database...
2025-11-21 14:55:06,138 | INFO     | app | Database initialized.
2025-11-21 14:55:06,140 | INFO     | app | Initializing Elasticsearch...
2025-11-21 14:55:10,146 | INFO     | app | Elasticsearch ready.
2025-11-21 14:55:10,162 | INFO     | app | BookingExpiryService started
2025-11-21 14:55:10,254 | INFO     | app | Notification worker started.
2025-11-21 14:55:16,296 | INFO     | app | Initializing database...
2025-11-21 14:55:16,572 | INFO     | app | Database initialized.
2025-11-21 14:55:16,573 | INFO     | app | Initializing Elasticsearch...
2025-11-21 14:55:20,594 | INFO     | app | Elasticsearch ready.
2025-11-21 14:55:20,609 | INFO     | app | BookingExpiryService started
2025-11-21 14:55:20,688 | INFO     | app | Notification worker started.
2025-11-21 14:55:25,694 | INFO     | app | Initializing database...
2025-11-21 14:55:25,946 | INFO     | app | Database initialized.
2025-11-21 14:55:25,947 | INFO     | app | Initializing Elasticsearch...
2025-11-21 14:55:29,964 | INFO     | app | Elasticsearch ready.
2025-11-21 14:55:29,980 | INFO     | app | BookingExpiryService started
2025-11-21 14:55:30,027 | INFO     | app | Notification worker started.
2025-11-21 15:05:26,095 | INFO     | app | Initializing database...
2025-11-21 15:05:26,263 | INFO     | app | Database initialized.
2025-11-21 15:05:26,265 | INFO     | app | Initializing Elasticsearch...
2025-11-21 15:05:30,273 | INFO     | app | Elasticsearch ready.
2025-11-21 15:05:30,289 | INFO     | app | BookingExpiryService started
2025-11-21 15:05:30,346 | INFO     | app | Notification worker started.
2025-11-21 15:08:47,084 | INFO     | app | Initializing database...
2025-11-21 15:08:47,324 | INFO     | app | Database initialized.
2025-11-21 15:08:47,326 | INFO     | app | Initializing Elasticsearch...
2025-11-21 15:08:51,372 | INFO     | app | Elasticsearch ready.
2025-11-21 15:08:51,386 | INFO     | app | BookingExpiryService started
2025-11-21 15:08:51,452 | INFO     | app | Notification worker started.
2025-11-21 15:08:59,917 | INFO     | app | Initializing database...
2025-11-21 15:09:00,059 | INFO     | app | Database initialized.
2025-11-21 15:09:00,060 | INFO     | app | Initializing Elasticsearch...
2025-11-21 15:09:04,088 | INFO     | app | Elasticsearch ready.
2025-11-21 15:09:04,104 | INFO     | app | BookingExpiryService started
2025-11-21 15:09:04,185 | INFO     | app | Notification worker started.
=======
2025-11-21 14:49:40,833 | INFO     | app | Initializing database...
2025-11-21 14:51:17,286 | INFO     | app | Initializing database...
2025-11-21 14:51:18,685 | INFO     | app | Database initialized.
2025-11-21 14:51:18,688 | INFO     | app | Initializing Elasticsearch...
2025-11-21 14:51:18,692 | INFO     | app | Elasticsearch ready.
2025-11-21 14:51:18,715 | INFO     | app | BookingExpiryService started
2025-11-21 14:51:18,807 | INFO     | app | Notification worker started.
>>>>>>> Stashed changes
2025-11-21 16:34:54,135 | INFO     | app | Initializing database...
2025-11-21 16:34:55,728 | INFO     | app | Database initialized.
2025-11-21 16:34:55,730 | INFO     | app | Initializing Elasticsearch...
2025-11-21 16:34:59,759 | INFO     | app | Elasticsearch ready.
2025-11-21 16:34:59,778 | INFO     | app | BookingExpiryService started
2025-11-21 16:34:59,998 | INFO     | app | Notification worker started.
2025-11-21 17:05:34,948 | INFO     | app | Initializing database...
2025-11-21 17:05:35,824 | INFO     | app | Database initialized.
2025-11-21 17:05:35,826 | INFO     | app | Initializing Elasticsearch...
2025-11-21 17:05:39,860 | INFO     | app | Elasticsearch ready.
2025-11-21 17:05:39,875 | INFO     | app | BookingExpiryService started
2025-11-21 17:05:39,875 | INFO     | app | Notification worker started.
2025-11-21 17:09:56,044 | INFO     | app | Initializing database...
2025-11-21 17:09:56,535 | INFO     | app | Database initialized.
2025-11-21 17:09:56,536 | INFO     | app | Initializing Elasticsearch...
2025-11-21 17:10:00,570 | INFO     | app | Elasticsearch ready.
2025-11-21 17:10:00,584 | INFO     | app | BookingExpiryService started
2025-11-21 17:10:00,632 | INFO     | app | Notification worker started.
2025-11-21 17:26:32,428 | INFO     | app | Initializing database...
2025-11-21 17:26:32,726 | INFO     | app | Database initialized.
2025-11-21 17:26:32,726 | INFO     | app | Initializing Elasticsearch...
2025-11-21 17:26:36,752 | INFO     | app | Elasticsearch ready.
2025-11-21 17:26:36,768 | INFO     | app | BookingExpiryService started
2025-11-21 17:26:36,819 | INFO     | app | Notification worker started.
2025-11-21 17:27:08,548 | INFO     | app | Initializing database...
2025-11-21 17:27:08,841 | INFO     | app | Database initialized.
2025-11-21 17:27:08,842 | INFO     | app | Initializing Elasticsearch...
2025-11-21 17:27:12,860 | INFO     | app | Elasticsearch ready.
2025-11-21 17:27:12,877 | INFO     | app | BookingExpiryService started
2025-11-21 17:27:12,924 | INFO     | app | Notification worker started.
2025-11-21 17:27:48,722 | INFO     | app | Initializing database...
2025-11-21 17:27:48,969 | INFO     | app | Database initialized.
2025-11-21 17:27:48,970 | INFO     | app | Initializing Elasticsearch...
2025-11-21 17:27:52,997 | INFO     | app | Elasticsearch ready.
2025-11-21 17:27:53,012 | INFO     | app | BookingExpiryService started
2025-11-21 17:27:53,059 | INFO     | app | Notification worker started.
2025-11-21 17:29:03,057 | INFO     | app | Initializing database...
2025-11-21 17:29:03,258 | INFO     | app | Database initialized.
2025-11-21 17:29:03,258 | INFO     | app | Initializing Elasticsearch...
2025-11-21 17:29:07,283 | INFO     | app | Elasticsearch ready.
2025-11-21 17:29:07,298 | INFO     | app | BookingExpiryService started
2025-11-21 17:29:07,329 | INFO     | app | Notification worker started.
2025-11-21 17:30:36,004 | INFO     | app | Initializing database...
2025-11-21 17:30:37,299 | INFO     | app | Database initialized.
2025-11-21 17:30:37,301 | INFO     | app | Initializing Elasticsearch...
2025-11-21 17:30:41,323 | INFO     | app | Elasticsearch ready.
2025-11-21 17:30:41,339 | INFO     | app | BookingExpiryService started
2025-11-21 17:30:41,511 | INFO     | app | Notification worker started.
2025-11-21 17:31:16,060 | INFO     | app | Initializing database...
2025-11-21 17:31:16,400 | INFO     | app | Database initialized.
2025-11-21 17:31:16,401 | INFO     | app | Initializing Elasticsearch...
2025-11-21 17:31:20,407 | INFO     | app | Elasticsearch ready.
2025-11-21 17:31:20,422 | INFO     | app | BookingExpiryService started
2025-11-21 17:31:20,467 | INFO     | app | Notification worker started.
2025-11-22 10:15:01,820 | INFO     | app | Initializing database...
2025-11-22 10:15:02,382 | INFO     | app | Database initialized.
2025-11-22 10:15:02,382 | INFO     | app | Initializing Elasticsearch...
2025-11-22 10:15:06,396 | INFO     | app | Elasticsearch ready.
2025-11-22 10:15:06,411 | INFO     | app | BookingExpiryService started
2025-11-22 10:15:06,457 | INFO     | app | Notification worker started.
2025-11-22 10:15:43,247 | INFO     | app | Initializing database...
2025-11-22 10:15:43,474 | INFO     | app | Database initialized.
2025-11-22 10:15:43,474 | INFO     | app | Initializing Elasticsearch...
2025-11-22 10:15:47,488 | INFO     | app | Elasticsearch ready.
2025-11-22 10:15:47,503 | INFO     | app | BookingExpiryService started
2025-11-22 10:15:47,550 | INFO     | app | Notification worker started.
2025-11-22 10:17:31,212 | INFO     | app | Initializing database...
2025-11-22 10:17:31,701 | INFO     | app | Database initialized.
2025-11-22 10:17:31,701 | INFO     | app | Initializing Elasticsearch...
2025-11-22 10:17:35,721 | INFO     | app | Elasticsearch ready.
2025-11-22 10:17:35,736 | INFO     | app | BookingExpiryService started
2025-11-22 10:17:35,790 | INFO     | app | Notification worker started.
2025-11-22 10:18:02,504 | INFO     | app | Initializing database...
2025-11-22 10:18:03,960 | INFO     | app | Database initialized.
2025-11-22 10:18:03,986 | INFO     | app | Initializing Elasticsearch...
2025-11-22 10:18:08,136 | INFO     | app | Elasticsearch ready.
2025-11-22 10:18:08,164 | INFO     | app | BookingExpiryService started
2025-11-22 10:18:08,180 | INFO     | app | Notification worker started.
2025-11-22 10:18:47,777 | INFO     | app | Initializing database...
2025-11-22 10:18:48,045 | INFO     | app | Database initialized.
2025-11-22 10:18:48,045 | INFO     | app | Initializing Elasticsearch...
2025-11-22 10:18:52,060 | INFO     | app | Elasticsearch ready.
2025-11-22 10:18:52,075 | INFO     | app | BookingExpiryService started
2025-11-22 10:18:52,154 | INFO     | app | Notification worker started.
2025-11-22 10:22:05,122 | INFO     | app | Initializing database...
2025-11-22 10:22:06,375 | INFO     | app | Database initialized.
2025-11-22 10:22:06,375 | INFO     | app | Initializing Elasticsearch...
2025-11-22 10:22:10,391 | INFO     | app | Elasticsearch ready.
2025-11-22 10:22:10,406 | INFO     | app | BookingExpiryService started
2025-11-22 10:22:10,455 | INFO     | app | Notification worker started.
2025-11-22 10:22:48,703 | INFO     | app | Initializing database...
2025-11-22 10:22:49,316 | INFO     | app | Database initialized.
2025-11-22 10:22:49,321 | INFO     | app | Initializing Elasticsearch...
2025-11-22 10:22:53,353 | INFO     | app | Elasticsearch ready.
2025-11-22 10:22:53,368 | INFO     | app | BookingExpiryService started
2025-11-22 10:22:53,417 | INFO     | app | Notification worker started.
2025-11-22 10:23:36,123 | INFO     | app | Initializing database...
2025-11-22 10:23:36,476 | INFO     | app | Database initialized.
2025-11-22 10:23:36,476 | INFO     | app | Initializing Elasticsearch...
2025-11-22 10:23:40,496 | INFO     | app | Elasticsearch ready.
2025-11-22 10:23:40,511 | INFO     | app | BookingExpiryService started
2025-11-22 10:23:40,543 | INFO     | app | Notification worker started.
2025-11-22 10:29:10,892 | INFO     | app | Initializing database...
2025-11-22 10:29:12,225 | INFO     | app | Database initialized.
2025-11-22 10:29:12,226 | INFO     | app | Initializing Elasticsearch...
2025-11-22 10:29:16,253 | INFO     | app | Elasticsearch ready.
2025-11-22 10:29:16,278 | INFO     | app | BookingExpiryService started
2025-11-22 10:29:16,459 | INFO     | app | Notification worker started.
2025-11-22 10:29:54,118 | INFO     | app | Initializing database...
2025-11-22 10:29:54,315 | INFO     | app | Database initialized.
2025-11-22 10:29:54,315 | INFO     | app | Initializing Elasticsearch...
2025-11-22 10:29:58,336 | INFO     | app | Elasticsearch ready.
2025-11-22 10:29:58,352 | INFO     | app | BookingExpiryService started
2025-11-22 10:29:58,383 | INFO     | app | Notification worker started.
2025-11-22 12:26:56,893 | INFO     | app | Initializing database...
2025-11-22 13:11:55,031 | INFO     | app | Initializing database...
2025-11-22 13:11:55,875 | INFO     | app | Database initialized.
2025-11-22 13:11:55,876 | INFO     | app | Initializing Elasticsearch...
2025-11-22 13:11:59,907 | INFO     | app | Elasticsearch ready.
2025-11-22 13:11:59,923 | INFO     | app | BookingExpiryService started
2025-11-22 13:12:00,264 | INFO     | app | Notification worker started.
2025-11-22 13:18:09,377 | INFO     | app | Initializing database...
2025-11-22 13:18:09,824 | INFO     | app | Database initialized.
2025-11-22 13:18:09,825 | INFO     | app | Initializing Elasticsearch...
2025-11-22 13:18:13,841 | INFO     | app | Elasticsearch ready.
2025-11-22 13:18:13,856 | INFO     | app | BookingExpiryService started
2025-11-22 13:18:13,936 | INFO     | app | Notification worker started.
2025-11-22 13:31:16,676 | INFO     | app | Initializing database...
2025-11-22 13:31:16,820 | INFO     | app | Database initialized.
2025-11-22 13:31:16,821 | INFO     | app | Initializing Elasticsearch...
2025-11-22 13:31:20,847 | INFO     | app | Elasticsearch ready.
2025-11-22 13:31:20,862 | INFO     | app | BookingExpiryService started
2025-11-22 13:31:20,955 | INFO     | app | Notification worker started.
2025-11-22 13:31:26,303 | INFO     | app | Initializing database...
2025-11-22 13:31:26,462 | INFO     | app | Database initialized.
2025-11-22 13:31:26,463 | INFO     | app | Initializing Elasticsearch...
2025-11-22 13:31:30,480 | INFO     | app | Elasticsearch ready.
2025-11-22 13:31:30,496 | INFO     | app | BookingExpiryService started
2025-11-22 13:31:30,574 | INFO     | app | Notification worker started.
2025-11-22 13:31:46,555 | INFO     | app | Initializing database...
2025-11-22 13:31:46,702 | INFO     | app | Database initialized.
2025-11-22 13:31:46,703 | INFO     | app | Initializing Elasticsearch...
2025-11-22 13:31:50,721 | INFO     | app | Elasticsearch ready.
2025-11-22 13:31:50,737 | INFO     | app | BookingExpiryService started
2025-11-22 13:31:50,784 | INFO     | app | Notification worker started.
2025-11-22 13:33:46,481 | INFO     | app.api.v1.super_admin.admins | Creating admin with data: {'admin_name': 'nagendra', 'email': 'nagendrareddy1017@gmail.com', 'is_active': True}
2025-11-22 13:33:46,524 | INFO     | app.api.v1.super_admin.admins | Admin created successfully: admin_name='nagendra' email='nagendrareddy1017@gmail.com' is_active=True id=3 joined_at=datetime.datetime(2025, 11, 22, 13, 33, 46, 487268, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800)))
2025-11-22 13:34:15,592 | INFO     | app.api.v1.super_admin.admins | Assigning hostel to admin 3 with data: {'permission_level': 'read', 'hostel_id': 3}
2025-11-22 13:34:15,592 | INFO     | app.services.admin_service | Assigning hostel with permission level: read (type: <enum 'PermissionLevel'>)
2025-11-22 13:34:15,597 | INFO     | app.repositories.admin_repository | Creating assignment with permission level: read
2025-11-22 13:34:15,643 | INFO     | app.api.v1.super_admin.admins | Hostel assignment created successfully: permission_level=<PermissionLevel.read: 'read'> id=1 admin_id=3 hostel_id=3 assigned_at=datetime.datetime(2025, 11, 22, 13, 34, 15, 595618, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800)))
2025-11-22 13:34:27,538 | INFO     | app.api.v1.super_admin.admins | Assigning hostel to admin 3 with data: {'permission_level': 'admin', 'hostel_id': 3}
2025-11-22 13:34:27,538 | INFO     | app.services.admin_service | Assigning hostel with permission level: admin (type: <enum 'PermissionLevel'>)
2025-11-22 13:34:27,545 | INFO     | app.repositories.admin_repository | Creating assignment with permission level: admin
2025-11-22 13:34:27,572 | ERROR    | app.repositories.admin_repository | Error in assign_hostel_to_admin: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_admin_hostel_assignment"
DETAIL:  Key (admin_id, hostel_id)=(3, 3) already exists.

[SQL: INSERT INTO admin_hostel_assignments (admin_id, hostel_id, permission_level) VALUES (%(admin_id)s, %(hostel_id)s, %(permission_level)s) RETURNING admin_hostel_assignments.id, admin_hostel_assignments.assigned_at]
[parameters: {'admin_id': 3, 'hostel_id': 3, 'permission_level': 'admin'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-11-22 13:34:27,575 | ERROR    | app.services.admin_service | Error in assign_hostel: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_admin_hostel_assignment"
DETAIL:  Key (admin_id, hostel_id)=(3, 3) already exists.

[SQL: INSERT INTO admin_hostel_assignments (admin_id, hostel_id, permission_level) VALUES (%(admin_id)s, %(hostel_id)s, %(permission_level)s) RETURNING admin_hostel_assignments.id, admin_hostel_assignments.assigned_at]
[parameters: {'admin_id': 3, 'hostel_id': 3, 'permission_level': 'admin'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-11-22 13:34:27,586 | ERROR    | app.api.v1.super_admin.admins | Error assigning hostel to admin: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_admin_hostel_assignment"
DETAIL:  Key (admin_id, hostel_id)=(3, 3) already exists.

[SQL: INSERT INTO admin_hostel_assignments (admin_id, hostel_id, permission_level) VALUES (%(admin_id)s, %(hostel_id)s, %(permission_level)s) RETURNING admin_hostel_assignments.id, admin_hostel_assignments.assigned_at]
[parameters: {'admin_id': 3, 'hostel_id': 3, 'permission_level': 'admin'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-11-22 13:38:37,237 | INFO     | app.api.v1.super_admin.admins | Assigning hostel to admin 3 with data: {'permission_level': 'write', 'hostel_id': 3}
2025-11-22 13:38:37,239 | INFO     | app.services.admin_service | Assigning hostel with permission level: write (type: <enum 'PermissionLevel'>)
2025-11-22 13:38:37,244 | INFO     | app.repositories.admin_repository | Creating assignment with permission level: write
2025-11-22 13:38:37,248 | ERROR    | app.repositories.admin_repository | Error in assign_hostel_to_admin: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_admin_hostel_assignment"
DETAIL:  Key (admin_id, hostel_id)=(3, 3) already exists.

[SQL: INSERT INTO admin_hostel_assignments (admin_id, hostel_id, permission_level) VALUES (%(admin_id)s, %(hostel_id)s, %(permission_level)s) RETURNING admin_hostel_assignments.id, admin_hostel_assignments.assigned_at]
[parameters: {'admin_id': 3, 'hostel_id': 3, 'permission_level': 'write'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-11-22 13:38:37,249 | ERROR    | app.services.admin_service | Error in assign_hostel: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_admin_hostel_assignment"
DETAIL:  Key (admin_id, hostel_id)=(3, 3) already exists.

[SQL: INSERT INTO admin_hostel_assignments (admin_id, hostel_id, permission_level) VALUES (%(admin_id)s, %(hostel_id)s, %(permission_level)s) RETURNING admin_hostel_assignments.id, admin_hostel_assignments.assigned_at]
[parameters: {'admin_id': 3, 'hostel_id': 3, 'permission_level': 'write'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-11-22 13:38:37,252 | ERROR    | app.api.v1.super_admin.admins | Error assigning hostel to admin: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "uq_admin_hostel_assignment"
DETAIL:  Key (admin_id, hostel_id)=(3, 3) already exists.

[SQL: INSERT INTO admin_hostel_assignments (admin_id, hostel_id, permission_level) VALUES (%(admin_id)s, %(hostel_id)s, %(permission_level)s) RETURNING admin_hostel_assignments.id, admin_hostel_assignments.assigned_at]
[parameters: {'admin_id': 3, 'hostel_id': 3, 'permission_level': 'write'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-11-22 13:39:45,166 | INFO     | app.api.v1.super_admin.admins | Bulk assigning hostels with data: {'admin_id': 3, 'hostel_ids': [5, 2], 'permission_level': 'read'}
2025-11-22 13:39:45,181 | INFO     | app.services.admin_service | Bulk assigning with permission level: read (type: <enum 'PermissionLevel'>)
2025-11-22 13:39:45,197 | INFO     | app.api.v1.super_admin.admins | Bulk assignment successful: success=True message='Successfully assigned 2 hostels to admin' assignments=[AdminHostelAssignmentResponse(permission_level=<PermissionLevel.read: 'read'>, id=4, admin_id=3, hostel_id=5, assigned_at=datetime.datetime(2025, 11, 22, 13, 39, 45, 179726, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800)))), AdminHostelAssignmentResponse(permission_level=<PermissionLevel.read: 'read'>, id=5, admin_id=3, hostel_id=2, assigned_at=datetime.datetime(2025, 11, 22, 13, 39, 45, 179726, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))))]
2025-11-22 13:50:47,268 | INFO     | app | Initializing database...
2025-11-22 13:50:47,497 | INFO     | app | Database initialized.
2025-11-22 13:50:47,498 | INFO     | app | Initializing Elasticsearch...
2025-11-22 13:50:51,528 | INFO     | app | Elasticsearch ready.
2025-11-22 13:50:51,540 | INFO     | app | BookingExpiryService started
2025-11-22 13:50:51,634 | INFO     | app | Notification worker started.
2025-11-22 13:50:58,047 | INFO     | app | Initializing database...
2025-11-22 13:50:58,233 | INFO     | app | Database initialized.
2025-11-22 13:50:58,233 | INFO     | app | Initializing Elasticsearch...
2025-11-22 13:51:02,252 | INFO     | app | Elasticsearch ready.
2025-11-22 13:51:02,268 | INFO     | app | BookingExpiryService started
2025-11-22 13:51:02,314 | INFO     | app | Notification worker started.
2025-11-22 13:51:09,712 | INFO     | app | Initializing database...
2025-11-22 13:51:09,973 | INFO     | app | Database initialized.
2025-11-22 13:51:09,973 | INFO     | app | Initializing Elasticsearch...
2025-11-22 13:51:14,001 | INFO     | app | Elasticsearch ready.
2025-11-22 13:51:14,015 | INFO     | app | BookingExpiryService started
2025-11-22 13:51:14,031 | INFO     | app | Notification worker started.
2025-11-22 14:04:57,748 | INFO     | app | Initializing database...
2025-11-22 14:04:58,157 | INFO     | app | Database initialized.
2025-11-22 14:04:58,158 | INFO     | app | Initializing Elasticsearch...
2025-11-22 14:05:02,175 | INFO     | app | Elasticsearch ready.
2025-11-22 14:05:02,191 | INFO     | app | BookingExpiryService started
2025-11-22 14:05:02,264 | INFO     | app | Notification worker started.
2025-11-22 14:05:02,851 | ERROR    | app | Error in _check_and_expire_bookings: reverse_property 'payments' on relationship organizationPayment.hostel references relationship Hostel.payments, which does not reference mapper Mapper[organizationPayment(organization_payments)]
2025-11-22 14:10:02,962 | ERROR    | app | Error in _check_and_expire_bookings: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[organizationPayment(organization_payments)]'. Original exception was: reverse_property 'payments' on relationship organizationPayment.hostel references relationship Hostel.payments, which does not reference mapper Mapper[organizationPayment(organization_payments)]
2025-11-22 14:15:03,001 | ERROR    | app | Error in _check_and_expire_bookings: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[organizationPayment(organization_payments)]'. Original exception was: reverse_property 'payments' on relationship organizationPayment.hostel references relationship Hostel.payments, which does not reference mapper Mapper[organizationPayment(organization_payments)]
2025-11-22 14:20:03,041 | ERROR    | app | Error in _check_and_expire_bookings: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[organizationPayment(organization_payments)]'. Original exception was: reverse_property 'payments' on relationship organizationPayment.hostel references relationship Hostel.payments, which does not reference mapper Mapper[organizationPayment(organization_payments)]
2025-11-22 14:25:03,133 | ERROR    | app | Error in _check_and_expire_bookings: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[organizationPayment(organization_payments)]'. Original exception was: reverse_property 'payments' on relationship organizationPayment.hostel references relationship Hostel.payments, which does not reference mapper Mapper[organizationPayment(organization_payments)]
2025-11-22 14:30:03,341 | ERROR    | app | Error in _check_and_expire_bookings: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[organizationPayment(organization_payments)]'. Original exception was: reverse_property 'payments' on relationship organizationPayment.hostel references relationship Hostel.payments, which does not reference mapper Mapper[organizationPayment(organization_payments)]
2025-11-22 15:14:58,646 | ERROR    | app | Error in _check_and_expire_bookings: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[organizationPayment(organization_payments)]'. Original exception was: reverse_property 'payments' on relationship organizationPayment.hostel references relationship Hostel.payments, which does not reference mapper Mapper[organizationPayment(organization_payments)]
2025-11-22 15:19:58,771 | ERROR    | app | Error in _check_and_expire_bookings: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[organizationPayment(organization_payments)]'. Original exception was: reverse_property 'payments' on relationship organizationPayment.hostel references relationship Hostel.payments, which does not reference mapper Mapper[organizationPayment(organization_payments)]
2025-11-22 15:22:08,159 | INFO     | app | Initializing database...
2025-11-22 15:22:08,486 | INFO     | app | Database initialized.
2025-11-22 15:22:08,486 | INFO     | app | Initializing Elasticsearch...
2025-11-22 15:22:12,508 | INFO     | app | Elasticsearch ready.
2025-11-22 15:22:12,524 | INFO     | app | BookingExpiryService started
2025-11-22 15:22:12,617 | INFO     | app | Notification worker started.
2025-11-22 15:22:12,663 | ERROR    | app | Error in _check_and_expire_bookings: reverse_property 'payments' on relationship organizationPayment.hostel references relationship Hostel.payments, which does not reference mapper Mapper[organizationPayment(organization_payments)]
2025-11-22 15:22:19,618 | INFO     | app | Initializing database...
2025-11-22 15:22:19,874 | INFO     | app | Database initialized.
2025-11-22 15:22:19,875 | INFO     | app | Initializing Elasticsearch...
2025-11-22 15:22:23,889 | INFO     | app | Elasticsearch ready.
2025-11-22 15:22:23,904 | INFO     | app | BookingExpiryService started
2025-11-22 15:22:23,983 | INFO     | app | Notification worker started.
2025-11-22 15:22:24,004 | ERROR    | app | Error in _check_and_expire_bookings: reverse_property 'payments' on relationship organizationPayment.hostel references relationship Hostel.payments, which does not reference mapper Mapper[organizationPayment(organization_payments)]
2025-11-22 15:27:19,657 | INFO     | app | Initializing database...
2025-11-22 15:27:20,083 | INFO     | app | Database initialized.
2025-11-22 15:27:20,084 | INFO     | app | Initializing Elasticsearch...
2025-11-22 15:27:24,104 | INFO     | app | Elasticsearch ready.
2025-11-22 15:27:24,116 | INFO     | app | BookingExpiryService started
2025-11-22 15:27:24,208 | INFO     | app | Notification worker started.
2025-11-22 15:27:24,303 | ERROR    | app | Error in _check_and_expire_bookings: reverse_property 'payments' on relationship organizationPayment.hostel references relationship Hostel.payments, which does not reference mapper Mapper[organizationPayment(organization_payments)]
2025-11-22 15:32:24,456 | ERROR    | app | Error in _check_and_expire_bookings: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[organizationPayment(organization_payments)]'. Original exception was: reverse_property 'payments' on relationship organizationPayment.hostel references relationship Hostel.payments, which does not reference mapper Mapper[organizationPayment(organization_payments)]
2025-11-22 15:34:16,917 | INFO     | app | Initializing database...
2025-11-22 15:34:17,161 | INFO     | app | Database initialized.
2025-11-22 15:34:17,161 | INFO     | app | Initializing Elasticsearch...
2025-11-22 15:34:21,175 | INFO     | app | Elasticsearch ready.
2025-11-22 15:34:21,191 | INFO     | app | BookingExpiryService started
2025-11-22 15:34:21,268 | INFO     | app | Notification worker started.
2025-11-22 15:34:21,341 | ERROR    | app | Error in _check_and_expire_bookings: reverse_property 'payments' on relationship organizationPayment.hostel references relationship Hostel.payments, which does not reference mapper Mapper[organizationPayment(organization_payments)]
2025-11-22 15:34:28,476 | INFO     | app | Initializing database...
2025-11-22 15:34:28,714 | INFO     | app | Database initialized.
2025-11-22 15:34:28,715 | INFO     | app | Initializing Elasticsearch...
2025-11-22 15:34:32,735 | INFO     | app | Elasticsearch ready.
2025-11-22 15:34:32,750 | INFO     | app | BookingExpiryService started
2025-11-22 15:34:32,812 | INFO     | app | Notification worker started.
2025-11-22 15:34:32,876 | ERROR    | app | Error in _check_and_expire_bookings: reverse_property 'payments' on relationship organizationPayment.hostel references relationship Hostel.payments, which does not reference mapper Mapper[organizationPayment(organization_payments)]
2025-11-22 15:39:28,858 | INFO     | app | Initializing database...
2025-11-22 15:39:29,117 | INFO     | app | Database initialized.
2025-11-22 15:39:29,119 | INFO     | app | Initializing Elasticsearch...
2025-11-22 15:39:33,123 | INFO     | app | Elasticsearch ready.
2025-11-22 15:39:33,138 | INFO     | app | BookingExpiryService started
2025-11-22 15:39:33,216 | INFO     | app | Notification worker started.
2025-11-22 15:39:33,433 | ERROR    | app | Error in _check_and_expire_bookings: reverse_property 'payments' on relationship Payment.subscription references relationship Subscription.payments, which does not reference mapper Mapper[Payment(payments)]
2025-11-22 15:39:40,088 | INFO     | app | Initializing database...
2025-11-22 15:39:40,343 | INFO     | app | Database initialized.
2025-11-22 15:39:40,343 | INFO     | app | Initializing Elasticsearch...
2025-11-22 15:39:44,359 | INFO     | app | Elasticsearch ready.
2025-11-22 15:39:44,375 | INFO     | app | BookingExpiryService started
2025-11-22 15:39:44,438 | INFO     | app | Notification worker started.
2025-11-22 15:39:44,603 | ERROR    | app | Error in _check_and_expire_bookings: reverse_property 'payments' on relationship Payment.subscription references relationship Subscription.payments, which does not reference mapper Mapper[Payment(payments)]
2025-11-22 15:39:51,575 | INFO     | app | Initializing database...
2025-11-22 15:39:51,840 | INFO     | app | Database initialized.
2025-11-22 15:39:51,841 | INFO     | app | Initializing Elasticsearch...
2025-11-22 15:39:55,861 | INFO     | app | Elasticsearch ready.
2025-11-22 15:39:55,874 | INFO     | app | BookingExpiryService started
2025-11-22 15:39:55,936 | INFO     | app | Notification worker started.
2025-11-22 15:39:56,121 | ERROR    | app | Error in _check_and_expire_bookings: reverse_property 'payments' on relationship Payment.subscription references relationship Subscription.payments, which does not reference mapper Mapper[Payment(payments)]
2025-11-22 15:43:06,638 | INFO     | app | Initializing database...
2025-11-22 15:43:06,923 | INFO     | app | Database initialized.
2025-11-22 15:43:06,924 | INFO     | app | Initializing Elasticsearch...
2025-11-22 15:43:10,945 | INFO     | app | Elasticsearch ready.
2025-11-22 15:43:10,958 | INFO     | app | BookingExpiryService started
2025-11-22 15:43:11,005 | INFO     | app | Notification worker started.
2025-11-22 15:43:17,414 | INFO     | app | Initializing database...
2025-11-22 15:43:17,675 | INFO     | app | Database initialized.
2025-11-22 15:43:17,675 | INFO     | app | Initializing Elasticsearch...
2025-11-22 15:43:21,706 | INFO     | app | Elasticsearch ready.
2025-11-22 15:43:21,721 | INFO     | app | BookingExpiryService started
2025-11-22 15:43:21,736 | INFO     | app | Notification worker started.
2025-11-22 15:43:38,765 | INFO     | app | Initializing database...
2025-11-22 15:43:39,043 | INFO     | app | Database initialized.
2025-11-22 15:43:39,043 | INFO     | app | Initializing Elasticsearch...
2025-11-22 15:43:43,062 | INFO     | app | Elasticsearch ready.
2025-11-22 15:43:43,077 | INFO     | app | BookingExpiryService started
2025-11-22 15:43:43,092 | INFO     | app | Notification worker started.
2025-11-22 20:51:15,870 | INFO     | app | Initializing database...
2025-11-22 20:51:16,216 | INFO     | app | Database initialized.
2025-11-22 20:51:16,216 | INFO     | app | Initializing Elasticsearch...
2025-11-22 20:51:20,246 | INFO     | app | Elasticsearch ready.
2025-11-22 20:51:20,262 | INFO     | app | BookingExpiryService started
2025-11-22 20:51:20,357 | INFO     | app | Notification worker started.
2025-11-22 20:54:08,229 | INFO     | app | Initializing database...
2025-11-22 20:54:09,178 | INFO     | app | Database initialized.
2025-11-22 20:54:09,179 | INFO     | app | Initializing Elasticsearch...
2025-11-22 20:54:13,195 | INFO     | app | Elasticsearch ready.
2025-11-22 20:54:13,211 | INFO     | app | BookingExpiryService started
2025-11-22 20:54:13,382 | INFO     | app | Notification worker started.
2025-11-22 20:55:10,448 | INFO     | app | Initializing database...
2025-11-22 20:55:10,762 | INFO     | app | Database initialized.
2025-11-22 20:55:10,764 | INFO     | app | Initializing Elasticsearch...
2025-11-22 20:55:14,779 | INFO     | app | Elasticsearch ready.
2025-11-22 20:55:14,794 | INFO     | app | BookingExpiryService started
2025-11-22 20:55:14,873 | INFO     | app | Notification worker started.
2025-11-22 21:01:56,245 | ERROR    | app.repositories.hostel_repository | Integrity error during upsert: insert or update on table "hostels" violates foreign key constraint "hostels_location_id_fkey"
DETAIL:  Key (location_id)=(7) is not present in table "locations".

2025-11-22 21:21:53,733 | INFO     | app | Initializing database...
2025-11-22 21:21:53,969 | INFO     | app | Database initialized.
2025-11-22 21:21:53,969 | INFO     | app | Initializing Elasticsearch...
2025-11-22 21:21:57,994 | INFO     | app | Elasticsearch ready.
2025-11-22 21:21:58,010 | INFO     | app | BookingExpiryService started
2025-11-22 21:21:58,106 | INFO     | app | Notification worker started.
2025-11-22 22:00:30,595 | INFO     | app | Initializing database...
2025-11-22 22:00:31,128 | INFO     | app | Database initialized.
2025-11-22 22:00:31,129 | INFO     | app | Initializing Elasticsearch...
2025-11-22 22:00:35,172 | INFO     | app | Elasticsearch ready.
2025-11-22 22:00:35,223 | INFO     | app | BookingExpiryService started
2025-11-22 22:00:35,316 | INFO     | app | Notification worker started.
2025-11-22 22:07:36,010 | INFO     | app | Initializing database...
2025-11-22 22:07:36,297 | INFO     | app | Database initialized.
2025-11-22 22:07:36,298 | INFO     | app | Initializing Elasticsearch...
2025-11-22 22:07:40,317 | INFO     | app | Elasticsearch ready.
2025-11-22 22:07:40,332 | INFO     | app | BookingExpiryService started
2025-11-22 22:07:40,410 | INFO     | app | Notification worker started.
2025-11-22 22:07:51,426 | INFO     | app | Initializing database...
2025-11-22 22:07:51,683 | INFO     | app | Database initialized.
2025-11-22 22:07:51,683 | INFO     | app | Initializing Elasticsearch...
2025-11-22 22:07:55,705 | INFO     | app | Elasticsearch ready.
2025-11-22 22:07:55,720 | INFO     | app | BookingExpiryService started
2025-11-22 22:07:55,813 | INFO     | app | Notification worker started.
2025-11-22 22:12:54,267 | INFO     | app | Initializing database...
2025-11-22 22:12:54,510 | INFO     | app | Database initialized.
2025-11-22 22:12:54,511 | INFO     | app | Initializing Elasticsearch...
2025-11-22 22:12:58,544 | INFO     | app | Elasticsearch ready.
2025-11-22 22:12:58,560 | INFO     | app | BookingExpiryService started
2025-11-22 22:12:58,653 | INFO     | app | Notification worker started.
2025-11-22 22:31:45,385 | INFO     | app | Initializing database...
2025-11-22 22:31:45,756 | INFO     | app | Database initialized.
2025-11-22 22:31:45,757 | INFO     | app | Initializing Elasticsearch...
2025-11-22 22:31:49,789 | INFO     | app | Elasticsearch ready.
2025-11-22 22:31:49,804 | INFO     | app | BookingExpiryService started
2025-11-22 22:31:49,896 | INFO     | app | Notification worker started.
2025-11-23 00:05:46,338 | INFO     | app | Initializing database...
2025-11-23 00:05:46,672 | INFO     | app | Database initialized.
2025-11-23 00:05:46,673 | INFO     | app | Initializing Elasticsearch...
2025-11-23 00:05:50,695 | INFO     | app | Elasticsearch ready.
2025-11-23 00:05:50,710 | INFO     | app | BookingExpiryService started
2025-11-23 00:05:50,809 | INFO     | app | Notification worker started.
2025-11-23 00:10:41,039 | INFO     | app | Initializing database...
2025-11-23 00:10:41,284 | INFO     | app | Database initialized.
2025-11-23 00:10:41,285 | INFO     | app | Initializing Elasticsearch...
2025-11-23 00:10:45,304 | INFO     | app | Elasticsearch ready.
2025-11-23 00:10:45,318 | INFO     | app | BookingExpiryService started
2025-11-23 00:10:45,413 | INFO     | app | Notification worker started.
2025-11-23 00:10:52,377 | INFO     | app | Initializing database...
2025-11-23 00:10:52,604 | INFO     | app | Database initialized.
2025-11-23 00:10:52,605 | INFO     | app | Initializing Elasticsearch...
2025-11-23 00:10:56,635 | INFO     | app | Elasticsearch ready.
2025-11-23 00:10:56,652 | INFO     | app | BookingExpiryService started
2025-11-23 00:10:56,745 | INFO     | app | Notification worker started.
2025-11-23 01:30:42,329 | INFO     | app | Initializing database...
2025-11-23 01:30:42,716 | INFO     | app | Database initialized.
2025-11-23 01:30:42,719 | INFO     | app | Initializing Elasticsearch...
2025-11-23 01:30:46,747 | INFO     | app | Elasticsearch ready.
2025-11-23 01:30:46,763 | INFO     | app | BookingExpiryService started
2025-11-23 01:30:46,858 | INFO     | app | Notification worker started.
2025-11-23 01:49:48,498 | INFO     | app | Initializing database...
2025-11-23 01:49:49,084 | INFO     | app | Database initialized.
2025-11-23 01:49:49,088 | INFO     | app | Initializing Elasticsearch...
2025-11-23 01:49:53,115 | INFO     | app | Elasticsearch ready.
2025-11-23 01:49:53,130 | INFO     | app | BookingExpiryService started
2025-11-23 01:49:53,225 | INFO     | app | Notification worker started.
2025-11-23 01:58:58,868 | INFO     | app | Initializing database...
2025-11-23 01:58:59,116 | INFO     | app | Database initialized.
2025-11-23 01:58:59,117 | INFO     | app | Initializing Elasticsearch...
2025-11-23 01:59:03,148 | INFO     | app | Elasticsearch ready.
2025-11-23 01:59:03,163 | INFO     | app | BookingExpiryService started
2025-11-23 01:59:03,257 | INFO     | app | Notification worker started.
2025-11-23 02:06:28,544 | INFO     | app | Initializing database...
2025-11-23 02:06:28,845 | INFO     | app | Database initialized.
2025-11-23 02:06:28,845 | INFO     | app | Initializing Elasticsearch...
2025-11-23 02:06:32,878 | INFO     | app | Elasticsearch ready.
2025-11-23 02:06:32,894 | INFO     | app | BookingExpiryService started
2025-11-23 02:06:32,987 | INFO     | app | Notification worker started.
2025-11-23 02:08:51,546 | INFO     | app | Initializing database...
2025-11-23 02:08:51,866 | INFO     | app | Database initialized.
2025-11-23 02:08:51,866 | INFO     | app | Initializing Elasticsearch...
2025-11-23 02:08:55,890 | INFO     | app | Elasticsearch ready.
2025-11-23 02:08:55,904 | INFO     | app | BookingExpiryService started
2025-11-23 02:08:55,997 | INFO     | app | Notification worker started.
2025-11-23 02:58:55,369 | INFO     | app | Initializing database...
2025-11-23 02:58:55,553 | INFO     | app | Database initialized.
2025-11-23 02:58:55,554 | INFO     | app | Initializing Elasticsearch...
2025-11-23 02:58:59,568 | INFO     | app | Elasticsearch ready.
2025-11-23 02:58:59,582 | INFO     | app | BookingExpiryService started
2025-11-23 02:58:59,676 | INFO     | app | Notification worker started.
2025-11-23 03:00:22,167 | INFO     | app | Initializing database...
2025-11-23 03:00:22,445 | INFO     | app | Database initialized.
2025-11-23 03:00:22,445 | INFO     | app | Initializing Elasticsearch...
2025-11-23 03:00:26,469 | INFO     | app | Elasticsearch ready.
2025-11-23 03:00:26,483 | INFO     | app | BookingExpiryService started
2025-11-23 03:00:26,546 | INFO     | app | Notification worker started.
2025-11-23 03:00:31,889 | INFO     | app | Initializing database...
2025-11-23 03:00:32,145 | INFO     | app | Database initialized.
2025-11-23 03:00:32,146 | INFO     | app | Initializing Elasticsearch...
2025-11-23 03:00:36,169 | INFO     | app | Elasticsearch ready.
2025-11-23 03:00:36,184 | INFO     | app | BookingExpiryService started
2025-11-23 03:00:36,230 | INFO     | app | Notification worker started.
2025-11-23 03:48:41,103 | INFO     | app | Initializing database...
2025-11-23 03:48:41,267 | INFO     | app | Database initialized.
2025-11-23 03:48:41,268 | INFO     | app | Initializing Elasticsearch...
2025-11-23 03:48:45,285 | INFO     | app | Elasticsearch ready.
2025-11-23 03:48:45,314 | INFO     | app | BookingExpiryService started
2025-11-23 03:48:45,409 | INFO     | app | Notification worker started.
2025-11-23 03:48:51,408 | INFO     | app | Initializing database...
2025-11-23 03:48:51,539 | INFO     | app | Database initialized.
2025-11-23 03:48:51,539 | INFO     | app | Initializing Elasticsearch...
2025-11-23 03:48:55,555 | INFO     | app | Elasticsearch ready.
2025-11-23 03:48:55,572 | INFO     | app | BookingExpiryService started
2025-11-23 03:48:55,649 | INFO     | app | Notification worker started.
2025-11-23 03:52:59,182 | INFO     | app | Initializing database...
2025-11-23 03:52:59,314 | INFO     | app | Database initialized.
2025-11-23 03:52:59,315 | INFO     | app | Initializing Elasticsearch...
2025-11-23 03:53:03,333 | INFO     | app | Elasticsearch ready.
2025-11-23 03:53:03,349 | INFO     | app | BookingExpiryService started
2025-11-23 03:53:03,412 | INFO     | app | Notification worker started.
2025-11-23 03:53:08,610 | INFO     | app | Initializing database...
2025-11-23 03:53:08,826 | INFO     | app | Database initialized.
2025-11-23 03:53:08,827 | INFO     | app | Initializing Elasticsearch...
2025-11-23 03:53:12,855 | INFO     | app | Elasticsearch ready.
2025-11-23 03:53:12,870 | INFO     | app | BookingExpiryService started
2025-11-23 03:53:13,062 | INFO     | app | Notification worker started.
2025-11-23 03:53:26,347 | INFO     | app | Initializing database...
2025-11-23 03:53:26,499 | INFO     | app | Database initialized.
2025-11-23 03:53:26,500 | INFO     | app | Initializing Elasticsearch...
2025-11-23 03:53:30,526 | INFO     | app | Elasticsearch ready.
2025-11-23 03:53:30,541 | INFO     | app | BookingExpiryService started
2025-11-23 03:53:30,635 | INFO     | app | Notification worker started.
2025-11-23 08:05:07,817 | INFO     | app | Initializing database...
2025-11-23 08:05:09,191 | INFO     | app | Database initialized.
2025-11-23 08:05:09,192 | INFO     | app | Initializing Elasticsearch...
2025-11-23 08:05:13,206 | INFO     | app | Elasticsearch ready.
2025-11-23 08:05:13,221 | INFO     | app | BookingExpiryService started
2025-11-23 08:05:13,252 | INFO     | app | Notification worker started.
2025-11-23 08:23:02,177 | ERROR    | app.repositories.hostel_repository | Integrity error during upsert: insert or update on table "hostels" violates foreign key constraint "hostels_location_id_fkey"
DETAIL:  Key (location_id)=(2) is not present in table "locations".

2025-11-23 08:23:13,788 | ERROR    | app.repositories.hostel_repository | Integrity error during upsert: insert or update on table "hostels" violates foreign key constraint "hostels_location_id_fkey"
DETAIL:  Key (location_id)=(3) is not present in table "locations".

2025-11-23 08:24:25,792 | INFO     | app | Initializing database...
2025-11-23 08:24:26,097 | INFO     | app | Database initialized.
2025-11-23 08:24:26,098 | INFO     | app | Initializing Elasticsearch...
2025-11-23 08:24:30,117 | INFO     | app | Elasticsearch ready.
2025-11-23 08:24:30,132 | INFO     | app | BookingExpiryService started
2025-11-23 08:24:30,194 | INFO     | app | Notification worker started.
2025-11-23 08:45:23,442 | INFO     | app | Initializing database...
2025-11-23 08:45:23,709 | INFO     | app | Database initialized.
2025-11-23 08:45:23,710 | INFO     | app | Initializing Elasticsearch...
2025-11-23 08:45:27,723 | INFO     | app | Elasticsearch ready.
2025-11-23 08:45:27,739 | INFO     | app | BookingExpiryService started
2025-11-23 08:45:27,849 | INFO     | app | Notification worker started.
2025-11-23 08:45:59,463 | INFO     | app | Initializing database...
2025-11-23 08:45:59,828 | INFO     | app | Database initialized.
2025-11-23 08:45:59,829 | INFO     | app | Initializing Elasticsearch...
2025-11-23 08:46:03,842 | INFO     | app | Elasticsearch ready.
2025-11-23 08:46:03,857 | INFO     | app | BookingExpiryService started
2025-11-23 08:46:03,934 | INFO     | app | Notification worker started.
2025-11-23 08:46:22,386 | INFO     | app | Initializing database...
2025-11-23 08:46:22,744 | INFO     | app | Database initialized.
2025-11-23 08:46:22,745 | INFO     | app | Initializing Elasticsearch...
2025-11-23 08:46:26,779 | INFO     | app | Elasticsearch ready.
2025-11-23 08:46:26,807 | INFO     | app | BookingExpiryService started
2025-11-23 08:46:26,948 | INFO     | app | Notification worker started.
2025-11-23 21:02:23,310 | INFO     | app | Initializing database...
2025-11-23 21:02:23,766 | INFO     | app | Database initialized.
2025-11-23 21:02:23,766 | INFO     | app | Initializing Elasticsearch...
2025-11-23 21:02:27,781 | INFO     | app | Elasticsearch ready.
2025-11-23 21:02:27,797 | INFO     | app | BookingExpiryService started
2025-11-23 21:02:27,874 | INFO     | app | Notification worker started.
2025-11-23 21:02:38,290 | INFO     | app | Initializing database...
2025-11-23 21:02:38,532 | INFO     | app | Database initialized.
2025-11-23 21:02:38,532 | INFO     | app | Initializing Elasticsearch...
2025-11-23 21:02:42,566 | INFO     | app | Elasticsearch ready.
2025-11-23 21:02:42,581 | INFO     | app | BookingExpiryService started
2025-11-23 21:02:42,676 | INFO     | app | Notification worker started.
2025-11-23 21:07:44,913 | INFO     | app | Initializing database...
2025-11-23 21:07:45,237 | INFO     | app | Database initialized.
2025-11-23 21:07:45,238 | INFO     | app | Initializing Elasticsearch...
2025-11-23 21:07:49,273 | INFO     | app | Elasticsearch ready.
2025-11-23 21:07:49,285 | INFO     | app | BookingExpiryService started
2025-11-23 21:07:49,349 | INFO     | app | Notification worker started.
2025-11-23 21:10:03,435 | INFO     | app | Initializing database...
2025-11-23 21:10:03,713 | INFO     | app | Database initialized.
2025-11-23 21:10:03,714 | INFO     | app | Initializing Elasticsearch...
2025-11-23 21:10:07,753 | INFO     | app | Elasticsearch ready.
2025-11-23 21:10:07,780 | INFO     | app | BookingExpiryService started
2025-11-23 21:10:07,890 | INFO     | app | Notification worker started.
2025-11-23 21:14:35,562 | INFO     | app | Initializing database...
2025-11-23 21:14:36,174 | INFO     | app | Database initialized.
2025-11-23 21:14:36,175 | INFO     | app | Initializing Elasticsearch...
2025-11-23 21:14:40,206 | INFO     | app | Elasticsearch ready.
2025-11-23 21:14:40,231 | INFO     | app | BookingExpiryService started
2025-11-23 21:14:40,324 | INFO     | app | Notification worker started.
2025-11-23 21:28:28,253 | INFO     | app | Initializing database...
2025-11-23 21:28:28,596 | INFO     | app | Database initialized.
2025-11-23 21:28:28,598 | INFO     | app | Initializing Elasticsearch...
2025-11-23 21:28:32,608 | INFO     | app | Elasticsearch ready.
2025-11-23 21:28:32,622 | INFO     | app | BookingExpiryService started
2025-11-23 21:28:32,717 | INFO     | app | Notification worker started.
2025-11-23 21:29:44,817 | INFO     | app | Initializing database...
2025-11-23 21:29:45,203 | INFO     | app | Database initialized.
2025-11-23 21:29:45,205 | INFO     | app | Initializing Elasticsearch...
2025-11-23 21:29:49,233 | INFO     | app | Elasticsearch ready.
2025-11-23 21:29:49,249 | INFO     | app | BookingExpiryService started
2025-11-23 21:29:49,343 | INFO     | app | Notification worker started.
2025-11-23 21:32:27,137 | INFO     | app.api.v1.super_admin.admins | Creating admin with data: {'admin_name': 'manikanta', 'email': 'manikanta123@gmail.com', 'is_active': True}
2025-11-23 21:32:27,406 | INFO     | app.api.v1.super_admin.admins | Admin created successfully: admin_name='manikanta' email='manikanta123@gmail.com' is_active=True id=3 joined_at=datetime.datetime(2025, 11, 23, 21, 32, 27, 303255, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800)))
2025-11-23 21:32:47,915 | INFO     | app.api.v1.super_admin.admins | Assigning hostel to admin 3 with data: {'permission_level': 'read', 'hostel_id': 7}
2025-11-23 21:32:47,916 | INFO     | app.services.admin_service | Assigning hostel with permission level: read (type: <enum 'PermissionLevel'>)
2025-11-23 21:32:47,936 | INFO     | app.repositories.admin_repository | Creating assignment with permission level: read
2025-11-23 21:32:48,076 | INFO     | app.api.v1.super_admin.admins | Hostel assignment created successfully: permission_level=<PermissionLevel.read: 'read'> id=1 admin_id=3 hostel_id=7 assigned_at=datetime.datetime(2025, 11, 23, 21, 32, 47, 922203, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800)))
2025-11-23 21:33:23,468 | INFO     | app.api.v1.super_admin.admins | Bulk assigning hostels with data: {'admin_id': 3, 'hostel_ids': [5, 7], 'permission_level': 'read'}
2025-11-23 21:33:23,474 | INFO     | app.services.admin_service | Bulk assigning with permission level: read (type: <enum 'PermissionLevel'>)
2025-11-23 21:33:23,507 | INFO     | app.api.v1.super_admin.admins | Bulk assignment successful: success=True message='Successfully assigned 2 hostels to admin' assignments=[AdminHostelAssignmentResponse(permission_level=<PermissionLevel.read: 'read'>, id=2, admin_id=3, hostel_id=5, assigned_at=datetime.datetime(2025, 11, 23, 21, 33, 23, 471956, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800)))), AdminHostelAssignmentResponse(permission_level=<PermissionLevel.read: 'read'>, id=1, admin_id=3, hostel_id=7, assigned_at=datetime.datetime(2025, 11, 23, 21, 32, 47, 922203, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))))]
2025-11-23 22:38:19,436 | INFO     | app | Initializing database...
2025-11-23 22:38:20,672 | INFO     | app | Database initialized.
2025-11-23 22:38:20,682 | INFO     | app | Initializing Elasticsearch...
2025-11-23 22:38:24,704 | INFO     | app | Elasticsearch ready.
2025-11-23 22:38:24,721 | INFO     | app | BookingExpiryService started
2025-11-23 22:38:24,754 | INFO     | app | Notification worker started.
2025-11-23 22:38:56,129 | INFO     | app | Initializing database...
2025-11-23 22:38:56,216 | INFO     | app | Database initialized.
2025-11-23 22:38:56,216 | INFO     | app | Initializing Elasticsearch...
2025-11-23 22:39:00,236 | INFO     | app | Elasticsearch ready.
2025-11-23 22:39:00,250 | INFO     | app | BookingExpiryService started
2025-11-23 22:39:00,266 | INFO     | app | Notification worker started.
2025-11-23 22:46:44,251 | INFO     | app | Initializing database...
2025-11-23 22:46:44,436 | INFO     | app | Database initialized.
2025-11-23 22:46:44,436 | INFO     | app | Initializing Elasticsearch...
2025-11-23 22:46:48,445 | INFO     | app | Elasticsearch ready.
2025-11-23 22:46:48,460 | INFO     | app | BookingExpiryService started
2025-11-23 22:46:48,492 | INFO     | app | Notification worker started.
2025-11-24 08:49:13,926 | INFO     | app | Initializing database...
2025-11-24 08:49:57,989 | INFO     | app | Initializing database...
2025-11-24 08:49:59,072 | INFO     | app | Database initialized.
2025-11-24 08:49:59,073 | INFO     | app | Initializing Elasticsearch...
2025-11-24 08:50:03,090 | INFO     | app | Elasticsearch ready.
2025-11-24 08:50:03,105 | INFO     | app | BookingExpiryService started
2025-11-24 08:50:03,273 | INFO     | app | Notification worker started.
2025-11-24 08:50:44,553 | INFO     | app | Initializing database...
2025-11-24 08:50:44,808 | INFO     | app | Database initialized.
2025-11-24 08:50:44,809 | INFO     | app | Initializing Elasticsearch...
2025-11-24 08:50:48,819 | INFO     | app | Elasticsearch ready.
2025-11-24 08:50:48,829 | INFO     | app | BookingExpiryService started
2025-11-24 08:50:48,841 | INFO     | app | Notification worker started.
2025-11-24 09:23:05,389 | INFO     | app | Initializing database...
2025-11-24 09:23:05,636 | INFO     | app | Database initialized.
2025-11-24 09:23:05,636 | INFO     | app | Initializing Elasticsearch...
2025-11-24 09:23:09,666 | INFO     | app | Elasticsearch ready.
2025-11-24 09:23:09,681 | INFO     | app | BookingExpiryService started
2025-11-24 09:23:09,727 | INFO     | app | Notification worker started.
2025-11-24 09:23:21,734 | INFO     | app | Initializing database...
2025-11-24 09:23:22,027 | INFO     | app | Database initialized.
2025-11-24 09:23:22,028 | INFO     | app | Initializing Elasticsearch...
2025-11-24 09:23:26,038 | INFO     | app | Elasticsearch ready.
2025-11-24 09:23:26,052 | INFO     | app | BookingExpiryService started
2025-11-24 09:23:26,068 | INFO     | app | Notification worker started.
2025-11-24 09:27:16,565 | INFO     | app | Initializing database...
2025-11-24 09:27:16,923 | INFO     | app | Database initialized.
2025-11-24 09:27:16,923 | INFO     | app | Initializing Elasticsearch...
2025-11-24 09:27:20,942 | INFO     | app | Elasticsearch ready.
2025-11-24 09:27:20,957 | INFO     | app | BookingExpiryService started
2025-11-24 09:27:20,988 | INFO     | app | Notification worker started.
2025-11-24 09:36:21,393 | INFO     | app | Initializing database...
2025-11-24 09:36:21,750 | INFO     | app | Database initialized.
2025-11-24 09:36:21,751 | INFO     | app | Initializing Elasticsearch...
2025-11-24 09:36:25,764 | INFO     | app | Elasticsearch ready.
2025-11-24 09:36:25,778 | INFO     | app | BookingExpiryService started
2025-11-24 09:36:25,826 | INFO     | app | Notification worker started.
2025-11-24 09:37:00,689 | INFO     | app | Initializing database...
2025-11-24 09:37:00,937 | INFO     | app | Database initialized.
2025-11-24 09:37:00,938 | INFO     | app | Initializing Elasticsearch...
2025-11-24 09:37:04,968 | INFO     | app | Elasticsearch ready.
2025-11-24 09:37:04,983 | INFO     | app | BookingExpiryService started
2025-11-24 09:37:05,030 | INFO     | app | Notification worker started.
2025-11-24 16:03:34,147 | INFO     | app | Initializing database...
2025-11-24 16:03:35,300 | INFO     | app | Database initialized.
2025-11-24 16:03:35,312 | INFO     | app | Initializing Elasticsearch...
2025-11-24 16:03:39,332 | INFO     | app | Elasticsearch ready.
2025-11-24 16:03:39,347 | INFO     | app | BookingExpiryService started
2025-11-24 16:03:39,426 | INFO     | app | Notification worker started.
2025-11-24 16:04:11,963 | INFO     | app | Initializing database...
2025-11-24 16:04:12,369 | INFO     | app | Database initialized.
2025-11-24 16:04:12,370 | INFO     | app | Initializing Elasticsearch...
2025-11-24 16:04:16,395 | INFO     | app | Elasticsearch ready.
2025-11-24 16:04:16,410 | INFO     | app | BookingExpiryService started
2025-11-24 16:04:16,489 | INFO     | app | Notification worker started.
2025-11-24 17:09:33,211 | INFO     | app | Initializing database...
2025-11-24 17:09:33,436 | INFO     | app | Database initialized.
2025-11-24 17:09:33,436 | INFO     | app | Initializing Elasticsearch...
2025-11-24 17:09:37,467 | INFO     | app | Elasticsearch ready.
2025-11-24 17:09:37,483 | INFO     | app | BookingExpiryService started
2025-11-24 17:09:37,553 | INFO     | app | Notification worker started.
2025-11-24 17:13:40,525 | INFO     | app | Initializing database...
2025-11-24 17:13:40,788 | INFO     | app | Database initialized.
2025-11-24 17:13:40,788 | INFO     | app | Initializing Elasticsearch...
2025-11-24 17:13:44,799 | INFO     | app | Elasticsearch ready.
2025-11-24 17:13:44,814 | INFO     | app | BookingExpiryService started
2025-11-24 17:13:44,891 | INFO     | app | Notification worker started.
2025-11-24 17:16:32,797 | INFO     | app | Initializing database...
2025-11-24 17:16:33,173 | INFO     | app | Database initialized.
2025-11-24 17:16:33,174 | INFO     | app | Initializing Elasticsearch...
2025-11-24 17:16:37,184 | INFO     | app | Elasticsearch ready.
2025-11-24 17:16:37,200 | INFO     | app | BookingExpiryService started
2025-11-24 17:16:37,277 | INFO     | app | Notification worker started.
2025-11-24 17:18:52,931 | INFO     | app | Initializing database...
2025-11-24 17:18:53,253 | INFO     | app | Database initialized.
2025-11-24 17:18:53,253 | INFO     | app | Initializing Elasticsearch...
2025-11-24 17:18:57,272 | INFO     | app | Elasticsearch ready.
2025-11-24 17:18:57,286 | INFO     | app | BookingExpiryService started
2025-11-24 17:18:57,364 | INFO     | app | Notification worker started.
2025-11-24 17:21:11,954 | INFO     | app | Initializing database...
2025-11-24 17:21:12,295 | INFO     | app | Database initialized.
2025-11-24 17:21:12,296 | INFO     | app | Initializing Elasticsearch...
2025-11-24 17:21:16,321 | INFO     | app | Elasticsearch ready.
2025-11-24 17:21:16,337 | INFO     | app | BookingExpiryService started
2025-11-24 17:21:16,415 | INFO     | app | Notification worker started.
2025-11-24 17:50:14,252 | INFO     | app | Initializing database...
2025-11-24 17:50:14,739 | INFO     | app | Database initialized.
2025-11-24 17:50:14,739 | INFO     | app | Initializing Elasticsearch...
2025-11-24 17:50:18,756 | INFO     | app | Elasticsearch ready.
2025-11-24 17:50:18,773 | INFO     | app | BookingExpiryService started
2025-11-24 17:50:18,789 | INFO     | app | Notification worker started.
2025-11-24 20:26:47,712 | INFO     | app | Initializing database...
2025-11-24 20:26:47,941 | INFO     | app | Database initialized.
2025-11-24 20:26:47,941 | INFO     | app | Initializing Elasticsearch...
2025-11-24 20:26:51,971 | INFO     | app | Elasticsearch ready.
2025-11-24 20:26:51,988 | INFO     | app | BookingExpiryService started
2025-11-24 20:26:52,034 | INFO     | app | Notification worker started.
2025-11-24 20:26:52,278 | ERROR    | app | Error in _check_and_expire_bookings: (psycopg2.errors.UndefinedColumn) column bookings.student_id does not exist
LINE 1: ..._hostel_id, bookings.room_id AS bookings_room_id, bookings.s...
                                                             ^

[SQL: SELECT bookings.id AS bookings_id, bookings.visitor_id AS bookings_visitor_id, bookings.hostel_id AS bookings_hostel_id, bookings.room_id AS bookings_room_id, bookings.student_id AS bookings_student_id, bookings.check_in AS bookings_check_in, bookings.check_out AS bookings_check_out, bookings.amount_paid AS bookings_amount_paid, bookings.status AS bookings_status, bookings.created_at AS bookings_created_at 
FROM bookings 
WHERE bookings.status = %(status_1)s AND bookings.created_at < %(created_at_1)s]
[parameters: {'status_1': 'pending', 'created_at_1': datetime.datetime(2025, 11, 23, 14, 56, 51, 972132)}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-24 20:29:07,416 | INFO     | app | Initializing database...
2025-11-24 20:29:07,690 | INFO     | app | Database initialized.
2025-11-24 20:29:07,690 | INFO     | app | Initializing Elasticsearch...
2025-11-24 20:29:11,715 | INFO     | app | Elasticsearch ready.
2025-11-24 20:29:11,730 | INFO     | app | BookingExpiryService started
2025-11-24 20:29:11,762 | INFO     | app | Notification worker started.
2025-11-24 20:29:12,054 | ERROR    | app | Error in _check_and_expire_bookings: (psycopg2.errors.UndefinedColumn) column bookings.student_id does not exist
LINE 1: ..._hostel_id, bookings.room_id AS bookings_room_id, bookings.s...
                                                             ^

[SQL: SELECT bookings.id AS bookings_id, bookings.visitor_id AS bookings_visitor_id, bookings.hostel_id AS bookings_hostel_id, bookings.room_id AS bookings_room_id, bookings.student_id AS bookings_student_id, bookings.check_in AS bookings_check_in, bookings.check_out AS bookings_check_out, bookings.amount_paid AS bookings_amount_paid, bookings.status AS bookings_status, bookings.created_at AS bookings_created_at 
FROM bookings 
WHERE bookings.status = %(status_1)s AND bookings.created_at < %(created_at_1)s]
[parameters: {'status_1': 'pending', 'created_at_1': datetime.datetime(2025, 11, 23, 14, 59, 11, 715809)}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-24 20:33:12,877 | INFO     | app | Initializing database...
2025-11-24 20:33:13,126 | INFO     | app | Database initialized.
2025-11-24 20:33:13,127 | INFO     | app | Initializing Elasticsearch...
2025-11-24 20:33:17,150 | INFO     | app | Elasticsearch ready.
2025-11-24 20:33:17,164 | INFO     | app | BookingExpiryService started
2025-11-24 20:33:17,195 | INFO     | app | Notification worker started.
2025-11-24 20:33:17,217 | ERROR    | app | Error in _check_and_expire_bookings: Mapper 'Mapper[Student(students)]' has no property 'bookings'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-11-24 20:34:19,736 | INFO     | app | Initializing database...
2025-11-24 20:34:19,938 | INFO     | app | Database initialized.
2025-11-24 20:34:19,938 | INFO     | app | Initializing Elasticsearch...
2025-11-24 20:34:23,954 | INFO     | app | Elasticsearch ready.
2025-11-24 20:34:23,970 | INFO     | app | BookingExpiryService started
2025-11-24 20:34:24,001 | INFO     | app | Notification worker started.
2025-11-24 20:34:24,039 | ERROR    | app | Error in _check_and_expire_bookings: Mapper 'Mapper[Student(students)]' has no property 'bookings'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-11-24 20:34:29,405 | INFO     | app | Initializing database...
2025-11-24 20:34:29,646 | INFO     | app | Database initialized.
2025-11-24 20:34:29,647 | INFO     | app | Initializing Elasticsearch...
2025-11-24 20:34:33,673 | INFO     | app | Elasticsearch ready.
2025-11-24 20:34:33,689 | INFO     | app | BookingExpiryService started
2025-11-24 20:34:33,721 | INFO     | app | Notification worker started.
2025-11-24 20:34:33,740 | ERROR    | app | Error in _check_and_expire_bookings: Mapper 'Mapper[Student(students)]' has no property 'bookings'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-11-24 20:35:40,544 | INFO     | app | Initializing database...
2025-11-24 20:35:40,828 | INFO     | app | Database initialized.
2025-11-24 20:35:40,829 | INFO     | app | Initializing Elasticsearch...
2025-11-24 20:35:44,851 | INFO     | app | Elasticsearch ready.
2025-11-24 20:35:44,866 | INFO     | app | BookingExpiryService started
2025-11-24 20:35:44,881 | INFO     | app | Notification worker started.
2025-11-24 20:35:45,269 | ERROR    | app | Error in _check_and_expire_bookings: (psycopg2.errors.UndefinedColumn) column bookings.student_id does not exist
LINE 1: ..._hostel_id, bookings.room_id AS bookings_room_id, bookings.s...
                                                             ^

[SQL: SELECT bookings.id AS bookings_id, bookings.visitor_id AS bookings_visitor_id, bookings.hostel_id AS bookings_hostel_id, bookings.room_id AS bookings_room_id, bookings.student_id AS bookings_student_id, bookings.check_in AS bookings_check_in, bookings.check_out AS bookings_check_out, bookings.amount_paid AS bookings_amount_paid, bookings.status AS bookings_status, bookings.created_at AS bookings_created_at 
FROM bookings 
WHERE bookings.status = %(status_1)s AND bookings.created_at < %(created_at_1)s]
[parameters: {'status_1': 'pending', 'created_at_1': datetime.datetime(2025, 11, 23, 15, 5, 44, 852705)}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-24 20:35:56,799 | INFO     | app | Initializing database...
2025-11-24 20:35:57,030 | INFO     | app | Database initialized.
2025-11-24 20:35:57,030 | INFO     | app | Initializing Elasticsearch...
2025-11-24 20:36:01,043 | INFO     | app | Elasticsearch ready.
2025-11-24 20:36:01,058 | INFO     | app | BookingExpiryService started
2025-11-24 20:36:01,090 | INFO     | app | Notification worker started.
2025-11-24 20:36:01,358 | ERROR    | app | Error in _check_and_expire_bookings: (psycopg2.errors.UndefinedColumn) column bookings.student_id does not exist
LINE 1: ..._hostel_id, bookings.room_id AS bookings_room_id, bookings.s...
                                                             ^

[SQL: SELECT bookings.id AS bookings_id, bookings.visitor_id AS bookings_visitor_id, bookings.hostel_id AS bookings_hostel_id, bookings.room_id AS bookings_room_id, bookings.student_id AS bookings_student_id, bookings.check_in AS bookings_check_in, bookings.check_out AS bookings_check_out, bookings.amount_paid AS bookings_amount_paid, bookings.status AS bookings_status, bookings.created_at AS bookings_created_at 
FROM bookings 
WHERE bookings.status = %(status_1)s AND bookings.created_at < %(created_at_1)s]
[parameters: {'status_1': 'pending', 'created_at_1': datetime.datetime(2025, 11, 23, 15, 6, 1, 44655)}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-24 20:37:37,185 | INFO     | app | Initializing database...
2025-11-24 20:37:37,381 | INFO     | app | Database initialized.
2025-11-24 20:37:37,381 | INFO     | app | Initializing Elasticsearch...
2025-11-24 20:37:41,404 | INFO     | app | Elasticsearch ready.
2025-11-24 20:37:41,419 | INFO     | app | BookingExpiryService started
2025-11-24 20:37:41,450 | INFO     | app | Notification worker started.
2025-11-24 20:37:47,538 | INFO     | app | Initializing database...
2025-11-24 20:37:47,716 | INFO     | app | Database initialized.
2025-11-24 20:37:47,716 | INFO     | app | Initializing Elasticsearch...
2025-11-24 20:37:51,743 | INFO     | app | Elasticsearch ready.
2025-11-24 20:37:51,758 | INFO     | app | BookingExpiryService started
2025-11-24 20:37:51,789 | INFO     | app | Notification worker started.
2025-11-24 20:39:21,833 | INFO     | app | Initializing database...
2025-11-24 20:39:21,989 | INFO     | app | Database initialized.
2025-11-24 20:39:21,989 | INFO     | app | Initializing Elasticsearch...
2025-11-24 20:39:25,995 | INFO     | app | Elasticsearch ready.
2025-11-24 20:39:26,010 | INFO     | app | BookingExpiryService started
2025-11-24 20:39:26,030 | INFO     | app | Notification worker started.
2025-11-24 20:42:30,026 | INFO     | app | Initializing database...
2025-11-24 20:42:30,884 | INFO     | app | Database initialized.
2025-11-24 20:42:30,888 | INFO     | app | Initializing Elasticsearch...
2025-11-24 20:42:34,907 | INFO     | app | Elasticsearch ready.
2025-11-24 20:42:34,922 | INFO     | app | BookingExpiryService started
2025-11-24 20:42:34,935 | INFO     | app | Notification worker started.
2025-11-24 20:50:05,568 | INFO     | app | Initializing database...
2025-11-24 20:50:05,786 | INFO     | app | Database initialized.
2025-11-24 20:50:05,786 | INFO     | app | Initializing Elasticsearch...
2025-11-24 20:50:09,811 | INFO     | app | Elasticsearch ready.
2025-11-24 20:50:09,827 | INFO     | app | BookingExpiryService started
2025-11-24 20:50:09,859 | INFO     | app | Notification worker started.
2025-11-24 20:57:46,030 | INFO     | app | Initializing database...
2025-11-24 20:57:46,276 | INFO     | app | Database initialized.
2025-11-24 20:57:46,277 | INFO     | app | Initializing Elasticsearch...
2025-11-24 20:57:50,296 | INFO     | app | Elasticsearch ready.
2025-11-24 20:57:50,312 | INFO     | app | BookingExpiryService started
2025-11-24 20:57:50,391 | INFO     | app | Notification worker started.
2025-11-24 21:05:52,384 | INFO     | app | Initializing database...
2025-11-24 21:06:29,149 | INFO     | app | Initializing database...
2025-11-24 21:06:30,245 | INFO     | app | Database initialized.
2025-11-24 21:06:30,245 | INFO     | app | Initializing Elasticsearch...
2025-11-24 21:06:34,265 | INFO     | app | Elasticsearch ready.
2025-11-24 21:06:34,281 | INFO     | app | BookingExpiryService started
2025-11-24 21:06:34,323 | INFO     | app | Notification worker started.
2025-11-24 21:09:01,781 | INFO     | app | Initializing database...
2025-11-24 21:09:01,916 | INFO     | app | Database initialized.
2025-11-24 21:09:01,918 | INFO     | app | Initializing Elasticsearch...
2025-11-24 21:09:05,938 | INFO     | app | Elasticsearch ready.
2025-11-24 21:09:05,954 | INFO     | app | BookingExpiryService started
2025-11-24 21:09:06,024 | INFO     | app | Notification worker started.
2025-11-24 21:12:05,190 | INFO     | app | Initializing database...
2025-11-24 21:12:05,303 | INFO     | app | Database initialized.
2025-11-24 21:12:05,303 | INFO     | app | Initializing Elasticsearch...
2025-11-24 21:12:09,320 | INFO     | app | Elasticsearch ready.
2025-11-24 21:12:09,335 | INFO     | app | BookingExpiryService started
2025-11-24 21:12:09,408 | INFO     | app | Notification worker started.
2025-11-24 21:24:03,614 | INFO     | app | Initializing database...
2025-11-24 21:24:03,754 | INFO     | app | Database initialized.
2025-11-24 21:24:03,754 | INFO     | app | Initializing Elasticsearch...
2025-11-24 21:24:07,759 | INFO     | app | Elasticsearch ready.
2025-11-24 21:24:07,774 | INFO     | app | BookingExpiryService started
2025-11-24 21:24:07,856 | INFO     | app | Notification worker started.
2025-11-24 21:24:16,421 | INFO     | app | Initializing database...
2025-11-24 21:24:16,589 | INFO     | app | Database initialized.
2025-11-24 21:24:16,589 | INFO     | app | Initializing Elasticsearch...
2025-11-24 21:24:20,608 | INFO     | app | Elasticsearch ready.
2025-11-24 21:24:20,624 | INFO     | app | BookingExpiryService started
2025-11-24 21:24:20,705 | INFO     | app | Notification worker started.
2025-11-24 21:25:33,465 | INFO     | app | Initializing database...
2025-11-24 21:25:33,679 | INFO     | app | Database initialized.
2025-11-24 21:25:33,680 | INFO     | app | Initializing Elasticsearch...
2025-11-24 21:25:37,696 | INFO     | app | Elasticsearch ready.
2025-11-24 21:25:37,709 | INFO     | app | BookingExpiryService started
2025-11-24 21:25:37,791 | INFO     | app | Notification worker started.
2025-11-24 21:25:46,155 | INFO     | app | Initializing database...
2025-11-24 21:25:46,329 | INFO     | app | Database initialized.
2025-11-24 21:25:46,331 | INFO     | app | Initializing Elasticsearch...
2025-11-24 21:25:50,338 | INFO     | app | Elasticsearch ready.
2025-11-24 21:25:50,353 | INFO     | app | BookingExpiryService started
2025-11-24 21:25:50,416 | INFO     | app | Notification worker started.
2025-11-24 21:27:47,296 | INFO     | app | Initializing database...
2025-11-24 21:27:47,527 | INFO     | app | Database initialized.
2025-11-24 21:27:47,527 | INFO     | app | Initializing Elasticsearch...
2025-11-24 21:27:51,553 | INFO     | app | Elasticsearch ready.
2025-11-24 21:27:51,568 | INFO     | app | BookingExpiryService started
2025-11-24 21:27:51,669 | INFO     | app | Notification worker started.
2025-11-24 21:29:50,603 | INFO     | app | Initializing database...
2025-11-24 21:29:50,832 | INFO     | app | Database initialized.
2025-11-24 21:29:50,832 | INFO     | app | Initializing Elasticsearch...
2025-11-24 21:29:54,853 | INFO     | app | Elasticsearch ready.
2025-11-24 21:29:54,872 | INFO     | app | BookingExpiryService started
2025-11-24 21:29:54,968 | INFO     | app | Notification worker started.
2025-11-24 21:30:37,166 | INFO     | app | Initializing database...
2025-11-24 21:30:37,331 | INFO     | app | Database initialized.
2025-11-24 21:30:37,331 | INFO     | app | Initializing Elasticsearch...
2025-11-24 21:30:41,350 | INFO     | app | Elasticsearch ready.
2025-11-24 21:30:41,368 | INFO     | app | BookingExpiryService started
2025-11-24 21:30:41,429 | INFO     | app | Notification worker started.
2025-11-24 21:32:36,313 | INFO     | app | Initializing database...
2025-11-24 21:32:36,434 | INFO     | app | Database initialized.
2025-11-24 21:32:36,434 | INFO     | app | Initializing Elasticsearch...
2025-11-24 21:32:40,445 | INFO     | app | Elasticsearch ready.
2025-11-24 21:32:40,461 | INFO     | app | BookingExpiryService started
2025-11-24 21:32:40,531 | INFO     | app | Notification worker started.
2025-11-24 21:36:21,402 | INFO     | app | Initializing database...
2025-11-24 21:36:21,539 | INFO     | app | Database initialized.
2025-11-24 21:36:21,540 | INFO     | app | Initializing Elasticsearch...
2025-11-24 21:36:25,547 | INFO     | app | Elasticsearch ready.
2025-11-24 21:36:25,560 | INFO     | app | BookingExpiryService started
2025-11-24 21:36:25,626 | INFO     | app | Notification worker started.
2025-11-24 21:36:34,140 | INFO     | app | Initializing database...
2025-11-24 21:36:34,408 | INFO     | app | Database initialized.
2025-11-24 21:36:34,409 | INFO     | app | Initializing Elasticsearch...
2025-11-24 21:36:38,434 | INFO     | app | Elasticsearch ready.
2025-11-24 21:36:38,449 | INFO     | app | BookingExpiryService started
2025-11-24 21:36:38,535 | INFO     | app | Notification worker started.
2025-11-24 22:46:05,374 | INFO     | app | Initializing database...
2025-11-24 22:46:05,719 | INFO     | app | Database initialized.
2025-11-24 22:46:05,719 | INFO     | app | Initializing Elasticsearch...
2025-11-24 22:46:09,737 | INFO     | app | Elasticsearch ready.
2025-11-24 22:46:09,753 | INFO     | app | BookingExpiryService started
2025-11-24 22:46:09,799 | INFO     | app | Notification worker started.
2025-11-24 22:47:04,461 | INFO     | app | Initializing database...
2025-11-24 22:47:07,313 | INFO     | app | Database initialized.
2025-11-24 22:47:07,314 | INFO     | app | Initializing Elasticsearch...
2025-11-24 22:47:11,333 | INFO     | app | Elasticsearch ready.
2025-11-24 22:47:11,348 | INFO     | app | BookingExpiryService started
2025-11-24 22:47:11,425 | INFO     | app | Notification worker started.
2025-11-24 22:47:29,856 | INFO     | app | Initializing database...
2025-11-24 22:47:31,362 | INFO     | app | Database initialized.
2025-11-24 22:47:31,363 | INFO     | app | Initializing Elasticsearch...
2025-11-24 22:47:35,390 | INFO     | app | Elasticsearch ready.
2025-11-24 22:47:35,405 | INFO     | app | BookingExpiryService started
2025-11-24 22:47:35,452 | INFO     | app | Notification worker started.
2025-11-24 23:01:43,942 | INFO     | app | Initializing database...
2025-11-24 23:01:44,189 | INFO     | app | Database initialized.
2025-11-24 23:01:44,189 | INFO     | app | Initializing Elasticsearch...
2025-11-24 23:01:48,211 | INFO     | app | Elasticsearch ready.
2025-11-24 23:01:48,227 | INFO     | app | BookingExpiryService started
2025-11-24 23:01:48,289 | INFO     | app | Notification worker started.
